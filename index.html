
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Quaderno API Docs</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen-4a912551.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-7b1163c9.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-c808cc27.js"></script>
  </head>

  <body class="index" data-languages="[&quot;cURL&quot;,&quot;ruby&quot;,&quot;php&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-9597c0d4.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="cURL">cURL</a>
              <a href="#" data-language-name="ruby">ruby</a>
              <a href="#" data-language-name="php">php</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#the-sandbox" class="toc-h1 toc-link" data-title="The Sandbox">The Sandbox</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#authorization" class="toc-h1 toc-link" data-title="Authorization">Authorization</a>
          </li>
          <li>
            <a href="#rate-limiting" class="toc-h1 toc-link" data-title="Rate Limiting">Rate Limiting</a>
          </li>
          <li>
            <a href="#pagination" class="toc-h1 toc-link" data-title="Pagination">Pagination</a>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
          <li>
            <a href="#versioning" class="toc-h1 toc-link" data-title="Versioning">Versioning</a>
          </li>
          <li>
            <a href="#core-resources" class="toc-h1 toc-link" data-title="CORE RESOURCES">CORE RESOURCES</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#contacts" class="toc-h2 toc-link" data-title="Contacts">Contacts</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#the-contact-object" class="toc-h3 toc-link" data-title="The contact object">The contact object</a>
                          </li>
                          <li>
                            <a href="#create-a-contact" class="toc-h3 toc-link" data-title="Create a contact">Create a contact</a>
                          </li>
                          <li>
                            <a href="#update-a-contact" class="toc-h3 toc-link" data-title="Update a contact">Update a contact</a>
                          </li>
                          <li>
                            <a href="#delete-a-contact" class="toc-h3 toc-link" data-title="Delete a contact">Delete a contact</a>
                          </li>
                          <li>
                            <a href="#retrieve-a-contact" class="toc-h3 toc-link" data-title="Retrieve a contact">Retrieve a contact</a>
                          </li>
                          <li>
                            <a href="#retrieve-a-contact-by-processor-id" class="toc-h3 toc-link" data-title="Retrieve a contact by processor ID">Retrieve a contact by processor ID</a>
                          </li>
                          <li>
                            <a href="#list-all-contacts" class="toc-h3 toc-link" data-title="List all contacts">List all contacts</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#events" class="toc-h2 toc-link" data-title="Events">Events</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#data-format" class="toc-h3 toc-link" data-title="Data Format">Data Format</a>
                          </li>
                          <li>
                            <a href="#event-types" class="toc-h3 toc-link" data-title="Event Types">Event Types</a>
                          </li>
                          <li>
                            <a href="#endpoint-errors" class="toc-h3 toc-link" data-title="Endpoint errors">Endpoint errors</a>
                          </li>
                          <li>
                            <a href="#verifying-webhook-requests" class="toc-h3 toc-link" data-title="Verifying webhook requests">Verifying webhook requests</a>
                          </li>
                          <li>
                            <a href="#verify-request-signatures" class="toc-h3 toc-link" data-title="Verify request signatures">Verify request signatures</a>
                          </li>
                          <li>
                            <a href="#get-your-webhook-authentication-key" class="toc-h3 toc-link" data-title="Get your webhook authentication key">Get your webhook authentication key</a>
                          </li>
                          <li>
                            <a href="#generate-a-signature" class="toc-h3 toc-link" data-title="Generate a signature">Generate a signature</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#evidence" class="toc-h2 toc-link" data-title="Evidence">Evidence</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#the-evidence-object" class="toc-h3 toc-link" data-title="The evidence object">The evidence object</a>
                          </li>
                          <li>
                            <a href="#create-an-evidence" class="toc-h3 toc-link" data-title="Create an evidence">Create an evidence</a>
                          </li>
                          <li>
                            <a href="#update-an-evidence" class="toc-h3 toc-link" data-title="Update an evidence">Update an evidence</a>
                          </li>
                          <li>
                            <a href="#retrieve-get-and-filter-all-evidence" class="toc-h3 toc-link" data-title="Retrieve: Get and filter all evidence">Retrieve: Get and filter all evidence</a>
                          </li>
                          <li>
                            <a href="#retrieve-get-a-single-evidence" class="toc-h3 toc-link" data-title="Retrieve: Get a single evidence">Retrieve: Get a single evidence</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#items" class="toc-h2 toc-link" data-title="Items">Items</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#create-an-item" class="toc-h3 toc-link" data-title="Create an item">Create an item</a>
                          </li>
                          <li>
                            <a href="#retrieve-get-and-filter-all-items" class="toc-h3 toc-link" data-title="Retrieve: Get and filter all items">Retrieve: Get and filter all items</a>
                          </li>
                          <li>
                            <a href="#retrieve-get-a-single-item" class="toc-h3 toc-link" data-title="Retrieve: Get a single item">Retrieve: Get a single item</a>
                          </li>
                          <li>
                            <a href="#update-an-item" class="toc-h3 toc-link" data-title="Update an item">Update an item</a>
                          </li>
                          <li>
                            <a href="#delete-an-item" class="toc-h3 toc-link" data-title="Delete an item">Delete an item</a>
                          </li>
                          <li>
                            <a href="#adding-an-item-to-a-document-by-reference" class="toc-h3 toc-link" data-title="Adding an item to a document by reference">Adding an item to a document by reference</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#taxes" class="toc-h2 toc-link" data-title="Taxes">Taxes</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#calculate-taxes" class="toc-h3 toc-link" data-title="Calculate Taxes">Calculate Taxes</a>
                          </li>
                          <li>
                            <a href="#validating-tax-ids" class="toc-h3 toc-link" data-title="Validating Tax IDs">Validating Tax IDs</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#invoicing" class="toc-h1 toc-link" data-title="INVOICING">INVOICING</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#invoices" class="toc-h2 toc-link" data-title="Invoices">Invoices</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#create-an-invoice" class="toc-h3 toc-link" data-title="Create an invoice">Create an invoice</a>
                          </li>
                          <li>
                            <a href="#retrieve-get-and-filter-all-invoices" class="toc-h3 toc-link" data-title="Retrieve: Get and filter all invoices">Retrieve: Get and filter all invoices</a>
                          </li>
                          <li>
                            <a href="#retrieve-get-a-single-invoice" class="toc-h3 toc-link" data-title="Retrieve: Get a single invoice">Retrieve: Get a single invoice</a>
                          </li>
                          <li>
                            <a href="#update-an-invoice" class="toc-h3 toc-link" data-title="Update an invoice">Update an invoice</a>
                          </li>
                          <li>
                            <a href="#delete-an-invoice" class="toc-h3 toc-link" data-title="Delete an invoice">Delete an invoice</a>
                          </li>
                          <li>
                            <a href="#deliver-an-invoice" class="toc-h3 toc-link" data-title="Deliver an invoice">Deliver an invoice</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#credits" class="toc-h2 toc-link" data-title="Credits">Credits</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#create-a-credit" class="toc-h3 toc-link" data-title="Create a credit">Create a credit</a>
                          </li>
                          <li>
                            <a href="#retrieve-get-and-filter-all-credits" class="toc-h3 toc-link" data-title="Retrieve: Get and filter all credits">Retrieve: Get and filter all credits</a>
                          </li>
                          <li>
                            <a href="#retrieve-get-a-single-credit" class="toc-h3 toc-link" data-title="Retrieve: Get a single credit">Retrieve: Get a single credit</a>
                          </li>
                          <li>
                            <a href="#update-a-credit" class="toc-h3 toc-link" data-title="Update a credit">Update a credit</a>
                          </li>
                          <li>
                            <a href="#delete-a-credit" class="toc-h3 toc-link" data-title="Delete a credit">Delete a credit</a>
                          </li>
                          <li>
                            <a href="#deliver-a-credit" class="toc-h3 toc-link" data-title="Deliver a credit">Deliver a credit</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#expenses" class="toc-h2 toc-link" data-title="Expenses">Expenses</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#create-an-expense" class="toc-h3 toc-link" data-title="Create an expense">Create an expense</a>
                          </li>
                          <li>
                            <a href="#retrieve-get-and-filter-all-expenses" class="toc-h3 toc-link" data-title="Retrieve: Get and filter all expenses">Retrieve: Get and filter all expenses</a>
                          </li>
                          <li>
                            <a href="#retrieve-get-a-single-expense" class="toc-h3 toc-link" data-title="Retrieve: Get a single expense">Retrieve: Get a single expense</a>
                          </li>
                          <li>
                            <a href="#update-an-expense" class="toc-h3 toc-link" data-title="Update an expense">Update an expense</a>
                          </li>
                          <li>
                            <a href="#save-an-invoice-as-an-expense" class="toc-h3 toc-link" data-title="Save an invoice as an expense">Save an invoice as an expense</a>
                          </li>
                          <li>
                            <a href="#delete-an-expense" class="toc-h3 toc-link" data-title="Delete an expense">Delete an expense</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#estimates" class="toc-h2 toc-link" data-title="Estimates">Estimates</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#create-an-estimate" class="toc-h3 toc-link" data-title="Create an estimate">Create an estimate</a>
                          </li>
                          <li>
                            <a href="#retrieve-get-and-filter-all-estimates" class="toc-h3 toc-link" data-title="Retrieve: Get and filter all estimates">Retrieve: Get and filter all estimates</a>
                          </li>
                          <li>
                            <a href="#retrieve-get-a-single-estimate" class="toc-h3 toc-link" data-title="Retrieve: Get a single estimate">Retrieve: Get a single estimate</a>
                          </li>
                          <li>
                            <a href="#update-an-estimate" class="toc-h3 toc-link" data-title="Update an estimate">Update an estimate</a>
                          </li>
                          <li>
                            <a href="#delete-an-estimate" class="toc-h3 toc-link" data-title="Delete an estimate">Delete an estimate</a>
                          </li>
                          <li>
                            <a href="#deliver-an-estimate" class="toc-h3 toc-link" data-title="Deliver an estimate">Deliver an estimate</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#recurring" class="toc-h2 toc-link" data-title="Recurring">Recurring</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#create-a-recurring" class="toc-h3 toc-link" data-title="Create a recurring">Create a recurring</a>
                          </li>
                          <li>
                            <a href="#retrieve-get-and-filter-all-recurrings" class="toc-h3 toc-link" data-title="Retrieve: Get and filter all recurrings">Retrieve: Get and filter all recurrings</a>
                          </li>
                          <li>
                            <a href="#retrieve-get-a-single-recurring" class="toc-h3 toc-link" data-title="Retrieve: Get a single recurring">Retrieve: Get a single recurring</a>
                          </li>
                          <li>
                            <a href="#update-a-recurring" class="toc-h3 toc-link" data-title="Update a recurring">Update a recurring</a>
                          </li>
                          <li>
                            <a href="#delete-a-recurring" class="toc-h3 toc-link" data-title="Delete a recurring">Delete a recurring</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#payments" class="toc-h2 toc-link" data-title="Payments">Payments</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#create-a-payment" class="toc-h3 toc-link" data-title="Create a payment">Create a payment</a>
                          </li>
                          <li>
                            <a href="#retrieve-get-all-payments-on-an-invoice-or-expense" class="toc-h3 toc-link" data-title="Retrieve: Get all payments on an invoice or expense">Retrieve: Get all payments on an invoice or expense</a>
                          </li>
                          <li>
                            <a href="#retrieve-get-a-single-payment-on-an-invoice-or-expense" class="toc-h3 toc-link" data-title="Retrieve: Get a single payment on an invoice or expense">Retrieve: Get a single payment on an invoice or expense</a>
                          </li>
                          <li>
                            <a href="#delete-a-payment" class="toc-h3 toc-link" data-title="Delete a payment">Delete a payment</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#checkout" class="toc-h1 toc-link" data-title="CHECKOUT">CHECKOUT</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#sessions" class="toc-h2 toc-link" data-title="Sessions">Sessions</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#the-session-object" class="toc-h3 toc-link" data-title="The session object">The session object</a>
                          </li>
                          <li>
                            <a href="#the-customer-object" class="toc-h3 toc-link" data-title="The customer object">The customer object</a>
                          </li>
                          <li>
                            <a href="#the-item-object" class="toc-h3 toc-link" data-title="The item object">The item object</a>
                          </li>
                          <li>
                            <a href="#create-a-session" class="toc-h3 toc-link" data-title="Create a session">Create a session</a>
                          </li>
                          <li>
                            <a href="#retrieve-a-session" class="toc-h3 toc-link" data-title="Retrieve a session">Retrieve a session</a>
                          </li>
                          <li>
                            <a href="#update-a-session" class="toc-h3 toc-link" data-title="Update a session">Update a session</a>
                          </li>
                          <li>
                            <a href="#delete-a-session" class="toc-h3 toc-link" data-title="Delete a session">Delete a session</a>
                          </li>
                          <li>
                            <a href="#list-all-sessions" class="toc-h3 toc-link" data-title="List all sessions">List all sessions</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#webhooks" class="toc-h1 toc-link" data-title="WEBHOOKS">WEBHOOKS</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#webhooks-endpoints" class="toc-h2 toc-link" data-title="Webhooks endpoints">Webhooks endpoints</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#create-a-webhook" class="toc-h3 toc-link" data-title="Create a webhook">Create a webhook</a>
                          </li>
                          <li>
                            <a href="#retrieve-get-all-webhooks" class="toc-h3 toc-link" data-title="Retrieve: Get all webhooks">Retrieve: Get all webhooks</a>
                          </li>
                          <li>
                            <a href="#retrieve-get-a-single-webhook" class="toc-h3 toc-link" data-title="Retrieve: Get a single webhook">Retrieve: Get a single webhook</a>
                          </li>
                          <li>
                            <a href="#update-a-webhook" class="toc-h3 toc-link" data-title="Update a webhook">Update a webhook</a>
                          </li>
                          <li>
                            <a href="#delete-a-webhook" class="toc-h3 toc-link" data-title="Delete a webhook">Delete a webhook</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href="https://quaderno.io" target="_blank">Quaderno Homepage</a></li>
            <li><a href="https://support.quaderno.io" target="_blank">Knowledgebase and Support</a></li>
            <li><a href="https://github.com/quaderno/quaderno-api" target="_blank">Contributing to API Docs</a></li>
            <li><a href="https://github.com/tripit/slate" target="_blank">Documentation Powered by Slate</a><br /><br /></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>

<blockquote>
<p>BASE URL</p>
</blockquote>

<div class="highlight"><pre class="highlight plaintext"><code>https://ACCOUNT_NAME.quadernoapp.com/api/
</code></pre></div>

<p>Welcome to the Quaderno API! You can use our API to access all our features, designed around the idea of making tax management and invoicing easy for small businesses.</p>

<p>The Quaderno API is based on the <a href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a> architectural style, and comprised of resources with predictable, human-readable and resource-oriented URLs. We make use of standard HTTP features (HTTP Authentication, Verbs, and Response Codes), understandable by any off-the-shelf HTTP client. We return <a href="http://www.json.org/">JSON</a> for everything (including errors!), and expect to receive JSON for all <code>POST</code> and <code>PUT</code> requests.</p>

<p>We have language bindings for the Shell, <a href="https://github.com/quaderno/quaderno-ruby">Ruby</a>, and <a href="https://github.com/quaderno/quaderno-php">PHP</a>. You can view code examples in the dark area to the right, and you can switch the programming language of the examples with the tabs in the top-right.</p>

<p>If you have any suggestions, tips, or questions that you feel aren&#39;t answered here or in our <a href="http://support.quaderno.io">Knowledge Base</a>, please <a href="mailto:support@quaderno.io">get in touch</a> and let us know!</p>

<h1 id='the-sandbox'>The Sandbox</h1>

<p>The Quaderno Sandbox mirrors the features found on the Quaderno Production servers and lets you test our API.</p>

<p>The Sandbox has parity with the Quaderno main feature set supported by the live environment. This means you can test your Quaderno processes and know they will behave the same on the production servers as they do in the Sandbox environment.</p>

<p><strong>Your credentials for the Production environment does not work on the Sandbox.</strong> You need to <a href="https://sandbox-quadernoapp.com/signup">create a new account</a>.</p>

<p>By using your Sandbox account, you can test and debug your application without referencing any real Quaderno users or their live Quaderno accounts. The Sandbox lets you operate your application in a safe environment and provides you a way to fine tune your Quaderno routines before moving your product into production.</p>

<h1 id='authentication'>Authentication</h1>

<blockquote>
<p>To authorize, use this code:</p>
</blockquote>

<div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Base</span><span class="p">.</span><span class="nf">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
    <span class="n">config</span><span class="p">.</span><span class="nf">auth_token</span> <span class="o">=</span> <span class="s1">'YOUR_API_KEY'</span>
    <span class="n">config</span><span class="p">.</span><span class="nf">url</span> <span class="o">=</span> <span class="s1">'YOUR_API_URL'</span>
<span class="k">end</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="k">require_once</span> <span class="s1">'quaderno_load.php'</span><span class="p">;</span>

<span class="nx">QuadernoBase</span><span class="o">::</span><span class="na">init</span><span class="p">(</span><span class="s1">'YOUR_API_KEY'</span><span class="p">,</span>
                   <span class="s1">'YOUR_API_URL'</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code># With curl, you can pass the API key as a header with each request
curl -u YOUR_API_KEY:x \
     -X GET \
     'https://ACCOUNT_NAME.quadernoapp.com/api/invoices.json'
</code></pre></div>

<blockquote>
<p>You can <code>ping</code> to check if the service is up, your credentials are correct, or to know your remaining requests without doing an actual request:</p>
</blockquote>

<div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Base</span><span class="p">.</span><span class="nf">ping</span> <span class="c1">#=&gt; Boolean</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>curl -u YOUR_API_KEY:x \
     -X GET \
     'https://quadernoapp.com/api/ping.json'
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nx">QuadernoBase</span><span class="o">::</span><span class="na">ping</span><span class="p">();</span>   <span class="c1">// Returns true (success) or false (error)</span>
</code></pre></div>

<p>Quaderno uses an API key to authorise all requests, allowing access to the API in combination with the account name in the endpoint URL. For more info on finding your API key, check <a href="http://support.quaderno.io/article/101-how-do-i-get-my-api-key">here</a>.</p>

<p>Quaderno expects the API key to be included via HTTP Basic Auth in all API requests to the server, in a header that looks like the following:</p>

<p><code>-u YOUR_API_KEY:x</code></p>

<aside class="notice">
You must replace YOUR_API_KEY with your personal API key.
No password is required.
</aside>

<aside class="warning">
Remember that anyone who has your Private Key can see and change everything that you have access to. Make sure to keep it, and your password, safe.
</aside>

<h1 id='authorization'>Authorization</h1><div class="highlight"><pre class="highlight plaintext"><code>curl -u YOUR_API_KEY:x \
     -X GET \
     'https://quadernoapp.com/api/authorization.json'
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Base</span><span class="p">.</span><span class="nf">authorization</span> <span class="s1">'my_authenticate_token'</span><span class="p">,</span> <span class="n">environment</span>
<span class="c1"># environment is an optional argument. By passing :sandbox,</span>
<span class="c1"># you will retrieve your credentials for the sandbox</span>
<span class="c1"># environment and not for production.</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code></code></pre></div>
<blockquote>
<p>Returns:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"999"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sheldon Cooper"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"s.cooperphd@yahoo.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://nippur-999.quadernoapp.com/api/"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>If you don&#39;t know the <code>ACCOUNT_NAME</code> for your target account, you can get it with the <code>authorization</code> API call.</p>

<p>This returns the following as a JSON payload:</p>

<table><thead>
<tr>
<th><strong>Attribute</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>An identity, which is <em>not</em> used for determining who this user is within Quaderno. The <code>id</code> field should therefore <em>not</em> be used for submitting data within Quaderno&#39;s API.</td>
</tr>
<tr>
<td><code>name</code></td>
<td>The user&#39;s full name.</td>
</tr>
<tr>
<td><code>email</code></td>
<td>The user&#39;s email address.</td>
</tr>
<tr>
<td><code>href</code></td>
<td>The custom API endpoint URL for the user, providing the sought-after <code>ACCOUNT_NAME</code> between <code>http://</code> and <code>.quadernoapp...</code>.</td>
</tr>
</tbody></table>

<aside class="notice">
Note that in all cases, if the user does not have permission to do something, you'll get a 401 Unauthorized error.
</aside>
<h1 id='rate-limiting'>Rate Limiting</h1>

<blockquote>
<p>To make it easier to determine if your application is being rate-limited, or is approaching that level, we have the following HTTP headers on our successful responses:</p>
</blockquote>

<div class="highlight"><pre class="highlight plaintext"><code>X-RateLimit-Reset
X-RateLimit-Remaining
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Base</span><span class="p">.</span><span class="nf">rate_limit_info</span> <span class="c1">#=&gt;  {:reset=&gt;4, :remaining=&gt;0}</span>
</code></pre></div>

<p>There is a limit of <strong>100 API calls per 15 seconds</strong>.</p>

<p>We reserve the right to tune the limitations, but we promise to keep them high enough to allow a well-behaving interactive app to do it&#39;s job.</p>

<p>If you exceed the limit you will receive a <code>HTTP 429 (Too Many Requests)</code>.</p>

<h1 id='pagination'>Pagination</h1>

<blockquote>
<p>These HTTP headers inform you about the page context:</p>
</blockquote>

<div class="highlight"><pre class="highlight plaintext"><code>X-Pages-CurrentPage
X-Pages-TotalPages
</code></pre></div>

<blockquote>
<p>A call with the <code>page</code> parameter set:</p>
</blockquote>

<div class="highlight"><pre class="highlight plaintext"><code>curl -u YOUR_API_KEY:x \
     -X GET \
     'https://ACCOUNT_NAME.quadernoapp.com/api/contacts.json?page=2'
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="c1">// Returns an array of QuadernoContact</span>
<span class="nv">$contacts</span> <span class="o">=</span> <span class="nx">QuadernoContact</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'page'</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">));</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Contact</span><span class="p">.</span><span class="nf">all</span><span class="p">(</span><span class="ss">page: </span><span class="mi">1</span><span class="p">)</span> <span class="c1">#=&gt; Array</span>
</code></pre></div>

<p>Bear in mind that Quaderno paginates <code>GET</code> index results.</p>

<p>You can change the number of objects to be returned with the <code>limit</code> parameter, defaulting to <code>25</code>. </p>

<p>You can change the page by passing the <code>page</code> parameter, defaulting to <code>1</code>.</p>

<h1 id='errors'>Errors</h1>

<p>We don&#39;t usually have any trouble on our end, but when we do we&#39;ll let you know!</p>

<p>The Quaderno API uses the following error codes:</p>

<table><thead>
<tr>
<th>Code</th>
<th>Text</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>400</code></td>
<td><code>Bad Request</code></td>
<td>Your request may be malformed</td>
</tr>
<tr>
<td><code>401</code></td>
<td><code>Unauthorized</code></td>
<td>Your API key is wrong, or your user does not have access to this resource</td>
</tr>
<tr>
<td><code>403</code></td>
<td><code>Forbidden</code></td>
<td>The record requested is hidden for administrators only</td>
</tr>
<tr>
<td><code>404</code></td>
<td><code>Not Found</code></td>
<td>The specified record could not be found</td>
</tr>
<tr>
<td><code>405</code></td>
<td><code>Method Not Allowed</code></td>
<td>You tried to access a record with an invalid method</td>
</tr>
<tr>
<td><code>406</code></td>
<td><code>Not Acceptable</code></td>
<td>You requested a format that isn&#39;t JSON</td>
</tr>
<tr>
<td><code>410</code></td>
<td><code>Gone</code></td>
<td>The record requested has been removed from our servers</td>
</tr>
<tr>
<td><code>422</code></td>
<td><code>Unprocessable Entity</code></td>
<td>The requested method cannot process for the record in question</td>
</tr>
<tr>
<td><code>429</code></td>
<td><code>Too Many Requests</code></td>
<td>You&#39;re requesting too many records! Slow down!</td>
</tr>
<tr>
<td><code>500</code></td>
<td><code>Internal Server Error</code></td>
<td>We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td><code>502</code></td>
<td><code>Bad Gateway</code></td>
<td>We had a different problem with our server. Try again later.</td>
</tr>
<tr>
<td><code>503</code></td>
<td><code>Service Unavailable</code></td>
<td>We&#39;re temporarily offline for maintenance, or you&#39;ve exceeded the <a href="#rate-limiting">rate limit</a>. Please try again later.</td>
</tr>
<tr>
<td><code>504</code></td>
<td><code>Gateway Timeout</code></td>
<td>Yep, you guessed it. We&#39;ll be back soon!</td>
</tr>
</tbody></table>

<aside class="warning">
Note that when API errors occur, it is up to you to retry your request - Quaderno does not keep track of failed calls.<br /><br />

<p>If an error occurs on a call where the service is not down, we will return a JSON response and an error code that we hope will point you to the problem with your call.</p>
</aside>

<h1 id='versioning'>Versioning</h1>

<p>When we make breaking changes to our API, we release a new version number which you can change in your calls.
By default if you don&#39;t specify a version, we&#39;ll use the one stored in your Quaderno account. To override this value you can pass the version in the <code>Accept</code> HTTP header like this: <code>Accept: application/json; api_version=API_VERSION_NUMBER</code></p>

<div class="highlight"><pre class="highlight plaintext"><code># Example of API version override

curl -u YOUR_API_KEY:x \
     -H 'Accept: application/json; api_version=20160602' \
     -X GET \
     'https://ACCOUNT_NAME.quadernoapp.com/api/contacts.json?page=2'
</code></pre></div>

<aside class="notice">
The current version is <strong>20170914</strong>.
Please refer to the <strong><a href='#changelog'>changelog</a></strong> to get a list of the changes
</aside>
<h1 id='core-resources'>CORE RESOURCES</h1>
<h2 id='contacts'>Contacts</h2>

<p>A contact is any customer or vendor who appears on your invoices, credit notes, and expenses.</p>

<h3 id='the-contact-object'>The contact object</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>integer</td>
<td>Unique identifier for the object.</td>
</tr>
<tr>
<td><code>kind</code></td>
<td>string</td>
<td>The type of contact. Values are `<code>company</code> or <code>person</code>. Defaults to <code>company</code>.</td>
</tr>
<tr>
<td><code>first_name</code></td>
<td>string</td>
<td>The contact&#39;s first name. <strong>Required</strong></td>
</tr>
<tr>
<td><code>last_name</code></td>
<td>string</td>
<td>The contact&#39;s last name. Empty when the contact is a <code>company</code>.</td>
</tr>
<tr>
<td><code>tax_id</code></td>
<td>string</td>
<td>Any tax identification number. Quaderno can validate EU VAT numbers, ABN, and NZBN.</td>
</tr>
<tr>
<td><code>contact_person</code></td>
<td>string</td>
<td>If the contact is a <code>company</code>, this is its contact person.</td>
</tr>
<tr>
<td><code>street_line_1</code></td>
<td>string</td>
<td>Address line 1 (Street address/PO Box).</td>
</tr>
<tr>
<td><code>street_line_2</code></td>
<td>string</td>
<td>Address line 2 (Apartment/Suite/Unit/Building).</td>
</tr>
<tr>
<td><code>city</code></td>
<td>string</td>
<td>City/District/Suburb/Town/Village.</td>
</tr>
<tr>
<td><code>postal_code</code></td>
<td>string</td>
<td>ZIP or postal code.</td>
</tr>
<tr>
<td><code>region</code></td>
<td>string</td>
<td>Region, province or state.</td>
</tr>
<tr>
<td><code>country</code></td>
<td>string</td>
<td>2-letter country code.</td>
</tr>
<tr>
<td><code>phone_1</code></td>
<td>string</td>
<td>The contact&#39;s phone number.</td>
</tr>
<tr>
<td><code>email</code></td>
<td>string</td>
<td>The contact&#39;s email address. Multiple emails should be separated by commas. Maximum number of addresses allowed is 3.</td>
</tr>
<tr>
<td><code>web</code></td>
<td>string</td>
<td>The contact&#39;s website. Validates format</td>
</tr>
<tr>
<td><code>discount</code></td>
<td>decimal</td>
<td>Default discount for this contact.</td>
</tr>
<tr>
<td><code>language</code></td>
<td>string</td>
<td>The contact&#39;s preferred language. Should be included in the translations list</td>
</tr>
<tr>
<td><code>notes</code></td>
<td>string</td>
<td>Internal notes about the contact.</td>
</tr>
</tbody></table>

<h3 id='create-a-contact'>Create a contact</h3>

<blockquote>
<p><code>POST /contacts.json</code></p>
</blockquote>

<div class="highlight"><pre class="highlight plaintext"><code>curl -u YOUR_API_KEY:x \
     -H 'Content-Type: application/json' \
     -X POST \
     -d '{"first_name":"Tony", "kind":"person", "contact_name":"Stark"}' \
     'https://ACCOUNT_NAME.quadernoapp.com/api/contacts.json'
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Contact</span><span class="p">.</span><span class="nf">create</span><span class="p">({</span>
    <span class="ss">first_name: </span><span class="s1">'Tony'</span><span class="p">,</span>
    <span class="ss">kind: </span><span class="s1">'person'</span><span class="p">,</span>
    <span class="ss">contact_name: </span><span class="s1">'Stark'</span>
<span class="p">})</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$contact</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">QuadernoContact</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
                                 <span class="s1">'first_name'</span> <span class="o">=&gt;</span> <span class="s1">'Tony'</span><span class="p">,</span>
                                 <span class="s1">'kind'</span> <span class="o">=&gt;</span> <span class="s1">'person'</span><span class="p">,</span>
                                 <span class="s1">'contact_name'</span> <span class="o">=&gt;</span> <span class="s1">'Stark'</span><span class="p">));</span>
<span class="nv">$contact</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span> <span class="c1">// Returns true (success) or false (error)</span>
</code></pre></div>

<p><code>POST</code>ing to <code>/contacts.json</code> will create a new contact from the parameters passed.</p>

<p>This will return <code>201 Created</code> and the current JSON representation of the contact if the creation was a success, along with the location of the new contact in the <code>url</code> field.</p>

<h3 id='update-a-contact'>Update a contact</h3>

<blockquote>
<p><code>PUT /contacts/CONTACT_ID.json</code></p>
</blockquote>

<div class="highlight"><pre class="highlight plaintext"><code>curl -u YOUR_API_KEY:x \
     -H 'Content-Type: application/json' \
     -X PUT \
     -d '{"first_name":"Anthony"}' \
     'https://ACCOUNT_NAME.quadernoapp.com/api/contacts/CONTACT_ID.json'
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Contact</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span>
    <span class="no">CONTACT_ID</span><span class="p">,</span> 
    <span class="p">{</span>
        <span class="ss">first_name: </span><span class="s1">'Mary'</span><span class="p">,</span>
        <span class="ss">last_name: </span><span class="s1">'Smith'</span>
    <span class="p">}</span>
<span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$contact</span><span class="o">-&gt;</span><span class="na">first_name</span> <span class="o">=</span> <span class="s1">'Anthony'</span><span class="p">;</span>
<span class="nv">$contact</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
</code></pre></div>

<p><code>PUT</code>ing to <code>/contacts/CONTACT_ID.json</code> will update the contact from the passed parameters.</p>

<p>This will return <code>200 OK</code> and a JSON representation of the contact if successful.</p>

<h3 id='delete-a-contact'>Delete a contact</h3>

<blockquote>
<p><code>DELETE /contacts/CONTACT_ID.json</code></p>
</blockquote>

<div class="highlight"><pre class="highlight plaintext"><code>curl -u YOUR_API_KEY:x \
     -X DELETE
     'https://ACCOUNT_NAME.quadernoapp.com/api/contacts/CONTACT_ID.json'
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Contact</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="no">CONTACT_ID</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$contact</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">();</span>
</code></pre></div>

<p><code>DELETE</code>ing to <code>/contacts/CONTACT_ID.json</code> will delete the specified contact and returns <code>204 No Content</code> if successful.</p>

<h3 id='retrieve-a-contact'>Retrieve a contact</h3>

<blockquote>
<p><code>GET /contacts/CONTACT_ID.json</code></p>
</blockquote>

<div class="highlight"><pre class="highlight plaintext"><code>curl -u YOUR_API_KEY:x \
     -X GET 'https://ACCOUNT_NAME.quadernoapp.com/api/contacts/CONTACT_ID.json'
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Contact</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="no">CONTACT_ID</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$contact</span> <span class="o">=</span> <span class="nx">QuadernoContact</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="nx">CONTACT_ID</span><span class="p">);</span> <span class="c1">// Returns a QuadernoContact</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"456987213"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"kind"</span><span class="p">:</span><span class="s2">"person"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first_name"</span><span class="p">:</span><span class="s2">"Sheldon"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_name"</span><span class="p">:</span><span class="s2">"Cooper"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"full_name"</span><span class="p">:</span><span class="s2">"Sheldon Cooper"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"street_line_1"</span><span class="p">:</span><span class="s2">"2311 N. Los Robles Avenue"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"street_line_2"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="s2">"91104"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"city"</span><span class="p">:</span><span class="s2">"Pasadena"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"region"</span><span class="p">:</span><span class="s2">"CA"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"phone_1"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="s2">"s.cooperphd@yahoo.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"web"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"discount"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tax_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"language"</span><span class="p">:</span><span class="s2">"EN"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"notes"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"secure_id"</span><span class="p">:</span><span class="s2">"th3p3rm4l1nk"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"permalink"</span><span class="p">:</span><span class="s2">"https://ACCOUNT_NAME.quadernoapp.com/billing/th3p3rm4l1nk"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://ACCOUNT_NAME.quadernoapp.com/api/contacts/456987213"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>

<p><code>GET</code>ting from <code>/contacts/CONTACT_ID.json</code> will get you that specific contact.</p>

<aside class="notice">
If you've connected Quaderno and Stripe, you can also `GET /stripe/customers/STRIPE_CUSTOMER_ID.json` to get the Quaderno contact for a Stripe customer.
</aside>

<h3 id='retrieve-a-contact-by-processor-id'>Retrieve a contact by processor ID</h3>

<blockquote>
<p><code>GET /PAYMENT_GATEWAY/customers/PAYMENT_GATEWAY_CUSTOMER_ID.json</code></p>
</blockquote>

<div class="highlight"><pre class="highlight plaintext"><code>curl -u YOUR_API_KEY:x \
     -X GET 'https://ACCOUNT_NAME.quadernoapp.com/api/PAYMENT_GATEWAY/customers/PAYMENT_GATEWAY_CUSTOMER_ID.json'
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Contact</span><span class="p">.</span><span class="nf">retrieve_customer</span><span class="p">(</span><span class="no">STRIPE_CUSTOMER_ID</span><span class="p">,</span> <span class="s1">'stripe'</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code></code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"456987213"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"kind"</span><span class="p">:</span><span class="s2">"person"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first_name"</span><span class="p">:</span><span class="s2">"Sheldon"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_name"</span><span class="p">:</span><span class="s2">"Cooper"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"full_name"</span><span class="p">:</span><span class="s2">"Sheldon Cooper"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"street_line_1"</span><span class="p">:</span><span class="s2">"2311 N. Los Robles Avenue"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"street_line_2"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="s2">"91104"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"city"</span><span class="p">:</span><span class="s2">"Pasadena"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"region"</span><span class="p">:</span><span class="s2">"CA"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"phone_1"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="s2">"s.cooperphd@yahoo.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"web"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"discount"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tax_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"language"</span><span class="p">:</span><span class="s2">"EN"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"notes"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"secure_id"</span><span class="p">:</span><span class="s2">"th3p3rm4l1nk"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"permalink"</span><span class="p">:</span><span class="s2">"https://ACCOUNT_NAME.quadernoapp.com/billing/th3p3rm4l1nk"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://ACCOUNT_NAME.quadernoapp.com/api/contacts/456987213"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>

<p><code>GET</code>ting from <code>/PAYMENT_GATEWAY/customers/PAYMENT_GATEWAY_CUSTOMER_ID.json</code> will get you that specific contact by using their ID with the payment gateway they were created with.</p>

<p>Supported gateways:</p>

<ul>
<li><a href="https://stripe.com/">Stripe</a></li>
<li><a href="https://gocardless.com/">GoCardless</a></li>
<li><a href="https://www.paypal.com">PayPal</a></li>
<li><a href="https://www.braintreepayments.com/">Braintree</a></li>
</ul>

<p>More are added frequently, so check back!</p>

<h3 id='list-all-contacts'>List all contacts</h3>

<blockquote>
<p><code>GET /contacts.json</code></p>
</blockquote>

<div class="highlight"><pre class="highlight plaintext"><code>curl -u YOUR_API_KEY:x \
     -X GET 'https://ACCOUNT_NAME.quadernoapp.com/api/contacts.json'
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Contact</span><span class="p">.</span><span class="nf">all</span><span class="p">()</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$contacts</span> <span class="o">=</span> <span class="nx">QuadernoContact</span><span class="o">::</span><span class="na">find</span><span class="p">();</span> <span class="c1">// Returns an array of QuadernoContact</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"456987213"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"kind"</span><span class="p">:</span><span class="s2">"person"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first_name"</span><span class="p">:</span><span class="s2">"Sheldon"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_name"</span><span class="p">:</span><span class="s2">"Cooper"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"full_name"</span><span class="p">:</span><span class="s2">"Sheldon Cooper"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"street_line_1"</span><span class="p">:</span><span class="s2">"2311 N. Los Robles Avenue"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"street_line_2"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="s2">"91104"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"city"</span><span class="p">:</span><span class="s2">"Pasadena"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"region"</span><span class="p">:</span><span class="s2">"CA"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"phone_1"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="s2">"s.cooperphd@yahoo.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"web"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"discount"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tax_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"language"</span><span class="p">:</span><span class="s2">"EN"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"notes"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"secure_id"</span><span class="p">:</span><span class="s2">"th3p3rm4l1nk"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"permalink"</span><span class="p">:</span><span class="s2">"https://ACCOUNT_NAME.quadernoapp.com/billing/th3p3rm4l1nk"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://ACCOUNT_NAME.quadernoapp.com/api/contacts/456987213"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"456982365"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"kind"</span><span class="p">:</span><span class="s2">"company"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"full_name"</span><span class="p">:</span><span class="s2">"Apple Inc."</span><span class="p">,</span><span class="w">
    </span><span class="nl">"street_line_1"</span><span class="p">:</span><span class="s2">"1 Infinite Loop"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"street_line_2"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="s2">"95014"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"city"</span><span class="p">:</span><span class="s2">"Cupertino"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"region"</span><span class="p">:</span><span class="s2">"CA"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"phone_1"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="s2">"info@apple.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"web"</span><span class="p">:</span><span class="s2">"http://apple.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"discount"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tax_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"language"</span><span class="p">:</span><span class="s2">"EN"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"notes"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"secure_id"</span><span class="p">:</span><span class="s2">"4n0th3rp3rm4l1nk"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"permalink"</span><span class="p">:</span><span class="s2">"https://ACCOUNT_NAME.quadernoapp.com/billing/4n0th3rp3rm4l1nk"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://ACCOUNT_NAME.quadernoapp.com/api/contacts/456982365"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>

<p><code>GET</code>ting from <code>/contacts.json</code> will return all the user&#39;s contacts.</p>

<p>You can filter the results by full name, email or tax ID by passing the <code>q</code> parameter in the URL as a query string, like <code>?q=KEYWORD</code>.</p>

<h2 id='events'>Events</h2>

<p>Quaderno allows your application to receive information about events that happen on your documents as they occur.</p>

<h3 id='data-format'>Data Format</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event_type"</span><span class="p">:</span><span class="s2">"invoice.created"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"object"</span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">925</span><span class="p">,</span><span class="w">
      </span><span class="nl">"contact_id"</span><span class="p">:</span><span class="mi">128</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tag_list"</span><span class="p">:[],</span><span class="w">
      </span><span class="nl">"number"</span><span class="p">:</span><span class="s2">"123346"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"issue_date"</span><span class="p">:</span><span class="s2">"2016-02-12"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"contact_name"</span><span class="p">:</span><span class="s2">"OrsonFarm"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"contact"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"first_name"</span><span class="p">:</span><span class="s2">"OrsonFarm"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last_name"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"email"</span><span class="p">:</span><span class="s2">"orso@farm.com"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"contact_person"</span><span class="p">:</span><span class="s2">"Orson Welles"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"gross_amount_cents"</span><span class="p">:</span><span class="mi">826</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_cents"</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount_paid_cents"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"po_number"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"notes"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"outstanding"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"subject"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"street_line_1"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"street_line_2"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"city"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"region"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"country"</span><span class="p">:</span><span class="s2">"ES"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"processor_id"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"processor"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"processor_fee_cents"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"custom_metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"my_custom_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"due_date"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"permalink"</span><span class="p">:</span><span class="s2">"5191567e45d6aa419927ce7a8ba2ee870c9f0a45"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"email"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"gross_amount"</span><span class="p">:</span><span class="s2">"8.26"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total"</span><span class="p">:</span><span class="s2">"10.00"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount_paid"</span><span class="p">:</span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:</span><span class="w">
      </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">1056</span><span class="p">,</span><span class="w">
          </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"Test item acces token"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"quantity"</span><span class="p">:</span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"unit_price"</span><span class="p">:</span><span class="s2">"8.26"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"discount_rate"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"tax_1_amount_cents"</span><span class="p">:</span><span class="mi">174</span><span class="p">,</span><span class="w">
          </span><span class="nl">"tax_1_name"</span><span class="p">:</span><span class="s2">"IVA"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"tax_1_rate"</span><span class="p">:</span><span class="mf">21.0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"tax_1_country"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nl">"tax_2_amount_cents"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"tax_2_name"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nl">"tax_2_rate"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nl">"tax_2_country"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"826.0"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"total_amount_cents"</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span><span class="w">
          </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"taxes_included"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"reference"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nl">"tax_1_amount"</span><span class="p">:</span><span class="s2">"1.74"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"tax_2_amount"</span><span class="p">:</span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"unit_price_cents"</span><span class="p">:</span><span class="s2">"826.00"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"discount"</span><span class="p">:</span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"subtotal"</span><span class="p">:</span><span class="s2">"8.26"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"total_amount"</span><span class="p">:</span><span class="s2">"10.00"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"payments"</span><span class="p">:[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="nl">"event_type"</span><span class="p">:</span><span class="s2">"contact.updated"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"object"</span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">76</span><span class="p">,</span><span class="w">
      </span><span class="nl">"kind"</span><span class="p">:</span><span class="s2">"person"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"first_name"</span><span class="p">:</span><span class="s2">"Adella"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_name"</span><span class="p">:</span><span class="s2">"Schowalter"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"full_name"</span><span class="p">:</span><span class="s2">"Adella Schowalter"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"contact_name"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"street_line_1"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"street_line_2"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"city"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"region"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"country"</span><span class="p">:</span><span class="s2">"DE"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"phone_1"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"email"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"web"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"discount"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"language"</span><span class="p">:</span><span class="s2">"EN"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax_id"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"notes"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"processor_id"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"processor"</span><span class="p">:</span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="nl">"event_type"</span><span class="p">:</span><span class="s2">"payment.created"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"object"</span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">15</span><span class="p">,</span><span class="w">
      </span><span class="nl">"document_id"</span><span class="p">:</span><span class="mi">815</span><span class="p">,</span><span class="w">
      </span><span class="nl">"date"</span><span class="p">:</span><span class="s2">"2015-09-22"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="s2">"credit_card"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount_cents"</span><span class="p">:</span><span class="mi">400</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"4.00"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="nl">"event_type"</span><span class="p">:</span><span class="s2">"checkout.succeeded"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"object"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"transaction_details"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"session"</span><span class="p">:</span><span class="mi">43</span><span class="p">,</span><span class="w">
        </span><span class="nl">"session_permalink"</span><span class="p">:</span><span class="s2">"https://demo.quadernoapp.com/checkout/session/8ccf3fdc42b85800188b113b81d3e4212ef094b3"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"gateway"</span><span class="p">:</span><span class="s2">"stripe"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"charge"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"Unicorn"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"customer"</span><span class="p">:</span><span class="s2">"cus_FXesSyaK3CG8Oz"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"email"</span><span class="p">:</span><span class="s2">"john@doe.com"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"transaction"</span><span class="p">:</span><span class="s2">"pi_1F2ZYtEjVHvINKlcq2as8H5V"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"product_id"</span><span class="p">:</span><span class="s2">"prod_61ffa845b4a0b8"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_name"</span><span class="p">:</span><span class="s2">"VAT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_rate"</span><span class="p">:</span><span class="mf">20.0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"extra_tax_name"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"extra_tax_rate"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"iat"</span><span class="p">:</span><span class="mi">1564647784</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount_cents"</span><span class="p">:</span><span class="mi">1500</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"15.00"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"EUR"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"contact"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">547540</span><span class="p">,</span><span class="w">
        </span><span class="nl">"kind"</span><span class="p">:</span><span class="s2">"company"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"first_name"</span><span class="p">:</span><span class="s2">"John "</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last_name"</span><span class="p">:</span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"full_name"</span><span class="p">:</span><span class="s2">"John  Doe"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"contact_name"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"street_line_1"</span><span class="p">:</span><span class="s2">"Fake Street 1"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="s2">"SW15 5PU"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"city"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"region"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"country"</span><span class="p">:</span><span class="s2">"GB"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"email"</span><span class="p">:</span><span class="s2">"john@doe.com"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"web"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"language"</span><span class="p">:</span><span class="s2">"EN"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_id"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
 </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="nl">"event_type"</span><span class="p">:</span><span class="s2">"checkout.failed"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"object"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"message"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"response_message"</span><span class="p">:</span><span class="s2">"Insufficient funds"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"status_code"</span><span class="p">:</span><span class="mi">422</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"transaction_details"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"gateway"</span><span class="p">:</span><span class="s2">"stripe"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"charge"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"Unicorn"</span><span class="p">,</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"contact"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">547540</span><span class="p">,</span><span class="w">
        </span><span class="nl">"kind"</span><span class="p">:</span><span class="s2">"company"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"first_name"</span><span class="p">:</span><span class="s2">"John "</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last_name"</span><span class="p">:</span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"full_name"</span><span class="p">:</span><span class="s2">"John  Doe"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"contact_name"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"street_line_1"</span><span class="p">:</span><span class="s2">"Fake Street 1"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="s2">"SW15 5PU"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"city"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"region"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"country"</span><span class="p">:</span><span class="s2">"GB"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"email"</span><span class="p">:</span><span class="s2">"john@doe.com"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"web"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"language"</span><span class="p">:</span><span class="s2">"EN"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_id"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="nl">"event_type"</span><span class="p">:</span><span class="s2">"checkout.abandoned"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"object"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"transaction_details"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"Unicorn"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"plan"</span><span class="p">:</span><span class="s2">"awesome"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"contact"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"first_name"</span><span class="p">:</span><span class="s2">"John "</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last_name"</span><span class="p">:</span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"city"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"country"</span><span class="p">:</span><span class="s2">"GB"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"email"</span><span class="p">:</span><span class="s2">"john@doe.com"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Every webhook uses the same format for its data, regardless of event type. The webhooks take the form of a standard <code>POST</code>, with a hash using the following paramaters:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>event_type</code></td>
<td>The event which triggered the webhook (<code>invoice.created</code>, <code>estimate.updated</code>, <code>contact.deleted</code>, etc).</td>
</tr>
<tr>
<td><code>data</code></td>
<td>A simplified JSON representation of the object.</td>
</tr>
</tbody></table>
<h3 id='event-types'>Event Types</h3>

<p>Event types are a combination of the object you want to be notified about and the object state.</p>

<p>Available events are:</p>

<ul>
<li><code>invoice.created</code>, <code>invoice.updated</code>, <code>invoice.deleted</code></li>
<li><code>receipt.created</code>, <code>receipt.updated</code>, <code>receipt.deleted</code></li>
<li><code>credit.created</code>, <code>credit.updated</code>, <code>credit.deleted</code></li>
<li><code>expense.created</code>, <code>expense.updated</code>, <code>expense.deleted</code></li>
<li><code>estimate.created</code>, <code>estimate.updated</code>, <code>estimate.deleted</code></li>
<li><code>payment.created</code>, <code>payment.deleted</code></li>
<li><code>contact.created</code>, <code>contact.updated</code>, <code>contact.deleted</code></li>
<li><code>checkout.succeeded</code>, <code>checkout.failed</code>, <code>checkout.abandoned</code></li>
</ul>

<p>For example, if you want to be notified whenever an invoice is created or deleted, you should subscribe to the events <code>invoice.created</code> and <code>invoice.deleted</code>.</p>

<h3 id='endpoint-errors'>Endpoint errors</h3>

<p>If your webhook-receiving endpoint does not respond with a <code>200</code> when Quaderno <code>POST</code>s the data, Quaderno will try again within 48 hours.</p>

<p>If you fail to respond a second time then your subscription to that webhook will be deleted.</p>

<aside class="notice">
We recommend responding with a status code between 200 and 299 (inclusive) so that Quaderno does not assume there is an error in your endpoint.
</aside>

<h3 id='verifying-webhook-requests'>Verifying webhook requests</h3>

<p>Quaderno signs webhook requests so that you can (optionally) verify that requests were generated by Quaderno and not by a third-party impersonating us.</p>

<h3 id='verify-request-signatures'>Verify request signatures</h3>

<p>Quaderno includes an additional HTTP header with webhook <code>POST</code> requests, <code>X-Quaderno-Signature</code>, which will contain the signature for the request.</p>

<p>To verify a request, generate a signature using the same key that Quaderno uses and compare that to the value of the <code>X-Quaderno-Signature</code> header.</p>

<h3 id='get-your-webhook-authentication-key'>Get your webhook authentication key</h3>

<p>When you create a webhook a key is automatically generated. If you&#39;re using <code>POST /webhooks.json</code> the key will be returned in the response.</p>

<p>To retrieve a webhook key via the Quaderno API, use <code>GET /webhooks.json</code> or <code>GET /webhooks/WEBHOOK_ID.json</code>.</p>

<h3 id='generate-a-signature'>Generate a signature</h3><div class="highlight"><pre class="highlight php tab-php"><code><span class="cd">/**
 * Generates a base64-encoded signature for a Quaderno webhook request.
 * @param string $webhook_key the webhook's authentication key
 * @param string $url the webhook url
 * @param array $body the request's POST parameters
 */</span>
<span class="k">function</span> <span class="nf">generateSignature</span><span class="p">(</span><span class="nv">$webhook_key</span><span class="p">,</span> <span class="nv">$url</span><span class="p">,</span> <span class="nv">$body</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$signed_data</span> <span class="o">=</span> <span class="nv">$url</span> <span class="o">.</span> <span class="nv">$body</span><span class="p">;</span>
    <span class="k">return</span> <span class="nb">base64_encode</span><span class="p">(</span><span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha1'</span><span class="p">,</span> <span class="nv">$signed_data</span><span class="p">,</span> <span class="nv">$webhook_key</span><span class="p">,</span> <span class="kc">true</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'openssl'</span>
<span class="nb">require</span> <span class="s1">'base64'</span>

<span class="c1"># Generates a base64-encoded signature for a Quaderno webhook request.</span>
<span class="c1">#@param string webhook_key the webhook's authentication key</span>
<span class="c1"># @param string url the webhook url</span>
<span class="c1"># @param array body the request's POST parameters</span>
<span class="k">def</span> <span class="nf">generateSignature</span><span class="p">(</span><span class="n">webhook_key</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
    <span class="n">signed_data</span> <span class="o">=</span> <span class="n">url</span> <span class="o">+</span> <span class="n">body</span>
    <span class="no">Base64</span><span class="p">.</span><span class="nf">encode64</span><span class="p">(</span><span class="no">OpenSSL</span><span class="o">::</span><span class="no">HMAC</span><span class="p">.</span><span class="nf">digest</span><span class="p">(</span><span class="s1">'sha1'</span><span class="p">,</span> <span class="n">webhook_key</span><span class="p">,</span> <span class="n">signed_data</span><span class="p">))</span>
<span class="k">end</span>
</code></pre></div>
<p>In your code that processes receieved webhooks:</p>

<ol>
<li>Create a string with the webhook&#39;s URL, exactly as you entered it in Quaderno (including any query string, if applicable). Quaderno always signs webhook requests with the exact URL you provided when you configured the webhook. A difference as small as including or removing a trailing slash will prevent the signature from validating.</li>
<li>Append the <code>POST</code> body to the URL string, with no delimiter. The body should be a JSON-encoded representation of the data.</li>
<li>Hash the resulting string with <code>HMAC-SHA1</code>, using your webhook&#39;s authentication key to generate a binary signature.</li>
<li>Base64 encode the binary signature.</li>
<li>Compare the binary signature that you generated to the signature provided in the <code>X-Quaderno-Signature</code> HTTP header.</li>
</ol>

<h2 id='evidence'>Evidence</h2>
<p>Location evidence are proofs of the customer&#39;s location that should be stored in order to be EU VAT MOSS compliant.</p>
<h3 id='the-evidence-object'>The evidence object</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>Evidence ID</td>
</tr>
<tr>
<td><code>document_id</code></td>
<td>Invoice or Receipt&#39;s ID</td>
</tr>
<tr>
<td><code>state</code></td>
<td>Customer&#39;s location evidence state (confirmed or unconfirmed)</td>
</tr>
<tr>
<td><code>billing_country</code></td>
<td>Customer&#39;s billing country (2-letter <a href="http://en.wikipedia.org/wiki/ISO_3166-1#Current_codes">ISO code</a>)</td>
</tr>
<tr>
<td><code>ip_address</code></td>
<td>Customer&#39;s IP address</td>
</tr>
<tr>
<td><code>ip_country</code></td>
<td>Customer&#39;s country geolocated by IP (2-letter <a href="http://en.wikipedia.org/wiki/ISO_3166-1#Current_codes">ISO code</a>)</td>
</tr>
<tr>
<td><code>bank_country</code></td>
<td>Customer&#39;s bank country</td>
</tr>
<tr>
<td><code>additional_evidence</code></td>
<td>Additional evidence to locate the customer</td>
</tr>
<tr>
<td><code>additional_evidence_country</code></td>
<td>Country of the aditional evidence (2-letter <a href="http://en.wikipedia.org/wiki/ISO_3166-1#Current_codes">ISO code</a>)</td>
</tr>
<tr>
<td><code>notes</code></td>
<td>Additional notes about the evidence</td>
</tr>
</tbody></table>

<h3 id='create-an-evidence'>Create an evidence</h3>

<blockquote>
<p><code>POST /evidence.json</code></p>
</blockquote>

<div class="highlight"><pre class="highlight plaintext"><code># body.json
{
  "document_id":"5059bdbf2f412e0901000024",
  "billing_country":"FR",
  "ip_address":"192.168.1.1",
  "bank_country":"FR"
}

curl -u YOUR_API_KEY:x \
     -H 'Content-Type: application/json' \
     -X POST \
     --data-binary @body.json \    
     'https://ACCOUNT_NAME.quadernoapp.com/api/evidence.json'
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$evidence</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">QuadernoEvidence</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
                                        <span class="s1">'document_id'</span> <span class="o">=&gt;</span> <span class="s1">'5059bdbf2f412e0901000024'</span><span class="p">,</span>
                                        <span class="s1">'billing_country'</span> <span class="o">=&gt;</span> <span class="s1">'FR'</span><span class="p">,</span>
                                        <span class="s1">'ip_address'</span> <span class="o">=&gt;</span> <span class="s1">'192.168.1.1'</span><span class="p">,</span>
                                        <span class="s1">'bank_country'</span> <span class="o">=&gt;</span> <span class="s1">'FR'</span><span class="p">));</span>

<span class="nv">$evidence</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span> <span class="c1">// Returns true (success) or false (error)</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">contact</span> <span class="o">=</span> <span class="no">Quaderno</span><span class="o">::</span><span class="no">Evidence</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span>
                                      <span class="ss">document_id: </span><span class="s1">'5059bdbf2f412e0901000024'</span><span class="p">,</span>
                                      <span class="ss">billing_country: </span><span class="s1">'FR'</span><span class="p">,</span>
                                      <span class="ss">ip_address: </span><span class="s1">'192.168.1.1'</span><span class="p">,</span>
                                      <span class="ss">bank_country: </span><span class="s1">'FR'</span><span class="p">))</span> <span class="c1">#=&gt; Quaderno::Evidence</span>

</code></pre></div>

<p><code>POST</code>ing to <code>/evidence.json</code> will create a new evidence from the parameters passed.</p>

<p>This will return 201 Created and the current JSON representation of the evidence if the creation was a success.</p>

<h4 id='attributes'>Attributes</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>document_id</code></td>
<td><strong>yes</strong></td>
<td>Invoice or Receipt&#39;s ID</td>
</tr>
<tr>
<td><code>billing_country</code></td>
<td>no</td>
<td>Customer&#39;s billing country (2-letter <a href="http://en.wikipedia.org/wiki/ISO_3166-1#Current_codes">ISO code</a>)</td>
</tr>
<tr>
<td><code>ip_address</code></td>
<td>no</td>
<td>Customer&#39;s IP address</td>
</tr>
<tr>
<td><code>bank_country</code></td>
<td>no</td>
<td>Customer&#39;s bank country (2-letter <a href="http://en.wikipedia.org/wiki/ISO_3166-1#Current_codes">ISO code</a>)</td>
</tr>
<tr>
<td><code>additional_evidence</code></td>
<td>no (yes if <code>additional_evidence_country</code> is passed)</td>
<td>An explanatory note about the additional evidence. Up to 255 chars.</td>
</tr>
<tr>
<td><code>additional_evidence_country</code></td>
<td>no (yes if <code>additional_evidence</code> is passed)</td>
<td>Additional evidence for the customer location (2-letter <a href="http://en.wikipedia.org/wiki/ISO_3166-1#Current_codes">ISO code</a>)</td>
</tr>
<tr>
<td><code>notes</code></td>
<td>no</td>
<td>Additional notes about the evidence</td>
</tr>
</tbody></table>

<h3 id='update-an-evidence'>Update an evidence</h3>

<blockquote>
<p><code>PUT /evidence/EVIDENCE_ID.json</code></p>
</blockquote>

<div class="highlight"><pre class="highlight plaintext"><code># body.json
{
  "billing_country":"FR",
  "ip_address":"192.168.1.1",
  "bank_country":"FR"
}

curl -u YOUR_API_KEY:x \
     -H 'Content-Type: application/json' \
     -X POST \
     --data-binary @body.json \     'https://ACCOUNT_NAME.quadernoapp.com/api/evidence/EVIDENCE_ID.json'
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$evidence</span> <span class="o">=</span> <span class="nx">QuadernoEvidence</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="nx">EVIDENCE_ID</span><span class="p">);</span>
<span class="nv">$evidence</span><span class="o">-&gt;</span><span class="na">ip_address</span> <span class="o">=</span> <span class="s2">"192.168.23.23"</span><span class="p">;</span>

<span class="nv">$evidence</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span> <span class="c1">// Returns true (success) or false (error)</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="ss">ip_address: </span><span class="s1">'192.168.23.23'</span>
<span class="p">}</span>
<span class="no">Quaderno</span><span class="o">::</span><span class="no">Evidence</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="no">EVIDENCE_ID</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Evidence</span>
</code></pre></div>

<p><code>PUT</code>ting to <code>/evidence/EVIDENCE_ID.json</code> will update the evidence with the passed parameters.</p>

<p>This will return <code>200 OK</code> along with the current JSON representation of the evidence if successful.</p>

<h3 id='retrieve-get-and-filter-all-evidence'>Retrieve: Get and filter all evidence</h3>

<blockquote>
<p><code>GET /evidence/EVIDENCE_ID.json</code></p>
</blockquote>

<div class="highlight"><pre class="highlight plaintext"><code>curl -u YOUR_API_KEY:x \
     -X GET 'https://ACCOUNT_NAME.quadernoapp.com/api/evidence.json'
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$evidences</span> <span class="o">=</span> <span class="nx">QuadernoEvidence</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'page'</span><span class="o">=&gt;</span><span class="mi">1</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Evidence</span><span class="p">.</span><span class="nf">all</span><span class="p">()</span> <span class="c1">#=&gt; Array</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">487</span><span class="p">,</span><span class="w">
    </span><span class="nl">"document_id"</span><span class="p">:</span><span class="mi">9756</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"unsettled"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"billing_country"</span><span class="p">:</span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ip_address"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ip_country"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bank_country"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"additional_evidence"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"additional_evidence_country"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"notes"</span><span class="p">:</span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">486</span><span class="p">,</span><span class="w">
    </span><span class="nl">"document_id"</span><span class="p">:</span><span class="mi">9755</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"confirmed"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"billing_country"</span><span class="p">:</span><span class="s2">"ES"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ip_address"</span><span class="p">:</span><span class="s2">"92.186.16.30"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ip_country"</span><span class="p">:</span><span class="s2">"ES"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bank_country"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"additional_evidence"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"additional_evidence_country"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"notes"</span><span class="p">:</span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">485</span><span class="p">,</span><span class="nl">"document_id"</span><span class="p">:</span><span class="mi">9752</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"confirmed"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"billing_country"</span><span class="p">:</span><span class="s2">"ES"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ip_address"</span><span class="p">:</span><span class="s2">"92.186.16.30"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ip_country"</span><span class="p">:</span><span class="s2">"ES"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bank_country"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"additional_evidence"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"additional_evidence_country"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"notes"</span><span class="p">:</span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">484</span><span class="p">,</span><span class="w">
    </span><span class="nl">"document_id"</span><span class="p">:</span><span class="mi">9749</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"confirmed"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"billing_country"</span><span class="p">:</span><span class="s2">"ES"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ip_address"</span><span class="p">:</span><span class="s2">"80.29.119.132"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ip_country"</span><span class="p">:</span><span class="s2">"ES"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bank_country"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"additional_evidence"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"additional_evidence_country"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"notes"</span><span class="p">:</span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">483</span><span class="p">,</span><span class="w">
    </span><span class="nl">"document_id"</span><span class="p">:</span><span class="mi">9748</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"conflicting"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"billing_country"</span><span class="p">:</span><span class="s2">"ES"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ip_address"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ip_country"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bank_country"</span><span class="p">:</span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"additional_evidence"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"additional_evidence_country"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"notes"</span><span class="p">:</span><span class="kc">null</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>

<p><code>GET</code>ting from <code>/evidence.json</code> will return all the user&#39;s evidence objects.</p>

<p>You can filter the results in a few ways:</p>

<ul>
<li>By state, passing the <code>state</code> parameter like <code>?state=STATE</code>. You can combine multiple states separated by commas like <code>?state=confirmed,unsettled</code>. Valid states are <code>confirmed</code>, <code>unsettled</code> and <code>conflicting</code>.</li>
<li>By document_id, passing the document ID in the <code>document_id</code> parameter, like <code>?document_id=3231</code>.</li>
</ul>

<h3 id='retrieve-get-a-single-evidence'>Retrieve: Get a single evidence</h3>

<blockquote>
<p><code>GET /evidence/EVIDENCE_ID.json</code></p>
</blockquote>

<div class="highlight"><pre class="highlight plaintext"><code>curl -u YOUR_API_KEY:x \
     -X GET 'https://ACCOUNT_NAME.quadernoapp.com/api/evidence/EVIDENCE_ID.json'
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$evidence</span> <span class="o">=</span> <span class="nx">QuadernoEvidence</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="nx">EVIDENCE_ID</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">evidence</span> <span class="o">=</span> <span class="no">Quaderno</span><span class="o">::</span><span class="no">Evidence</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="no">EVIDENCE_ID</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Evidence</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">483</span><span class="p">,</span><span class="w">
    </span><span class="nl">"document_id"</span><span class="p">:</span><span class="mi">9748</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"conflicting"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"billing_country"</span><span class="p">:</span><span class="s2">"ES"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ip_address"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ip_country"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bank_country"</span><span class="p">:</span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"additional_evidence"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"additional_evidence_country"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"notes"</span><span class="p">:</span><span class="kc">null</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>

<p><code>GET</code>ting from <code>/evidence/EVIDENCE_ID.json</code> will return that specific evidence.</p>

<h2 id='items'>Items</h2>

<p>The items are those products or services that you sell to your customers.</p>

<p>Items are their own object in Quaderno, but they can be referenced, in an array, by a few types of record:</p>

<ul>
<li>Invoices and sales receipts</li>
<li>Expenses</li>
<li>Credit notes</li>
</ul>

<h3 id='create-an-item'>Create an item</h3>

<blockquote>
<p><code>POST /items.json</code></p>
</blockquote>

<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># body.json</span>
<span class="o">{</span>
  <span class="s2">"code"</span>:<span class="s2">"BluRay 0003"</span>,
  <span class="s2">"name"</span>:<span class="s2">"Titanic IV: The revenge"</span>,
  <span class="s2">"unit_cost"</span>:<span class="s2">"15.0"</span>,
  <span class="s2">"tax_1_name"</span>:<span class="s2">"AWESOME_TAX"</span>,
  <span class="s2">"tax_1_rate"</span>:<span class="s2">"7.00"</span>,
  <span class="s2">"tax_2_name"</span>:<span class="s2">"ANOTHER_AWESOME_TAX"</span>,
  <span class="s2">"tax_2_rate"</span>:<span class="s2">"10.00"</span>
<span class="o">}</span>

curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
     <span class="nt">-X</span> POST <span class="se">\</span>
     <span class="nt">--data-binary</span> @body.json <span class="se">\</span>
     <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/items.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$item</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">QuadernoItem</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
                                 <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'Jelly pizza'</span><span class="p">,</span>
                                 <span class="s1">'code'</span> <span class="o">=&gt;</span> <span class="s1">'Yummy'</span><span class="p">,</span>
                                 <span class="s1">'unit_cost'</span> <span class="o">=&gt;</span> <span class="s1">'15.00'</span><span class="p">,</span>
                                 <span class="s1">'tax_1_name'</span> <span class="o">=&gt;</span> <span class="s1">'JUNKTAX'</span><span class="p">,</span>
                                 <span class="s1">'tax_1_rate'</span> <span class="o">=&gt;</span> <span class="s1">'99.99'</span><span class="p">));</span>
<span class="nv">$item</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span> <span class="c1">// Returns true (success) or false (error)</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="ss">name: </span><span class="s1">'Jelly pizza'</span><span class="p">,</span>
    <span class="ss">code: </span><span class="s1">'Yummy'</span><span class="p">,</span>
    <span class="ss">unit_cost: </span><span class="s1">'15.00'</span><span class="p">,</span>
    <span class="ss">tax_1_name: </span><span class="s1">'JUNKTAX'</span><span class="p">,</span>
    <span class="ss">tax_1_rate: </span><span class="s1">'99.99'</span>
<span class="p">}</span>
<span class="no">Quaderno</span><span class="o">::</span><span class="no">Item</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">params</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Item</span>
</code></pre></div>

<p><code>POST</code>ing to <code>/items.json</code> will create a new item from the parameters passed.</p>

<p>This will return <code>201 Created</code> and the current JSON representation of the item if the creation was a success, along with the location of the new item in the <code>url</code> field.</p>

<h4 id='attributes'>Attributes</h4>

<table><thead>
<tr>
<th>Attribute</th>
<th>Mandatory</th>
<th>Type/Description</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td><strong>yes</strong></td>
<td>String(255 chars). Validates uniqueness</td>
</tr>
<tr>
<td>name</td>
<td><strong>yes</strong></td>
<td>String(255 chars).</td>
</tr>
<tr>
<td>unit_cost</td>
<td><strong>yes</strong></td>
<td>Decimal</td>
</tr>
<tr>
<td>description</td>
<td>no</td>
<td>String(255 chars).</td>
</tr>
<tr>
<td>currency</td>
<td>no</td>
<td>String(3 chars) Defaults to the account currency. ISO 4217 format</td>
</tr>
<tr>
<td>tax_1_name</td>
<td>Mandatory if  <code>tax_1_rate</code> and <code>tax_1_country</code> are present)</td>
<td></td>
</tr>
<tr>
<td>tax_1_rate</td>
<td>Mandatory if  <code>tax_1_name</code> and <code>tax_1_country</code> are present)</td>
<td>Decimal between -100.00 and 100.00 (not incluided)</td>
</tr>
<tr>
<td>tax_1_country</td>
<td>Mandatory if <code>tax_1_name</code> and <code>tax_1_rate</code> are present)</td>
<td>String(2 chars). Format ISO 3166-1 alpha-2</td>
</tr>
<tr>
<td>tax_2_name</td>
<td>Mandatory if  <code>tax_2_rate</code> and <code>tax_2_country</code> are present)</td>
<td></td>
</tr>
<tr>
<td>tax_2_rate</td>
<td>Mandatory if  <code>tax_2_name</code> and <code>tax_2_country</code> are present)</td>
<td>Decimal between -100.00 and 100.00 (not incluided)</td>
</tr>
<tr>
<td>tax_2_country</td>
<td>Mandatory if <code>tax_2_name</code> and <code>tax_2_rate</code> are present)</td>
<td>String(2 chars). Format ISO 3166-1 alpha-2</td>
</tr>
<tr>
<td>tax_type</td>
<td>no</td>
<td>String. One of the following: <code>included</code>, <code>excluded</code> (<code>excluded</code> by default).</td>
</tr>
<tr>
<td>kind</td>
<td>no</td>
<td>One of the following: <code>one_off</code> or <code>subscription</code>. Default value is <code>one_off</code></td>
</tr>
<tr>
<td>stripe_plan_id</td>
<td>no</td>
<td>String(255 chars). Only for Stripe <code>subscription</code>s. Validates in Stripe that matches a real Stripe Plan Id</td>
</tr>
<tr>
<td>paypal_interval_unit</td>
<td>no</td>
<td>Only for Paypal <code>subscription</code>s. One of the following: <code>daily</code>, <code>weekly</code>, <code>monthly</code>, <code>yearly</code></td>
</tr>
<tr>
<td>paypal_interval_frequency</td>
<td>no</td>
<td>Decimal. Only for Paypal <code>subscription</code>s. Frequency of the units when the charge should recur.</td>
</tr>
<tr>
<td>paypal_interval_duration</td>
<td>no</td>
<td>Decimal. Only for Paypal <code>subscription</code>s. Number of times the charge should recur.</td>
</tr>
</tbody></table>

<aside class="notice">
Note that this kind of item is like a template for items, a shortcut that you can reference in order to speed up document creation. You can also have items that exist only for the relevant document and not as independent entities, and these do not require "unit_cost" (also not being stock-trackable and so on).
</aside>

<h3 id='retrieve-get-and-filter-all-items'>Retrieve: Get and filter all items</h3>

<blockquote>
<p><code>GET /items.json</code></p>
</blockquote>

<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-X</span> GET <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/items.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Item</span><span class="p">.</span><span class="nf">all</span><span class="p">()</span> <span class="c1">#=&gt; Array</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$items</span> <span class="o">=</span> <span class="nx">QuadernoItem</span><span class="o">::</span><span class="na">find</span><span class="p">();</span> <span class="c1">// Returns an array of QuadernoItem</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="s2">"BluRay 0000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Titanic"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"unit_cost"</span><span class="p">:</span><span class="s2">"15.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"stock"</span><span class="p">:</span><span class="s2">"100"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tax_type"</span><span class="p">:</span><span class="s2">"included"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://my-account.quadernoapp.com/api/items/1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"kind"</span><span class="p">:</span><span class="s2">"one_off"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="s2">"BluRay 0001"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Titanic II: The revenge"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"unit_cost"</span><span class="p">:</span><span class="s2">"15.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tax_1_name"</span><span class="p">:</span><span class="s2">"AWESOME_TAX"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tax_1_rate"</span><span class="p">:</span><span class="s2">"7.00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tax_type"</span><span class="p">:</span><span class="s2">"excluded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://my-account.quadernoapp.com/api/items/2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"kind"</span><span class="p">:</span><span class="s2">"one_off"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="s2">"BluRay 0002"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Titanic III: The origin"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"unit_cost"</span><span class="p">:</span><span class="s2">"15.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"stock"</span><span class="p">:</span><span class="s2">"33"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tax_type"</span><span class="p">:</span><span class="s2">"excluded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://my-account.quadernoapp.com/api/items/3"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"kind"</span><span class="p">:</span><span class="s2">"one_off"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>

<p><code>GET</code>ting from <code>/items.json</code> will return all the user&#39;s items.</p>

<p>You can filter the results in a few ways:</p>

<ul>
<li>By <code>number</code>, <code>contact_name</code> or <code>po_number</code> by passing the <code>q</code> parameter in the url like <code>?q=KEYWORD</code>.</li>
<li>By date range, passing the <code>date</code> parameter in the url like <code>?date=DATE1,DATE2</code>. Date range allows these formats: <code>2019-01-01,2019-12-31</code> or <code>2019/01/01,2019/12/31</code>.</li>
<li>By state, passing the <code>state</code> parameter like <code>?state=STATE</code>.</li>
<li>By contact, passing the contact ID in the <code>contact</code> parameter, like <code>?contact=3231</code>.</li>
</ul>

<h3 id='retrieve-get-a-single-item'>Retrieve: Get a single item</h3>

<blockquote>
<p><code>GET /items/ITEM_ID.json</code></p>
</blockquote>

<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-X</span> GET <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/items/ITEM_ID.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Item</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="no">ITEM_ID</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Item</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$item</span> <span class="o">=</span> <span class="nx">QuadernoItem</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="s1">'ITEM_ID'</span><span class="p">);</span> <span class="c1">// Returns a QuadernoItem</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="s2">"BluRay 0001"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Titanic II: The revenge"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"unit_cost"</span><span class="p">:</span><span class="s2">"15.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tax_1_name"</span><span class="p">:</span><span class="s2">"AWESOME_TAX"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tax_1_rate"</span><span class="p">:</span><span class="s2">"7.00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tax_type"</span><span class="p">:</span><span class="s2">"excluded"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://my-account.quadernoapp.com/api/items/2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"kind"</span><span class="p">:</span><span class="s2">"one_off"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>

<p><code>GET</code>ting from <code>/items/ITEM_ID.json</code> will return that specific item.</p>

<h3 id='update-an-item'>Update an item</h3>

<blockquote>
<p><code>PUT /items/ITEM_ID.json</code></p>
</blockquote>

<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
     <span class="nt">-X</span> PUT <span class="se">\</span>
     <span class="nt">-d</span> <span class="s1">'{ "unit_cost":"10.0" }'</span> <span class="se">\</span>
     <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/items/ITEM_ID.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="ss">unit_cost: </span><span class="s1">'10.0'</span><span class="p">,</span>
<span class="p">}</span>
<span class="no">Quaderno</span><span class="o">::</span><span class="no">Item</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="no">ITEM_ID</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Item</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$item</span><span class="o">-&gt;</span><span class="na">unit_cost</span> <span class="o">=</span> <span class="s1">'10.0'</span><span class="p">;</span>
<span class="nv">$item</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
</code></pre></div>

<p><code>PUT</code>ting to <code>/items/ITEM_ID.json</code> will update the item with the passed parameters.</p>

<p>This will return <code>200 OK</code> along with the current JSON representation of the item if successful.</p>

<h3 id='delete-an-item'>Delete an item</h3>

<blockquote>
<p><code>DELETE /items/ITEM_ID.json</code></p>
</blockquote>

<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-X</span> DELETE <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/items/ITEM_ID.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Item</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="no">ITEM_ID</span><span class="p">)</span> <span class="c1">#=&gt; Boolean</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$item</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">();</span>
</code></pre></div>

<p><code>DELETE</code>ing to <code>/item/ITEM_ID.json</code> will delete the specified item and returns <code>204 No Content</code> if successful.</p>

<h3 id='adding-an-item-to-a-document-by-reference'>Adding an item to a document by reference</h3>

<blockquote>
<p>Given this item:</p>
</blockquote>

<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="s2">"BluRay 0003"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Titanic IV: The revenge"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"unit_cost"</span><span class="p">:</span><span class="s2">"15.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tax_1_name"</span><span class="p">:</span><span class="s2">"AWESOME_TAX"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tax_1_rate"</span><span class="p">:</span><span class="s2">"7.00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tax_2_name"</span><span class="p">:</span><span class="s2">"ANOTHER_AWESOME_TAX"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tax_2_rate"</span><span class="p">:</span><span class="s2">"10.00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"stock"</span><span class="p">:</span><span class="s2">"1000"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>

<blockquote>
<p>You can generate an invoice with this item by passing this data via POST to /invoices.json:</p>
</blockquote>

<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"contact_id"</span><span class="p">:</span><span class="s2">"5059bdbf2f412e0901000024"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"contact_name"</span><span class="p">:</span><span class="s2">"STARK"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag_list"</span><span class="p">:</span><span class="s2">"playboy, businessman"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"items_attributes"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"reference"</span><span class="p">:</span><span class="s2">"BluRay 0003"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="s2">"2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"unit_cost"</span><span class="p">:</span><span class="s2">"10.95"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>

<p>You can use an item attributes to create or update a document (invoice, expense or estimate). In order to use this feature, the item must have a <code>code</code> that must be set as a <code>reference</code> in the <code>items_attributes</code> array.</p>

<p>Then you can use the <code>code</code> in the <code>reference</code> field along with per-use attributes such as <code>quantity</code> when setting the <code>item_attributes</code> of another document, such as an invoice or expense.</p>

<aside class="notice">
You can see this happening in API examples under the relevant document sections.
</aside>

<h2 id='taxes'>Taxes</h2>

<p>One of the killer features Quaderno provides is efficient and easy tax management. As part of this, we offer an API for easy tax calculation.</p>

<aside class="notice">
Tax rates are based on your account settings. Please check you tax settings in the <a href="https://quadernoapp.com/settings/taxes" target="_blank">Tax Rates</a> page.
</aside>

<h3 id='calculate-taxes'>Calculate Taxes</h3>

<blockquote>
<p><code>GET /taxes/calculate.json</code></p>
</blockquote>

<div class="highlight"><pre class="highlight plaintext"><code>
curl -u YOUR_API_KEY:x \
     -H 'Content-Type: application/json' \
     -X GET \
     'https://ACCOUNT_NAME.quadernoapp.com/api/taxes/calculate.json?country=US&amp;postal_code=94010'
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="ss">country: </span><span class="s1">'US'</span><span class="p">,</span>
    <span class="ss">postal_code: </span><span class="s1">'94010'</span>
<span class="p">}</span>
<span class="n">tax</span> <span class="o">=</span> <span class="no">Quaderno</span><span class="o">::</span><span class="no">Tax</span><span class="p">.</span><span class="nf">calculate</span><span class="p">(</span><span class="n">params</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Tax</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'country'</span> <span class="o">=&gt;</span> <span class="s1">'US'</span><span class="p">,</span>
  <span class="s1">'postal_code'</span> <span class="o">=&gt;</span> <span class="s1">'94010'</span>
<span class="p">);</span>

<span class="nv">$tax</span> <span class="o">=</span> <span class="nx">QuadernoTax</span><span class="o">::</span><span class="na">calculate</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span> <span class="c1">// Returns a QuadernoTax</span>
<span class="nv">$tax</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">;</span> <span class="c1">// "Sales Tax"</span>
<span class="nv">$tax</span><span class="o">-&gt;</span><span class="na">rate</span><span class="p">;</span> <span class="c1">// 9.5</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sales tax"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">9.5</span><span class="p">,</span><span class="w">
    </span><span class="nl">"extra_name"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"extra_rate"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"region"</span><span class="p">:</span><span class="s2">"CA"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"county"</span><span class="p">:</span><span class="s2">"SAN MATEO"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"city"</span><span class="p">:</span><span class="s2">"BURLINGAME"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"county_tax_code"</span><span class="p">:</span><span class="s2">"41"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"city_tax_code"</span><span class="p">:</span><span class="s2">"746"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"transaction_type"</span><span class="p">:</span><span class="s2">"eservice"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"notes"</span><span class="p">:</span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>

<p><code>GET</code>ting to <code>/taxes/calculate.json</code> will calculate the applicable taxes given a customer&#39;s data.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>country</code></td>
<td><strong>Yes</strong></td>
<td>Customer&#39;s country (2-letter <a href="http://en.wikipedia.org/wiki/ISO_3166-1#Current_codes">ISO code</a>)</td>
</tr>
<tr>
<td><code>postal_code</code></td>
<td>No</td>
<td>Customer&#39;s postal code / zip</td>
</tr>
<tr>
<td><code>city</code></td>
<td>No</td>
<td>Customer&#39;s city (for US sales tax)</td>
</tr>
<tr>
<td><code>tax_id</code></td>
<td>No</td>
<td>Customer&#39;s Tax ID. Quaderno can validate EU VAT numbers, ABN, and NZBN.</td>
</tr>
<tr>
<td><code>transaction_type</code></td>
<td>No</td>
<td>Values: <code>eservice</code>, <code>ebook</code>, <code>standard</code>, <code>reduced</code>, <code>saas</code>. Defaults to the &quot;default tax type&quot; configured in your account taxes settings.</td>
</tr>
</tbody></table>

<p>This will return a <code>200 OK</code> if the request was a success, along with the taxes represented as a JSON string.</p>

<h3 id='validating-tax-ids'>Validating Tax IDs</h3>

<blockquote>
<p>GET /taxes/validate.json</p>
</blockquote>

<div class="highlight"><pre class="highlight plaintext"><code>curl -u YOUR_API_KEY:x \
     -H 'Content-Type: application/json' \
     -X GET \
     'https://ACCOUNT_NAME.quadernoapp.com/api/taxes/validate.json?country=IE&amp;tax_id=IE6388047V'

{
    "valid":true
}
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">country</span> <span class="o">=</span> <span class="s1">'IE'</span>
<span class="n">tax_id</span> <span class="o">=</span> <span class="s1">'IE6388047V'</span>

<span class="no">Quaderno</span><span class="o">::</span><span class="no">Tax</span><span class="p">.</span><span class="nf">validate_vat_number</span><span class="p">(</span><span class="n">country</span><span class="p">,</span> <span class="n">tax_id</span><span class="p">)</span> <span class="c1">#=&gt; true, false or nil</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$country</span> <span class="o">=</span> <span class="s1">'IE'</span><span class="p">;</span>
<span class="nv">$tax_id</span> <span class="o">=</span> <span class="s1">'IE6388047V'</span><span class="p">;</span>

<span class="nx">QuadernoTax</span><span class="o">::</span><span class="na">validate_vat_number</span><span class="p">(</span><span class="nv">$country</span><span class="p">,</span> <span class="nv">$tax_id</span><span class="p">)</span> <span class="c1">// true, false or null</span>
</code></pre></div>

<p><code>GET</code>ting to <code>/taxes/validate.json</code> will validate the given tax ID. Currently Quaderno validates EU VAT numbers, ABN, and NZBN.</p>

<p>Please keep in mind that tax IDs are not actually validated while using the Sandbox.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>country</code></td>
<td><strong>Yes</strong></td>
<td>Customer&#39;s country (2-letter <a href="http://en.wikipedia.org/wiki/ISO_3166-1#Current_codes">ISO code</a>)</td>
</tr>
<tr>
<td><code>tax_id</code></td>
<td><strong>Yes</strong></td>
<td>Customer&#39;s tax ID. Quaderno can validate EU VAT numbers, ABN, and NZBN.</td>
</tr>
</tbody></table>

<p>This will return a <code>200 OK</code> and the result of validating the tax ID against the official external validation service. The result can be true (valid business number), false (invalid business number) or null (the external service is temporarily unavailable).</p>

<p>In our <a href="https://developers.quaderno.io/#introduction-the-sandbox">Sandbox</a>, you can use the following test numbers: </p>

<ul>
<li><strong>DE111111111</strong>: invalid number, returns <code>false</code></li>
<li><strong>IE222222222</strong>: node down, returns <code>null</code> </li>
</ul>
<h1 id='invoicing'>INVOICING</h1>
<h2 id='invoices'>Invoices</h2>

<p>An invoice is a detailed list of goods shipped or services rendered, with an account of all costs.</p>

<h3 id='create-an-invoice'>Create an invoice</h3>

<blockquote>
<p><code>POST /invoices.json</code></p>
</blockquote>

<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># body.json</span>
<span class="o">{</span>
  <span class="s2">"contact_id"</span>:<span class="s2">"5059bdbf2f412e0901000024"</span>,
  <span class="s2">"contact_name"</span>:<span class="s2">"STARK"</span>,
  <span class="s2">"po_number"</span>:<span class="s2">""</span>,
  <span class="s2">"currency"</span>:<span class="s2">"USD"</span>,
  <span class="s2">"tag_list"</span>:<span class="s2">"playboy, businessman"</span>,
  <span class="s2">"items_attributes"</span>:[
    <span class="o">{</span>
      <span class="s2">"description"</span>:<span class="s2">"Whiskey"</span>,
      <span class="s2">"quantity"</span>:<span class="s2">"1.0"</span>,
      <span class="s2">"unit_price"</span>:<span class="s2">"20.0"</span>,
      <span class="s2">"discount_rate"</span>:<span class="s2">"0.0"</span>,
      <span class="s2">"reference"</span>:<span class="s2">"item_code_X"</span>
    <span class="o">}</span>
  <span class="o">]</span>,
  <span class="s2">"custom_metadata"</span>:<span class="o">{</span>
    <span class="s2">"a_custom_key"</span>:<span class="s2">"a custom value"</span>
  <span class="o">}</span>
<span class="o">}</span>

curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
     <span class="nt">-X</span> POST <span class="se">\</span>
     <span class="nt">--data-binary</span> @body.json <span class="se">\</span>
     <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/invoices.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$invoice</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">QuadernoInvoice</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
                                 <span class="s1">'po_number'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
                                 <span class="s1">'currency'</span> <span class="o">=&gt;</span> <span class="s1">'USD'</span><span class="p">,</span>
                                 <span class="s1">'tag_list'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'playboy'</span><span class="p">,</span> <span class="s1">'businessman'</span><span class="p">),</span>
                                 <span class="s1">'custom_metadata'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'a_custom_key'</span> <span class="o">=&gt;</span> <span class="s1">'a custom value'</span><span class="p">)));</span>
<span class="nv">$item</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">QuadernoDocumentItem</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
                               <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'Pizza bagels'</span><span class="p">,</span>
                               <span class="s1">'unit_price'</span> <span class="o">=&gt;</span> <span class="mf">9.99</span><span class="p">,</span>
                               <span class="s1">'quantity'</span> <span class="o">=&gt;</span> <span class="mi">20</span><span class="p">));</span>
<span class="nv">$contact</span> <span class="o">=</span> <span class="nx">QuadernoContact</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="s1">'5059bdbf2f412e0901000024'</span><span class="p">);</span>

<span class="nv">$invoice</span><span class="o">-&gt;</span><span class="na">addItem</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span>
<span class="nv">$invoice</span><span class="o">-&gt;</span><span class="na">addContact</span><span class="p">(</span><span class="nv">$contact</span><span class="p">);</span>

<span class="nv">$invoice</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span> <span class="c1">// Returns true (success) or false (error)</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">contact</span> <span class="o">=</span> <span class="no">Quaderno</span><span class="o">::</span><span class="no">Contact</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="s1">'50603e722f412e0435000024'</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Contact</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">contact_id: </span><span class="n">contact</span><span class="p">.</span><span class="nf">id</span><span class="p">,</span>
  <span class="ss">po_number: </span><span class="s1">'PO.12234'</span><span class="p">,</span>
  <span class="ss">currency: </span><span class="s1">'USD'</span><span class="p">,</span>
  <span class="ss">tag_list: </span><span class="p">[</span><span class="s1">'playboy'</span><span class="p">,</span> <span class="s1">'businessman'</span><span class="p">],</span>
  <span class="ss">items_attributes: </span><span class="p">[</span>
    <span class="p">{</span>
      <span class="ss">description: </span><span class="s1">'Whiskey'</span><span class="p">,</span>
      <span class="ss">quantity: </span><span class="s1">'1.0'</span><span class="p">,</span>
      <span class="ss">unit_price: </span><span class="s1">'20.0'</span><span class="p">,</span>
      <span class="ss">discount_rate: </span><span class="s1">'0.0'</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="ss">custom_metadata: </span><span class="p">{</span>
    <span class="ss">a_custom_key: </span><span class="s1">'a custom value'</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="n">invoice</span> <span class="o">=</span> <span class="no">Quaderno</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">params</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Invoice</span>

</code></pre></div>

<p><code>POST</code>ing to <code>/invoices.json</code> will create a new invoice from the parameters passed.</p>

<p>This will return <code>201 Created</code> and the current JSON representation of the invoice if the creation was a success, along with the location of the new invoice in the <code>url</code> field.</p>

<h4 id='attributes'>Attributes</h4>

<table><thead>
<tr>
<th>Attribute</th>
<th>Mandatory</th>
<th>Type/Description</th>
</tr>
</thead><tbody>
<tr>
<td>number</td>
<td>no</td>
<td>String(20 chars) Available for invoices, credit_notes, receipts and estimates. Automatic numbering is used by default. Validates uniqueness</td>
</tr>
<tr>
<td>issue_date</td>
<td>no</td>
<td>String(255 chars) Available for all except for <code>recurring</code>. Defaults to the current date. Format YYYY-MM-DD</td>
</tr>
<tr>
<td>po_number</td>
<td>no</td>
<td>String(255 chars)</td>
</tr>
<tr>
<td>due_date</td>
<td>no</td>
<td>String(255 chars) Available for invoices, expenses and credit notes. Format <code>YYYY-MM-DD</code></td>
</tr>
<tr>
<td>currency</td>
<td>no</td>
<td>String(3 chars) Defaults to the account currency. En formato ISO 4217</td>
</tr>
<tr>
<td>tag_list</td>
<td>no</td>
<td>String(255 chars). Multiple tags should be separated by commas</td>
</tr>
<tr>
<td>payment_details</td>
<td>no</td>
<td>Text</td>
</tr>
<tr>
<td>notes</td>
<td>no</td>
<td>Text</td>
</tr>
<tr>
<td>contact_id</td>
<td>(Mandatory if <code>contact</code> is not present)</td>
<td>ID</td>
</tr>
<tr>
<td>contact</td>
<td>(Mandatory if <code>contact_id</code> is not present)</td>
<td>Hash with a contact data for creation</td>
</tr>
<tr>
<td>country</td>
<td>no</td>
<td>String(2 chars) <code>ISO 3166-1 alpha-2</code>. Available for updates</td>
</tr>
<tr>
<td>street_line_1</td>
<td>no</td>
<td>String(255 chars). Available for updates</td>
</tr>
<tr>
<td>street_line_2</td>
<td>no</td>
<td>String(255 chars)</td>
</tr>
<tr>
<td>city</td>
<td>no</td>
<td>String(255 chars). Available for updates</td>
</tr>
<tr>
<td>region</td>
<td>no</td>
<td>String(255 chars). Available for updates</td>
</tr>
<tr>
<td>postal_code</td>
<td>no</td>
<td>String(255 chars). Available for updates</td>
</tr>
<tr>
<td>items_attributes</td>
<td><strong>yes</strong></td>
<td>Array of document items (check available attributes for document items below). No more than 200 items are allowed in a request. To add more use subsequent update requests. Maximum items per document are limited up to 1000 items.</td>
</tr>
<tr>
<td>payment_method</td>
<td>no</td>
<td>Create a paid document in a single request. One of the following: <code>credit_card</code>, <code>cash</code>, <code>wire_transfer</code>, <code>direct_debit</code>, <code>check</code>, <code>promissory_note</code>, <code>iou</code>, <code>paypal</code> or <code>other</code></td>
</tr>
<tr>
<td>payment_processor</td>
<td>no</td>
<td>Payment processor that you used to process the payment.</td>
</tr>
<tr>
<td>payment_processor_id</td>
<td>no</td>
<td>The <code>id</code> that the payment processor assigned to the payment.</td>
</tr>
<tr>
<td>custom_metadata</td>
<td>no</td>
<td>Key-value data. You can have up to 20 keys, with key names up to 40 characters long and values up to 500 characters long.</td>
</tr>
</tbody></table>

<aside class="notice">
If you pass a `contact` JSON object instead of a `contact_id`, and the email or first and last name combination does not match any of your existing contacts, a new one will be created, otherwise a new invoice will be created for the existing contact. Only a `contact` object OR a `contact_id` property should be passed in the same call. Only a `contact` object OR a `contact_id` property should be passed in the same call.<br /><br />

<p>Please note that you can pass <strong>either</strong> contact_id or contact, but if you pass both then results may not be what you expect.</p>

<p>Allowed contact fields are the same as when creating a contact via the dedicated <a href="#contacts">Contacts API</a>.</p>
</aside>

<h4 id='document-item-attributes'>Document Item Attributes</h4>

<table><thead>
<tr>
<th>Attribute</th>
<th>Mandatory</th>
<th>Type/Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>no</td>
<td>ID. Available only for updates</td>
</tr>
<tr>
<td>description</td>
<td><strong>yes</strong></td>
<td>String(255 chars)</td>
</tr>
<tr>
<td>quantity</td>
<td>no</td>
<td>Decimal. Defaults to 1.0</td>
</tr>
<tr>
<td>unit_price</td>
<td><strong>yes</strong></td>
<td>Decimal</td>
</tr>
<tr>
<td>total_amount</td>
<td>Mandatory if <code>unit_price</code> is not present</td>
<td>Decimal</td>
</tr>
<tr>
<td>discount_rate</td>
<td>no</td>
<td>Decimal</td>
</tr>
<tr>
<td>tax_1_name</td>
<td>Mandatory if <code>tax_1_rate</code> is present</td>
<td>String(255 chars)</td>
</tr>
<tr>
<td>tax_1_rate</td>
<td>Mandatory if <code>tax_1_name</code> is present</td>
<td>Decimal between -100.00 and 100.00 (not included)</td>
</tr>
<tr>
<td>tax_1_country</td>
<td>no</td>
<td>String(2 chars). Defaults to the contact&#39;s country</td>
</tr>
<tr>
<td>tax_1_region</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for Canadian or United States taxes.</td>
</tr>
<tr>
<td>tax_1_county</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_1_city</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_1_county_code</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_1_city_code</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_1_transaction_type</td>
<td>no</td>
<td>String. Accepts <code>eservice</code>, <code>ebook</code> or <code>standard</code>. Defaults to your account &quot;default tax type&quot;.</td>
</tr>
<tr>
<td>tax_2_name</td>
<td>Mandatory if <code>tax_2_rate</code> is present</td>
<td>String(255 chars)</td>
</tr>
<tr>
<td>tax_2_rate</td>
<td>Mandatory if <code>tax_2_name</code> is present</td>
<td>Decimal between -100.00 and 100.00 (not included)</td>
</tr>
<tr>
<td>tax_2_country</td>
<td>no</td>
<td>String(2 chars). Defaults to the contact&#39;s country</td>
</tr>
<tr>
<td>tax_2_region</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for Canadian or United States taxes.</td>
</tr>
<tr>
<td>tax_2_county</td>
<td>no</td>
<td>String(2 chars). Recommendable to set for Canadian or United States taxes.</td>
</tr>
<tr>
<td>tax_2_city</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_2_county_code</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_2_city_code</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_2_transaction_type</td>
<td>no</td>
<td>String. Accepts <code>eservice</code>, <code>ebook</code> or <code>standard</code>. Defaults to your account &quot;default tax type&quot;.</td>
</tr>
<tr>
<td>reference</td>
<td>no</td>
<td>String(255 chars) Code (<code>code</code>) of an existing item. <strong>If present none of the mandatory attributes are mandatory (as you are referencing an item that already exists)</strong></td>
</tr>
<tr>
<td>_destroy</td>
<td>no</td>
<td>Set it to 1 if you want to remove the document item selected by ID. Available only for updates</td>
</tr>
</tbody></table>

<h4 id='invoice-states'>Invoice States</h4>

<p>Possible invoice states are:</p>

<ul>
<li><code>outstanding</code>: Awaiting payment (unpaid).</li>
<li><code>late</code>: The invoice is due and no payment has yet been received. </li>
<li><code>paid</code>: Payment received. </li>
<li><code>refunded</code>: Payment refunded and a credit note has been issued. </li>
<li><code>archived</code>: The invoice has been voided.</li>
</ul>

<h4 id='create-an-attachment-during-invoice-creation'>Create an attachment during invoice creation</h4><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"attachment"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="s2">"aBaSe64EnCoDeDFiLe"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"filename"</span><span class="p">:</span><span class="s2">"the_filename.png"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Optionally, you can pass an attachment hash along with the rest of the parameters.</p>

<p>Fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>data</code></td>
<td>Contains a Base64 encoded string which represents the file.</td>
</tr>
<tr>
<td><code>filename</code></td>
<td>The attachment file name.</td>
</tr>
</tbody></table>

<p>Valid file extensions are <code>pdf</code>, <code>txt</code>, <code>jpeg</code>, <code>jpg</code>, <code>png</code>, <code>xml</code>, <code>xls</code>, <code>doc</code>, <code>rtf</code> and <code>html</code>. Any other format will stop invoice creation and return a <code>422 Unprocessable Entity</code> error.</p>
<h3 id='retrieve-get-and-filter-all-invoices'>Retrieve: Get and filter all invoices</h3>
<blockquote>
<p><code>GET /invoices.json</code></p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-X</span> GET <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/invoices.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">all</span><span class="p">()</span> <span class="c1">#=&gt; Array</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$invoices</span> <span class="o">=</span> <span class="nx">QuadernoInvoice</span><span class="o">::</span><span class="na">find</span><span class="p">();</span> <span class="c1">// Returns an array of QuadernoInvoice</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"507693322f412e0e2e00000f"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"number"</span><span class="p">:</span><span class="s2">"0000047"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"issue_date"</span><span class="p">:</span><span class="s2">"2012-10-11"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="s2">"1325376000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"contact"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"5073f9c22f412e02d0000032"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"full_name"</span><span class="p">:</span><span class="s2">"Garfield"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"street_line_1"</span><span class="p">:</span><span class="s2">"Street 23"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"street_line_2"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"city"</span><span class="p">:</span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"region"</span><span class="p">:</span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="s2">"10203"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"po_number"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"due_date"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"exchange_rate"</span><span class="p">:</span><span class="s2">"0.680309"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"48151623429"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"lasagna"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quantity"</span><span class="p">:</span><span class="s2">"25.0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"unit_price_cents"</span><span class="p">:</span><span class="s2">"375"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"discount_rate"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_1_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_1_rate"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_2_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_2_rate"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reference"</span><span class="p">:</span><span class="s2">"Awesome!"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"9375"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"gross_amount_cents"</span><span class="p">:</span><span class="s2">"9375"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"9375"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"taxes"</span><span class="p">:[],</span><span class="w">
    </span><span class="nl">"total_cents"</span><span class="p">:</span><span class="s2">"9375"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payments"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"50aca7d92f412eda5200002c"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"date"</span><span class="p">:</span><span class="s2">"2012-11-21"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="s2">"credit_card"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"payment_processor"</span><span class="p">:</span><span class="s2">"stripe"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"payment_processor_id"</span><span class="p">:</span><span class="s2">"ch_19yUdh2eZvKYlo2CkFVBOZG7"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount_cents"</span><span class="p">:</span><span class="s2">"9375"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://ACCOUNT_NAME.quadernoapp.com/api/invoices/507693322f412e0e2e00000f/payments/50aca7d92f412eda5200002c.json"</span><span class="w">
      </span><span class="p">},</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="s2">"Ask Jon"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"notes"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"paid"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tag_list"</span><span class="p">:[</span><span class="s2">"lasagna"</span><span class="p">,</span><span class="w"> </span><span class="s2">"cat"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"secure_id"</span><span class="p">:</span><span class="s2">"7hef1rs7p3rm4l1nk"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"permalink"</span><span class="p">:</span><span class="s2">"https://quadernoapp.com/invoice/7hef1rs7p3rm4l1nk"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pdf"</span><span class="p">:</span><span class="s2">"https://quadernoapp.com/invoice/7hef1rs7p3rm4l1nk.pdf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://ACCOUNT_NAME.quadernoapp.com/api/invoices/507693322f412e0e2e00000f.json"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"custom_metadata"</span><span class="p">:{}</span><span class="w">
  </span><span class="p">},</span><span class="w">

  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"507693322f412e0e2e0000da"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"number"</span><span class="p">:</span><span class="s2">"0000047"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"issue_date"</span><span class="p">:</span><span class="s2">"2012-10-11"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="s2">"1325376020"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"contact"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"5073f9c22f412e02d00004cf"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"full_name"</span><span class="p">:</span><span class="s2">"Teenage Mutant Ninja Turtles"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"street_line_1"</span><span class="p">:</span><span class="s2">"Melrose Ave, Sewer #3"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"street_line_2"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"city"</span><span class="p">:</span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"region"</span><span class="p">:</span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"po_number"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"due_date"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"exchange_rate"</span><span class="p">:</span><span class="s2">"0.680309"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"481516234291"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"pizza"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quantity"</span><span class="p">:</span><span class="s2">"15.0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"unit_price_cents"</span><span class="p">:</span><span class="s2">"6000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"discount_rate"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_1_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_1_rate"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_2_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_2_rate"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reference"</span><span class="p">:</span><span class="s2">"Even the bad ones taste good!"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"6000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"gross_amount_cents"</span><span class="p">:</span><span class="s2">"6000"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"6000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"taxes"</span><span class="p">:[],</span><span class="w">
    </span><span class="nl">"total_cents"</span><span class="p">:</span><span class="s2">"6000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payments"</span><span class="p">:[],</span><span class="w">
    </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"notes"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"outstanding"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tag_list"</span><span class="p">:[</span><span class="s2">"pizza"</span><span class="p">,</span><span class="w"> </span><span class="s2">"turtles"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"secure_id"</span><span class="p">:</span><span class="s2">"7hes3c0ndp3rm4l1nk"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"permalink"</span><span class="p">:</span><span class="s2">"https://ACCOUNT_NAME.quadernoapp.com/invoice/7hes3c0ndp3rm4l1nk"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pdf"</span><span class="p">:</span><span class="s2">"https://ACCOUNT_NAME.quadernoapp.com/invoice/7hes3c0ndp3rm4l1nk.pdf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://ACCOUNT_NAME.quadernoapp.com/api/invoices/507693322f412e0e2e0000da.json"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"custom_metadata"</span><span class="p">:{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p><code>GET</code>ting from <code>/invoices.json</code> will return all the user&#39;s invoices.</p>

<p>You can filter the results in a few ways:</p>

<ul>
<li>By <code>number</code>, <code>contact_name</code> or <code>po_number</code> by passing the <code>q</code> parameter in the url like <code>?q=KEYWORD</code>.</li>
<li>By date range, passing the <code>date</code> parameter in the url like <code>?date=DATE1,DATE2</code>. Date range allows these formats: <code>2019-01-01,2019-12-31</code> or <code>2019/01/01,2019/12/31</code>.</li>
<li>By state, passing the <code>state</code> parameter like <code>?state=STATE</code>.</li>
<li>By contact, passing the contact ID in the <code>contact</code> parameter, like <code>?contact=3231</code>.</li>
</ul>
<h3 id='retrieve-get-a-single-invoice'>Retrieve: Get a single invoice</h3>
<blockquote>
<p><code>GET /invoices/INVOICE_ID.json</code></p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-X</span> GET <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/invoices/INVOICE_ID.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="no">INVOICE_ID</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Invoice</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$invoice</span> <span class="o">=</span> <span class="nx">QuadernoInvoice</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="s1">'INVOICE_ID'</span><span class="p">);</span> <span class="c1">// Returns a QuadernoInvoice</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"507693322f412e0e2e0000da"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"number"</span><span class="p">:</span><span class="s2">"0000047"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"issue_date"</span><span class="p">:</span><span class="s2">"2012-10-11"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"contact"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"5073f9c22f412e02d00004cf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"full_name"</span><span class="p">:</span><span class="s2">"Teenage Mutant Ninja Turtles"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"street_line_1"</span><span class="p">:</span><span class="s2">"Melrose Ave, Sewer #3"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"street_line_2"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"city"</span><span class="p">:</span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"region"</span><span class="p">:</span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"po_number"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"due_date"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"exchange_rate"</span><span class="p">:</span><span class="s2">"0.680309"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"48151623429"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"pizza"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="s2">"15.0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"unit_price_cents"</span><span class="p">:</span><span class="s2">"6000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"discount_rate"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax_1_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax_1_rate"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax_2_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax_2_rate"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reference"</span><span class="p">:</span><span class="s2">"Even the bad ones taste good!"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"6000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"gross_amount_cents"</span><span class="p">:</span><span class="s2">"6000"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"6000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"taxes"</span><span class="p">:[],</span><span class="w">
  </span><span class="nl">"total_cents"</span><span class="p">:</span><span class="s2">"6000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payments"</span><span class="p">:[],</span><span class="w">
  </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"notes"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"outstanding"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag_list"</span><span class="p">:[</span><span class="s2">"lasagna"</span><span class="p">,</span><span class="w"> </span><span class="s2">"cat"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"secure_id"</span><span class="p">:</span><span class="s2">"7hef1rs7p3rm4l1nk"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"permalink"</span><span class="p">:</span><span class="s2">"https://ACCOUNT_NAME.quadernoapp.com/invoice/7hef1rs7p3rm4l1nk"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pdf"</span><span class="p">:</span><span class="s2">"https://ACCOUNT_NAME.quadernoapp.com/invoice/7hef1rs7p3rm4l1nk.pdf"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://ACCOUNT_NAME.quadernoapp.com/api/invoices/507693322f412e0e2e0000da.json"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"custom_metadata"</span><span class="p">:{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><code>GET</code>ting from <code>/invoices/INVOICE_ID.json</code> will return that specific invoice.</p>

<p>If you have connected Quaderno with an external payment processor, you can also <code>GET /PROCESSOR/charges/PROCESSOR_ID.json</code> to get the Quaderno invoice for a particular charge. The processor part of the URL can be <code>stripe</code>, <code>paypal</code>, or <code>braintree</code>. </p>
<h3 id='update-an-invoice'>Update an invoice</h3>
<blockquote>
<p><code>PUT /invoices/INVOICE_ID.json</code></p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
     <span class="nt">-X</span> PUT <span class="se">\</span>
     <span class="nt">-d</span> <span class="s1">'{"notes":"You better pay this time, Tony."}'</span> <span class="se">\</span>
     <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/invoices/INVOICE_ID.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="ss">notes: </span><span class="s1">'You better pay this time, Tony.'</span>
<span class="p">}</span>
<span class="no">Quaderno</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="no">INVOICE_ID</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Invoice</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$invoice</span><span class="o">-&gt;</span><span class="na">notes</span> <span class="o">=</span> <span class="s1">'You better pay this time, Tony.'</span><span class="p">;</span>
<span class="nv">$invoice</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
</code></pre></div>
<p><code>PUT</code>ting to <code>/invoices/INVOICE_ID.json</code> will update the invoice with the passed parameters. No more than 200 items are allowed per request. If you need to update more use subsequent requests.</p>

<p>This will return <code>200 OK</code> along with the current JSON representation of the invoice if successful.</p>
<h3 id='delete-an-invoice'>Delete an invoice</h3>
<blockquote>
<p><code>DELETE /invoices/INVOICE_ID.json</code></p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-X</span> DELETE <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/invoices/INVOICE_ID.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="no">INVOICE_ID</span><span class="p">)</span> <span class="c1">#=&gt; Boolean</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$invoice</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">();</span>
</code></pre></div>
<p><code>DELETE</code>ing to <code>/invoices/INVOICE_ID.json</code> will delete the specified invoice and returns <code>204 No Content</code> if successful.</p>
<h3 id='deliver-an-invoice'>Deliver an invoice</h3><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY: <span class="se">\</span>
     <span class="nt">-X</span> GET <span class="se">\</span>
     <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/invoices/INVOICE_ID/deliver.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">invoice</span> <span class="o">=</span> <span class="no">Quaderno</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="no">INVOICE_ID</span><span class="p">)</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">deliver</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$invoice</span><span class="o">-&gt;</span><span class="na">deliver</span><span class="p">();</span> <span class="c1">// Return true (success) or false (error)</span>
</code></pre></div>
<p><code>GET</code>ting <code>/invoices/INVOICE_ID/deliver.json</code> will send the invoice to the assigned contact email. This will return <code>200 OK</code> if successful, along with a JSON representation of the invoice.</p>

<p>If the destination contact does not have an email address you will receive a <code>422 Unprocessable Entity</code> error.</p>

<h2 id='credits'>Credits</h2>
<p>A credit note is a reverse invoice; something to cancel out - partially or completely - an invoice you have issued in the past. It may be for the full amount of an invoice or it may be for less in the case of a partial refund.</p>
<h3 id='create-a-credit'>Create a credit</h3>
<blockquote>
<p><code>POST /credits.json</code></p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># body.json</span>
<span class="o">{</span>
  <span class="s2">"contact_id"</span>:<span class="s2">"5059bdbf2f412e0901000024"</span>,
  <span class="s2">"contact_name"</span>:<span class="s2">"STARK"</span>,
  <span class="s2">"po_number"</span>:<span class="s2">""</span>,
  <span class="s2">"currency"</span>:<span class="s2">"USD"</span>,
  <span class="s2">"tag_list"</span>:<span class="s2">"playboy, businessman"</span>,
  <span class="s2">"items_attributes"</span>:[
    <span class="o">{</span>
      <span class="s2">"description"</span>:<span class="s2">"Whiskey"</span>,
      <span class="s2">"quantity"</span>:<span class="s2">"1.0"</span>,
      <span class="s2">"unit_price"</span>:<span class="s2">"20.0"</span>,
      <span class="s2">"discount_rate"</span>:<span class="s2">"0.0"</span>,
      <span class="s2">"reference"</span>:<span class="s2">"item_code_X"</span>
    <span class="o">}</span>
  <span class="o">]</span>,
  <span class="s2">"custom_metadata"</span>:<span class="o">{</span>
    <span class="s2">"a_custom_key"</span>:<span class="s2">"a custom value"</span>
  <span class="o">}</span>
<span class="o">}</span>

curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
     <span class="nt">-X</span> POST <span class="se">\</span>
     <span class="nt">--data-binary</span> @body.json <span class="se">\</span>
     <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/credits.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$credit</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">QuadernoCredit</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
                                 <span class="s1">'po_number'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
                                 <span class="s1">'currency'</span> <span class="o">=&gt;</span> <span class="s1">'USD'</span><span class="p">,</span>
                                 <span class="s1">'tag_list'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'playboy'</span><span class="p">,</span> <span class="s1">'businessman'</span><span class="p">),</span>
                                 <span class="s1">'custom_metadata'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'a_custom_key'</span> <span class="o">=&gt;</span> <span class="s1">'a custom value'</span><span class="p">)));</span>
<span class="nv">$item</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">QuadernoDocumentItem</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
                               <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'Whiskey'</span><span class="p">,</span>
                               <span class="s1">'unit_price'</span> <span class="o">=&gt;</span> <span class="mf">20.0</span><span class="p">,</span>
                               <span class="s1">'reference'</span> <span class="o">=&gt;</span> <span class="s1">'ITEM_ID'</span><span class="p">,</span>
                               <span class="s1">'quantity'</span> <span class="o">=&gt;</span> <span class="mf">1.0</span><span class="p">));</span>
<span class="nv">$contact</span> <span class="o">=</span> <span class="nx">QuadernoContact</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="s1">'5059bdbf2f412e0901000024'</span><span class="p">);</span>

<span class="nv">$credit</span><span class="o">-&gt;</span><span class="na">addItem</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span>
<span class="nv">$credit</span><span class="o">-&gt;</span><span class="na">addContact</span><span class="p">(</span><span class="nv">$contact</span><span class="p">);</span>

<span class="nv">$credit</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span> <span class="c1">// Returns true (success) or false (error)</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">contact</span> <span class="o">=</span> <span class="no">Quaderno</span><span class="o">::</span><span class="no">Contact</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="s1">'50603e722f412e0435000024'</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Contact</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">contact_id: </span><span class="n">contact</span><span class="p">.</span><span class="nf">id</span><span class="p">,</span>
  <span class="ss">contact_name: </span><span class="s1">'STARK'</span><span class="p">,</span>
  <span class="ss">po_number: </span><span class="s1">''</span><span class="p">,</span>
  <span class="ss">currency: </span><span class="s1">'USD'</span><span class="p">,</span>
  <span class="ss">tag_list: </span><span class="p">[</span><span class="s1">'playboy'</span><span class="p">,</span> <span class="s1">'businessman'</span><span class="p">],</span>
  <span class="ss">items_attributes: </span><span class="p">[</span>
    <span class="p">{</span>
      <span class="ss">description: </span><span class="s1">'Whiskey'</span><span class="p">,</span>
      <span class="ss">quantity: </span><span class="s1">'1.0'</span><span class="p">,</span>
      <span class="ss">unit_price: </span><span class="s1">'20.0'</span><span class="p">,</span>
      <span class="ss">discount_rate: </span><span class="s1">'0.0'</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="ss">custom_metadata: </span><span class="p">{</span>
    <span class="ss">a_custom_key: </span><span class="s1">'a custom value'</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="no">Quaderno</span><span class="o">::</span><span class="no">Credit</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">params</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Credit</span>
</code></pre></div>
<p><code>POST</code>ing to <code>/credits.json</code> will create a new credit from the parameters passed.</p>

<p>This will return <code>201 Created</code> and the current JSON representation of the credit if the creation was a success, along with the location of the new credit in the <code>url</code> field.</p>
<h4 id='attributes'>Attributes</h4>

<table><thead>
<tr>
<th>Attribute</th>
<th>Mandatory</th>
<th>Type/Description</th>
</tr>
</thead><tbody>
<tr>
<td>document_id</td>
<td>no (highly recommendable)</td>
<td>ID. ID of a related Invoice or Receipt.</td>
</tr>
<tr>
<td>number</td>
<td>no</td>
<td>String(20 chars) Available for invoices, credit_notes, receipts and estimates. Automatic numbering is used by default. Validates uniqueness</td>
</tr>
<tr>
<td>issue_date</td>
<td>no</td>
<td>String(255 chars) Available for all except for <code>recurring</code>. Defaults to the current date. Format YYYY-MM-DD</td>
</tr>
<tr>
<td>po_number</td>
<td>no</td>
<td>String(255 chars)</td>
</tr>
<tr>
<td>due_date</td>
<td>no</td>
<td>String(255 chars) Available for invoices, expenses and credit notes. Format <code>YYYY-MM-DD</code></td>
</tr>
<tr>
<td>currency</td>
<td>no</td>
<td>String(3 chars) Defaults to the account currency. En formato ISO 4217</td>
</tr>
<tr>
<td>tag_list</td>
<td>no</td>
<td>String(255 chars). Multiple tags should be separated by commas</td>
</tr>
<tr>
<td>payment_details</td>
<td>no</td>
<td>Text</td>
</tr>
<tr>
<td>notes</td>
<td>no</td>
<td>Text</td>
</tr>
<tr>
<td>contact_id</td>
<td>(Mandatory if <code>contact</code> is not present)</td>
<td>ID</td>
</tr>
<tr>
<td>contact</td>
<td>(Mandatory if <code>contact_id</code> is not present)</td>
<td>Hash with a contact data for creation</td>
</tr>
<tr>
<td>country</td>
<td>no</td>
<td>String(2 chars) <code>ISO 3166-1 alpha-2</code>. Available for updates</td>
</tr>
<tr>
<td>street_line_1</td>
<td>no</td>
<td>String(255 chars). Available for updates</td>
</tr>
<tr>
<td>street_line_2</td>
<td>no</td>
<td>String(255 chars)</td>
</tr>
<tr>
<td>city</td>
<td>no</td>
<td>String(255 chars). Available for updates</td>
</tr>
<tr>
<td>region</td>
<td>no</td>
<td>String(255 chars). Available for updates</td>
</tr>
<tr>
<td>postal_code</td>
<td>no</td>
<td>String(255 chars). Available for updates</td>
</tr>
<tr>
<td>items_attributes</td>
<td><strong>yes</strong></td>
<td>Array of document items (check available attributes for document items below). No more than 200 items are allowed in a request. To add more use subsequent update requests. Maximum items per document are limited up to 1000 items.</td>
</tr>
<tr>
<td>payment_method</td>
<td>no</td>
<td>Create a paid document in a single request. One of the following: <code>credit_card</code>, <code>cash</code>, <code>wire_transfer</code>, <code>direct_debit</code>, <code>check</code>, <code>promissory_note</code>, <code>iou</code>, <code>paypal</code> or <code>other</code></td>
</tr>
<tr>
<td>payment_processor</td>
<td>no</td>
<td>Payment processor that you used to process the payment.</td>
</tr>
<tr>
<td>payment_processor_id</td>
<td>no</td>
<td>The <code>id</code> that the payment processor assigned to the payment.</td>
</tr>
<tr>
<td>custom_metadata</td>
<td>no</td>
<td>Key-value data. You can have up to 20 keys, with key names up to 40 characters long and values up to 500 characters long.</td>
</tr>
</tbody></table>

<aside class="notice">
If you pass a `contact` JSON object instead of a `contact_id`, and the email or first and last name combination does not match any of your existing credits, a new one will be created, otherwise a new credit will be created for the existing credit.<br /><br />

<p>Please note that you can pass <strong>either</strong> credit_id or credit, but if you pass both then results may not be what you expect.</p>

<p>Allowed contact fields are the same as when creating a contact via the dedicated <a href="#credits">Contacts API</a>.</p>
</aside>

<h4 id='document-item-attributes'>Document Item Attributes</h4>

<table><thead>
<tr>
<th>Attribute</th>
<th>Mandatory</th>
<th>Type/Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>no</td>
<td>ID. Available only for updates</td>
</tr>
<tr>
<td>description</td>
<td><strong>yes</strong></td>
<td>String(255 chars)</td>
</tr>
<tr>
<td>quantity</td>
<td>no</td>
<td>Decimal. Defaults to 1.0</td>
</tr>
<tr>
<td>unit_price</td>
<td><strong>yes</strong></td>
<td>Decimal</td>
</tr>
<tr>
<td>total_amount</td>
<td>Mandatory if <code>unit_price</code> is not present</td>
<td>Decimal. Cents version available as <code>total_amount_cents</code></td>
</tr>
<tr>
<td>discount_rate</td>
<td>no</td>
<td>Decimal</td>
</tr>
<tr>
<td>tax_1_name</td>
<td>Mandatory if <code>tax_1_rate</code> is present</td>
<td>String(255 chars)</td>
</tr>
<tr>
<td>tax_1_rate</td>
<td>Mandatory if <code>tax_1_name</code> is present</td>
<td>Decimal between -100.00 and 100.00 (not included)</td>
</tr>
<tr>
<td>tax_1_country</td>
<td>no</td>
<td>String(2 chars). Defaults to the contact&#39;s country</td>
</tr>
<tr>
<td>tax_1_region</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for Canadian or United States taxes.</td>
</tr>
<tr>
<td>tax_1_county</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_1_city</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_1_county_code</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_1_city_code</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_1_transaction_type</td>
<td>no</td>
<td>String. Accepts <code>eservice</code>, <code>ebook</code> or <code>standard</code>. Defaults to your account &quot;default tax type&quot;.</td>
</tr>
<tr>
<td>tax_2_name</td>
<td>Mandatory if <code>tax_2_rate</code> is present</td>
<td>String(255 chars)</td>
</tr>
<tr>
<td>tax_2_rate</td>
<td>Mandatory if <code>tax_2_name</code> is present</td>
<td>Decimal between -100.00 and 100.00 (not included)</td>
</tr>
<tr>
<td>tax_2_country</td>
<td>no</td>
<td>String(2 chars). Defaults to the contact&#39;s country</td>
</tr>
<tr>
<td>tax_2_region</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for Canadian or United States taxes.</td>
</tr>
<tr>
<td>tax_2_county</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_2_city</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_2_county_code</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_2_city_code</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_2_transaction_type</td>
<td>no</td>
<td>String. Accepts <code>eservice</code>, <code>ebook</code> or <code>standard</code>. Defaults to your account &quot;default tax type&quot;.</td>
</tr>
<tr>
<td>reference</td>
<td>no</td>
<td>String(255 chars) Code (<code>code</code>) of an existing item. <strong>If present none of the mandatory attributes are mandatory (as you are referencing an item that already exists)</strong></td>
</tr>
<tr>
<td>_destroy</td>
<td>no</td>
<td>Set it to 1 if you want to remove the document item selected by ID. Available only for updates</td>
</tr>
</tbody></table>

<h4 id='create-a-credit-note-from-an-existing-invoice-or-receipt'>Create a credit note from an existing invoice or receipt</h4>

<p>Alternatively, you can create a credit note for the full amount of the original invoice or receipt by sending the parameter <code>invoice_id</code> with the ID of the invoice or receipt you want to refund rather than all the credit note attributes in the body.</p>

<h4 id='credit-states'>Credit States</h4>

<p>Possible credit states are:</p>

<ul>
<li><code>outstanding</code></li>
<li><code>paid</code></li>
<li><code>late</code></li>
<li><code>archived</code></li>
</ul>

<h4 id='create-an-attachment-during-credit-creation'>Create an attachment during credit creation</h4><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"attachment"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="s2">"aBaSe64EnCoDeDFiLe"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"filename"</span><span class="p">:</span><span class="s2">"the_filename.png"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Optionally, you can pass an attachment hash along with the rest of the parameters.</p>

<p>Fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>data</code></td>
<td>Contains a Base64 encoded string which represents the file.</td>
</tr>
<tr>
<td><code>filename</code></td>
<td>The attachment file name.</td>
</tr>
</tbody></table>

<p>Valid file extensions are <code>pdf</code>, <code>txt</code>, <code>jpeg</code>, <code>jpg</code>, <code>png</code>, <code>xml</code>, <code>xls</code>, <code>doc</code>, <code>rtf</code> and <code>html</code>. Any other format will stop credit creation and return a <code>422 Unprocessable Entity</code> error.</p>
<h3 id='retrieve-get-and-filter-all-credits'>Retrieve: Get and filter all credits</h3>
<blockquote>
<p><code>GET /credits.json</code></p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-X</span> GET <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/credits.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Credit</span><span class="p">.</span><span class="nf">all</span><span class="p">()</span> <span class="c1">#=&gt; Array</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$credits</span> <span class="o">=</span> <span class="nx">QuadernoCredit</span><span class="o">::</span><span class="na">find</span><span class="p">();</span> <span class="c1">// Returns an array of QuadernoCredit</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"507693322f412e0e2e00000f"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"number"</span><span class="p">:</span><span class="s2">"0000047"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"issue_date"</span><span class="p">:</span><span class="s2">"2012-10-11"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="s2">"1325376000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"related_document"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">977</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"Invoice"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"contact"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"5073f9c22f412e02d0000032"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"full_name"</span><span class="p">:</span><span class="s2">"Garfield"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"street_line_1"</span><span class="p">:</span><span class="s2">"Street 23"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"street_line_2"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"city"</span><span class="p">:</span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"region"</span><span class="p">:</span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="s2">"10203"</span><span class="w">
    </span><span class="nl">"po_number"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"due_date"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"exchange_rate"</span><span class="p">:</span><span class="s2">"0.680309"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"48151623429"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"lasagna"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quantity"</span><span class="p">:</span><span class="s2">"25.0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"unit_price_cents"</span><span class="p">:</span><span class="s2">"375"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"discount_rate"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_1_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_1_rate"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_2_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_2_rate"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reference"</span><span class="p">:</span><span class="s2">"Awesome!"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"9375"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"gross_amount_cents"</span><span class="p">:</span><span class="s2">"9375"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"9375"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"taxes"</span><span class="p">:[],</span><span class="w">
    </span><span class="nl">"total_cents"</span><span class="p">:</span><span class="s2">"9375"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payments"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"50aca7d92f412eda5200002c"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"date"</span><span class="p">:</span><span class="s2">"2012-11-21"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="s2">"credit_card"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"payment_processor"</span><span class="p">:</span><span class="s2">"stripe"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"payment_processor_id"</span><span class="p">:</span><span class="s2">"ch_19yUdh2eZvKYlo2CkFVBOZG7"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount_cents"</span><span class="p">:</span><span class="s2">"9375"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://my-account.quadernoapp.com/api/credits/507693322f412e0e2e00000f/payments/50aca7d92f412eda5200002c.json"</span><span class="w">
      </span><span class="p">},</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="s2">"Ask Jon"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"notes"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"paid"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tag_list"</span><span class="p">:[</span><span class="s2">"lasagna"</span><span class="p">,</span><span class="w"> </span><span class="s2">"cat"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"secure_id"</span><span class="p">:</span><span class="s2">"7hef1rs7p3rm4l1nk"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"permalink"</span><span class="p">:</span><span class="s2">"https://quadernoapp.com/credit/7hef1rs7p3rm4l1nk"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pdf"</span><span class="p">:</span><span class="s2">"https://quadernoapp.com/credit/7hef1rs7p3rm4l1nk.pdf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://my-account.quadernoapp.com/api/credits/507693322f412e0e2e00000f"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"custom_metadata"</span><span class="p">:{}</span><span class="w">
  </span><span class="p">},</span><span class="w">

  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"507693322f412e0e2e0000da"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"number"</span><span class="p">:</span><span class="s2">"0000047"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"issue_date"</span><span class="p">:</span><span class="s2">"2012-10-11"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="s2">"1325376020"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"related_document"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">978</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"Invoice"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"contact"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"5073f9c22f412e02d00004cf"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"full_name"</span><span class="p">:</span><span class="s2">"Teenage Mutant Ninja Turtles"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"street_line_1"</span><span class="p">:</span><span class="s2">"Melrose Ave, Sewer #3"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"street_line_2"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"city"</span><span class="p">:</span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"region"</span><span class="p">:</span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"po_number"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"due_date"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"exchange_rate"</span><span class="p">:</span><span class="s2">"0.680309"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"481516234291"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"pizza"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quantity"</span><span class="p">:</span><span class="s2">"15.0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"unit_price_cents"</span><span class="p">:</span><span class="s2">"6000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"discount_rate"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_1_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_1_rate"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_2_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_2_rate"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reference"</span><span class="p">:</span><span class="s2">"Even the bad ones taste good!"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"6000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"gross_amount_cents"</span><span class="p">:</span><span class="s2">"6000"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"6000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"taxes"</span><span class="p">:[],</span><span class="w">
    </span><span class="nl">"total_cents"</span><span class="p">:</span><span class="s2">"6000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payments"</span><span class="p">:[],</span><span class="w">
    </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"notes"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"outstanding"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tag_list"</span><span class="p">:[</span><span class="s2">"pizza"</span><span class="p">,</span><span class="w"> </span><span class="s2">"turtles"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"secure_id"</span><span class="p">:</span><span class="s2">"7hes3c0ndp3rm4l1nk"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"permalink"</span><span class="p">:</span><span class="s2">"https://my-account.quadernoapp.com/credit/7hes3c0ndp3rm4l1nk"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pdf"</span><span class="p">:</span><span class="s2">"https://my-account.quadernoapp.com/credit/7hes3c0ndp3rm4l1nk.pdf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://my-account.quadernoapp.com/api/credits/507693322f412e0e2e0000da"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"custom_metadata"</span><span class="p">:{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p><code>GET</code>ting from <code>/credits.json</code> will return all the user&#39;s credits.</p>

<p>You can filter the results in a few ways:</p>

<ul>
<li>By <code>number</code>, <code>contact_name</code> or <code>po_number</code> by passing the <code>q</code> parameter in the url like <code>?q=KEYWORD</code>.</li>
<li>By date range, passing the <code>date</code> parameter in the url like <code>?date=DATE1,DATE2</code>. Date range allows these formats: <code>2019-01-01,2019-12-31</code> or <code>2019/01/01,2019/12/31</code>.</li>
<li>By state, passing the <code>state</code> parameter like <code>?state=STATE</code>.</li>
<li>By contact, passing the contact ID in the <code>contact</code> parameter, like <code>?contact=3231</code>.</li>
</ul>
<h3 id='retrieve-get-a-single-credit'>Retrieve: Get a single credit</h3>
<blockquote>
<p><code>GET /credits/CREDIT_ID.json</code></p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\_</span>cents
    <span class="nt">-X</span> GET <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/credits/CREDIT_ID.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Credit</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="no">CREDIT_ID</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Credit</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$credit</span> <span class="o">=</span> <span class="nx">QuadernoCredit</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="s1">'CREDIT_ID'</span><span class="p">);</span> <span class="c1">// Returns a QuadernoCredit</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"507693322f412e0e2e0000da"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"number"</span><span class="p">:</span><span class="s2">"0000047"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"issue_date"</span><span class="p">:</span><span class="s2">"2012-10-11"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="s2">"1325376000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"contact"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"5073f9c22f412e02d00004cf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"full_name"</span><span class="p">:</span><span class="s2">"Teenage Mutant Ninja Turtles"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"street_line_1"</span><span class="p">:</span><span class="s2">"Melrose Ave, Sewer #3"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"street_line_2"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"city"</span><span class="p">:</span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"region"</span><span class="p">:</span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"po_number"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"due_date"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"exchange_rate"</span><span class="p">:</span><span class="s2">"0.680309"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"48151623429"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"pizza"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="s2">"15.0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"unit_price_cents"</span><span class="p">:</span><span class="s2">"6000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"discount_rate"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax_1_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax_1_rate"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax_2_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax_2_rate"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reference"</span><span class="p">:</span><span class="s2">"Even the bad ones taste good!"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"6000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"gross_amount_cents"</span><span class="p">:</span><span class="s2">"6000"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"6000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"taxes"</span><span class="p">:[],</span><span class="w">
  </span><span class="nl">"total_cents"</span><span class="p">:</span><span class="s2">"6000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payments"</span><span class="p">:[],</span><span class="w">
  </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"notes"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"outstanding"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag_list"</span><span class="p">:[</span><span class="s2">"lasagna"</span><span class="p">,</span><span class="w"> </span><span class="s2">"cat"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"secure_id"</span><span class="p">:</span><span class="s2">"7hef1rs7p3rm4l1nk"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"permalink"</span><span class="p">:</span><span class="s2">"https://my-account.quadernoapp.com/credit/7hef1rs7p3rm4l1nk"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pdf"</span><span class="p">:</span><span class="s2">"https://my-account.quadernoapp.com/credit/7hef1rs7p3rm4l1nk.pdf"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://my-account.quadernoapp.com/api/credits/507693322f412e0e2e0000da"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"custom_metadata"</span><span class="p">:{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><code>GET</code>ting from <code>/credits/CREDIT_ID.json</code> will return that specific credit.</p>
<h3 id='update-a-credit'>Update a credit</h3>
<blockquote>
<p><code>PUT /credits/CREDIT_ID.json</code></p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># body.json</span>
<span class="o">{</span>
  <span class="s2">"tag_list"</span>:<span class="s2">"whiskey, alcohol"</span>,
  <span class="s2">"notes"</span>:<span class="s2">"You better pay this time, Tony"</span>,
  <span class="s2">"region"</span>:<span class="s2">"Genosha"</span>,
  <span class="s2">"custom_metadata"</span>:<span class="o">{</span><span class="s2">"memo"</span>:<span class="s2">"I think he is not paying again."</span><span class="o">}</span>
<span class="o">}</span>

curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
     <span class="nt">-X</span> PUT <span class="se">\</span>
     <span class="nt">--data-binary</span> @body.json <span class="se">\</span>
     <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/credits/CREDIT_ID.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">tag_list: </span><span class="p">[</span><span class="s1">'whiskey'</span><span class="p">,</span> <span class="s1">'alcohol'</span><span class="p">],</span>
  <span class="ss">notes: </span><span class="s1">'You better pay this time, Tony'</span><span class="p">,</span>
  <span class="ss">region: </span><span class="s1">'Genosha'</span><span class="p">,</span>
  <span class="ss">custom_metadata: </span><span class="p">{</span>
    <span class="ss">memo: </span><span class="s1">'I think he is not paying again.'</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="no">Quaderno</span><span class="o">::</span><span class="no">Credit</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="no">CREDIT_ID</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Credit</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$credit</span><span class="o">-&gt;</span><span class="na">tag_list</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"whiskey"</span><span class="p">,</span> <span class="s2">"alcohol"</span><span class="p">);</span>
<span class="nv">$credit</span><span class="o">-&gt;</span><span class="na">notes</span> <span class="o">=</span> <span class="s2">"You better pay this time, Tony"</span><span class="p">;</span>
<span class="nv">$credit</span><span class="o">-&gt;</span><span class="na">region</span> <span class="o">=</span> <span class="s2">"Genosha"</span><span class="p">;</span>
<span class="nv">$credit</span><span class="o">-&gt;</span><span class="na">custom_metadata</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"memo"</span> <span class="o">=&gt;</span> <span class="s2">"I think he is not paying again."</span><span class="p">);</span>

<span class="nv">$credit</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
</code></pre></div>
<p><code>PUT</code>ting to <code>/credits/CREDIT_ID.json</code> will update the credit with the passed parameters.</p>

<p>This will return <code>200 OK</code> along with the current JSON representation of the credit if successful.</p>
<h3 id='delete-a-credit'>Delete a credit</h3>
<blockquote>
<p><code>DELETE /credits/CREDIT_ID.json</code></p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-X</span> DELETE <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/credits/CREDIT_ID.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Credit</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="no">CREDIT_ID</span><span class="p">)</span> <span class="c1">#=&gt; Boolean</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$credit</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">();</span>
</code></pre></div>
<p><code>DELETE</code>ing to <code>/credit/CREDIT_ID.json</code> will delete the specified credit and returns <code>204 No Content</code> if successful.</p>
<h3 id='deliver-a-credit'>Deliver a credit</h3>
<p><code>GET</code>ting <code>/credits/CREDIT_ID/deliver.json</code> will send the invoice to the assigned contact email. This will return <code>200 OK</code> if successful, along with a JSON representation of the invoice.</p>

<p>If the destination contact does not have an email address you will receive a <code>422 Unprocessable Entity</code> error.</p>

<h2 id='expenses'>Expenses</h2>
<p>Expenses are all the invoices that you receive from your vendors.</p>
<h3 id='create-an-expense'>Create an expense</h3>
<blockquote>
<p><code>POST /expenses.json</code></p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># body.json</span>
<span class="o">{</span>
  <span class="s2">"contact_id"</span>:<span class="s2">"5059bdbf2f412e0901000024"</span>,
  <span class="s2">"contact_name"</span>:<span class="s2">"ACME"</span>,
  <span class="s2">"currency"</span>:<span class="s2">"USD"</span>,
  <span class="s2">"items_attributes"</span>:[
    <span class="o">{</span>
    <span class="s2">"description"</span>:<span class="s2">"Rocket launcher"</span>,
    <span class="s2">"quantity"</span>:<span class="s2">"1.0"</span>,
    <span class="s2">"unit_price"</span>:<span class="s2">"0.0"</span>,
    <span class="s2">"discount_rate"</span>:<span class="s2">"0.0"</span>,
    <span class="s2">"reference"</span>:<span class="s2">"item_code_X"</span>
    <span class="o">}</span>
  <span class="o">]</span>,
  <span class="s2">"custom_metadata"</span>:<span class="o">{</span>
    <span class="s2">"a_custom_key"</span>:<span class="s2">"a custom value"</span>
  <span class="o">}</span>
<span class="o">}</span>

curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
     <span class="nt">-X</span> POST <span class="se">\</span>
     <span class="nt">--data-binary</span> @body.json <span class="se">\ </span>    <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/expenses.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$expense</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">QuadernoExpense</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
                                 <span class="s1">'po_number'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
                                 <span class="s1">'currency'</span> <span class="o">=&gt;</span> <span class="s1">'USD'</span><span class="p">,</span>
                                 <span class="s1">'tag_list'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'playboy'</span><span class="p">,</span> <span class="s1">'businessman'</span><span class="p">),</span>
                                 <span class="s1">'custom_metadata'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'a_custom_key'</span> <span class="o">=&gt;</span> <span class="s1">'a custom value'</span><span class="p">)));</span>
<span class="nv">$item</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">QuadernoDocumentItem</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
                               <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'Rocket launcher'</span><span class="p">,</span>
                               <span class="s1">'unit_price'</span> <span class="o">=&gt;</span> <span class="mf">0.0</span><span class="p">,</span>
                               <span class="s1">'discount_rate'</span> <span class="o">=&gt;</span> <span class="mf">0.0</span><span class="p">,</span>
                               <span class="s1">'reference'</span> <span class="o">=&gt;</span> <span class="s2">"ITEM_ID"</span><span class="p">,</span>
                               <span class="s1">'quantity'</span> <span class="o">=&gt;</span> <span class="mf">1.0</span><span class="p">));</span>
<span class="nv">$contact</span> <span class="o">=</span> <span class="nx">QuadernoContact</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="s1">'5059bdbf2f412e0901000024'</span><span class="p">);</span>

<span class="nv">$expense</span><span class="o">-&gt;</span><span class="na">addItem</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span>
<span class="nv">$expense</span><span class="o">-&gt;</span><span class="na">addContact</span><span class="p">(</span><span class="nv">$contact</span><span class="p">);</span>

<span class="nv">$expense</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span> <span class="c1">// Returns true (success) or false (error)</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">contact</span> <span class="o">=</span> <span class="no">Quaderno</span><span class="o">::</span><span class="no">Contact</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="s1">'5059bdbf2f412e0901000024'</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Contact</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">contact_id: </span><span class="n">contact</span><span class="p">.</span><span class="nf">id</span>
  <span class="ss">currency: </span><span class="s1">'USD'</span><span class="p">,</span>
  <span class="ss">tag_list: </span><span class="p">[</span><span class="s1">'playboy'</span><span class="p">,</span> <span class="s1">'businessman'</span><span class="p">],</span>
  <span class="ss">items_attributes: </span><span class="p">[</span>
    <span class="p">{</span>
      <span class="ss">description: </span><span class="s1">'Rocket launcher'</span><span class="p">,</span>
      <span class="ss">quantity: </span><span class="s1">'1.0'</span><span class="p">,</span>
      <span class="ss">unit_price: </span><span class="s1">'0.0'</span><span class="p">,</span>
      <span class="ss">discount_rate: </span><span class="s1">'0.0'</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="ss">custom_metadata: </span><span class="p">{</span>
    <span class="ss">a_custom_key: </span><span class="s1">'a custom value'</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="n">invoice</span> <span class="o">=</span> <span class="no">Quaderno</span><span class="o">::</span><span class="no">Expense</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">params</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Expense</span>
</code></pre></div>
<p><code>POST</code>ing to <code>/expenses.json</code> will create a new expense from the parameters passed.</p>

<p>This will return <code>201 Created</code> and the current JSON representation of the expense if the creation was a success, along with the location of the new expense in the <code>url</code> field.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Mandatory</th>
<th>Type/Description</th>
</tr>
</thead><tbody>
<tr>
<td>number</td>
<td>no</td>
<td>String(20 chars) Available for invoices, credit_notes, receipts and estimates. Automatic numbering is used by default. Validates uniqueness</td>
</tr>
<tr>
<td>issue_date</td>
<td>no</td>
<td>String(255 chars) Available for all except for <code>recurring</code>. Defaults to the current date. Format YYYY-MM-DD</td>
</tr>
<tr>
<td>po_number</td>
<td>no</td>
<td>String(255 chars)</td>
</tr>
<tr>
<td>due_date</td>
<td>no</td>
<td>String(255 chars) Available for invoices, expenses and credit notes. Format <code>YYYY-MM-DD</code></td>
</tr>
<tr>
<td>currency</td>
<td>no</td>
<td>String(3 chars) Defaults to the account currency. En formato ISO 4217</td>
</tr>
<tr>
<td>tag_list</td>
<td>no</td>
<td>String(255 chars). Multiple tags should be separated by commas</td>
</tr>
<tr>
<td>payment_details</td>
<td>no</td>
<td>Text</td>
</tr>
<tr>
<td>notes</td>
<td>no</td>
<td>Text</td>
</tr>
<tr>
<td>contact_id</td>
<td>(Mandatory if <code>contact</code> is not present)</td>
<td>ID</td>
</tr>
<tr>
<td>contact</td>
<td>(Mandatory if <code>contact_id</code> is not present)</td>
<td>Hash with a contact data for creation</td>
</tr>
<tr>
<td>country</td>
<td>no</td>
<td>String(2 chars) <code>ISO 3166-1 alpha-2</code>. Available for updates</td>
</tr>
<tr>
<td>street_line_1</td>
<td>no</td>
<td>String(255 chars). Available for updates</td>
</tr>
<tr>
<td>street_line_2</td>
<td>no</td>
<td>String(255 chars)</td>
</tr>
<tr>
<td>city</td>
<td>no</td>
<td>String(255 chars). Available for updates</td>
</tr>
<tr>
<td>region</td>
<td>no</td>
<td>String(255 chars). Available for updates</td>
</tr>
<tr>
<td>postal_code</td>
<td>no</td>
<td>String(255 chars). Available for updates</td>
</tr>
<tr>
<td>items_attributes</td>
<td><strong>yes</strong></td>
<td>Array of document items (check available attributes for document items below). No more than 200 items are allowed in a request. To add more use subsequent update requests. Maximum items per document are limited up to 1000 items.</td>
</tr>
<tr>
<td>payment_method</td>
<td>no</td>
<td>Create a paid document in a single request. One of the following: <code>credit_card</code>, <code>cash</code>, <code>wire_transfer</code>, <code>direct_debit</code>, <code>check</code>, <code>promissory_note</code>, <code>iou</code>, <code>paypal</code> or <code>other</code></td>
</tr>
<tr>
<td>payment_processor</td>
<td>no</td>
<td>Payment processor that you used to process the payment.</td>
</tr>
<tr>
<td>payment_processor_id</td>
<td>no</td>
<td>The <code>id</code> that the payment processor assigned to the payment.</td>
</tr>
<tr>
<td>custom_metadata</td>
<td>no</td>
<td>Key-value data. You can have up to 20 keys, with key names up to 40 characters long and values up to 500 characters long.</td>
</tr>
</tbody></table>

<aside class="notice">
If you pass a `contact` JSON object instead of a `contact_id`, and the email or first and last name combination does not match any of your existing contacts, a new one will be created, otherwise a new expense will be created for the existing contact. Only a `contact` object OR a `contact_id` property should be passed in the same call.<br /><br />

<p>Please note that you can pass <strong>either</strong> contact_id or contact, but if you pass both then results may not be what you expect.</p>

<p>Allowed contact fields are the same as when creating a contact via the dedicated <a href="#contacts">Contacts API</a>.</p>
</aside>
<h4 id='document-item-attributes'>Document Item Attributes</h4>

<table><thead>
<tr>
<th>Attribute</th>
<th>Mandatory</th>
<th>Type/Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>no</td>
<td>ID. Available only for updates</td>
</tr>
<tr>
<td>description</td>
<td><strong>yes</strong></td>
<td>String(255 chars)</td>
</tr>
<tr>
<td>quantity</td>
<td>no</td>
<td>Decimal. Defaults to 1.0</td>
</tr>
<tr>
<td>unit_price</td>
<td><strong>yes</strong></td>
<td>Decimal</td>
</tr>
<tr>
<td>total_amount</td>
<td>Mandatory if <code>unit_price</code> is not present</td>
<td>Decimal</td>
</tr>
<tr>
<td>discount_rate</td>
<td>no</td>
<td>Decimal</td>
</tr>
<tr>
<td>tax_1_name</td>
<td>Mandatory if <code>tax_1_rate</code> is present</td>
<td>String(255 chars)</td>
</tr>
<tr>
<td>tax_1_rate</td>
<td>Mandatory if <code>tax_1_name</code> is present</td>
<td>Decimal between -100.00 and 100.00 (not included)</td>
</tr>
<tr>
<td>tax_1_country</td>
<td>no</td>
<td>String(2 chars). Defaults to the contact&#39;s country</td>
</tr>
<tr>
<td>tax_1_region</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for Canadian or United States taxes.</td>
</tr>
<tr>
<td>tax_2_county</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_2_city</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_2_county_code</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_2_city_code</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_2_transaction_type</td>
<td>no</td>
<td>String. Accepts <code>eservice</code>, <code>ebook</code> or <code>standard</code>. Defaults to your account &quot;default tax type&quot;.</td>
</tr>
<tr>
<td>tax_2_name</td>
<td>Mandatory if <code>tax_2_rate</code> is present</td>
<td>String(255 chars)</td>
</tr>
<tr>
<td>tax_2_rate</td>
<td>Mandatory if <code>tax_2_name</code> is present</td>
<td>Decimal between -100.00 and 100.00 (not included)</td>
</tr>
<tr>
<td>tax_2_country</td>
<td>no</td>
<td>String(2 chars). Defaults to the contact&#39;s country</td>
</tr>
<tr>
<td>tax_2_region</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for Canadian or United States taxes.</td>
</tr>
<tr>
<td>tax_2_county</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_2_city</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_2_county_code</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_2_city_code</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_2_transaction_type</td>
<td>no</td>
<td>String. Accepts <code>eservice</code>, <code>ebook</code> or <code>standard</code>. Defaults to your account &quot;default tax type&quot;.</td>
</tr>
<tr>
<td>reference</td>
<td>no</td>
<td>String(255 chars) Code (<code>code</code>) of an existing item. <strong>If present none of the mandatory attributes are mandatory (as you are referencing an item that already exists)</strong></td>
</tr>
<tr>
<td>_destroy</td>
<td>no</td>
<td>Set it to 1 if you want to remove the document item selected by ID. Available only for updates</td>
</tr>
</tbody></table>

<h4 id='expense-states'>Expense States</h4>

<p>Possible expense states are:</p>

<ul>
<li><code>outstanding</code></li>
<li><code>paid</code></li>
<li><code>late</code></li>
<li><code>archived</code></li>
</ul>

<h4 id='create-an-attachment-during-expense-creation'>Create an attachment during expense creation</h4><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"attachment"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="s2">"aBaSe64EnCoDeDFiLe"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"filename"</span><span class="p">:</span><span class="s2">"the_filename.png"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Optionally, you can pass an attachment hash along with the rest of the parameters.</p>

<p>Fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>data</code></td>
<td>Contains a Base64 encoded string which represents the file.</td>
</tr>
<tr>
<td><code>filename</code></td>
<td>The attachment file name.</td>
</tr>
</tbody></table>

<p>Valid file extensions are <code>pdf</code>, <code>txt</code>, <code>jpeg</code>, <code>jpg</code>, <code>png</code>, <code>xml</code>, <code>xls</code>, <code>doc</code>, <code>rtf</code> and <code>html</code>. Any other format will stop expense creation and return a <code>422 Unprocessable Entity</code> error.</p>
<h3 id='retrieve-get-and-filter-all-expenses'>Retrieve: Get and filter all expenses</h3>
<blockquote>
<p><code>GET /expenses.json</code></p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-X</span> GET <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/expenses.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Expense</span><span class="p">.</span><span class="nf">all</span><span class="p">()</span> <span class="c1">#=&gt; Array</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$expenses</span> <span class="o">=</span> <span class="nx">QuadernoExpense</span><span class="o">::</span><span class="na">find</span><span class="p">();</span> <span class="c1">// Returns an array of QuadernoExpense</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"5076a6b92f412e0e2e00006c"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"issue_date"</span><span class="p">:</span><span class="s2">"2012-10-11"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="s2">"1325376000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"contact"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"5059bdbf2f412e0901000024"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"full_name"</span><span class="p">:</span><span class="s2">"ACME"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"street_line_1"</span><span class="p">:</span><span class="s2">"Verizon Center"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"street_line_2"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"city"</span><span class="p">:</span><span class="s2">"Washington DC"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"region"</span><span class="p">:</span><span class="s2">"Washington DC"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"po_number"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"exchange_rate"</span><span class="p">:</span><span class="s2">"0.680309"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"48151623423"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"Rockets"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quantity"</span><span class="p">:</span><span class="s2">"50.0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"unit_price_cents"</span><span class="p">:</span><span class="s2">"12500"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"discount_rate"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_1_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_1_rate"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_2_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_2_rate"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"625000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"gross_amount_cents"</span><span class="p">:</span><span class="s2">"625000"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"625000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"taxes"</span><span class="p">:[],</span><span class="w">
    </span><span class="nl">"total_cents"</span><span class="p">:</span><span class="s2">"625000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payments"</span><span class="p">:[],</span><span class="w">
    </span><span class="nl">"tag_list"</span><span class="p">:[</span><span class="s2">"rockets"</span><span class="p">,</span><span class="w"> </span><span class="s2">"acme"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"notes"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"outstanding"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://my-account.quadernoapp.com/api/expenses/5076a6b92f412e0e2e00006c"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"custom_metadata"</span><span class="p">:{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"5076a6b92f412e0e2e00016d"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"issue_date"</span><span class="p">:</span><span class="s2">"2012-10-11"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="s2">"1325376020"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"contact"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"5059bdbf2f412e0901000024"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"full_name"</span><span class="p">:</span><span class="s2">"ACME"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"street_line_1"</span><span class="p">:</span><span class="s2">"Verizon Center"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"street_line_2"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"city"</span><span class="p">:</span><span class="s2">"Washington DC"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"region"</span><span class="p">:</span><span class="s2">"Washington DC"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"po_number"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"exchange_rate"</span><span class="p">:</span><span class="s2">"0.680309"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">" 48151623424"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"TNT"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"unit_price_cents"</span><span class="p">:</span><span class="s2">"2500"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"discount_rate"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax_1_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax_1_rate"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax_2_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax_2_rate"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"250000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"gross_amount_cents"</span><span class="p">:</span><span class="s2">"250000"</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"250000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"taxes"</span><span class="p">:[],</span><span class="w">
    </span><span class="nl">"total_cents"</span><span class="p">:</span><span class="s2">"250000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payments"</span><span class="p">:[],</span><span class="w">
    </span><span class="nl">"tag_list"</span><span class="p">:[</span><span class="s2">"tnt"</span><span class="p">,</span><span class="w"> </span><span class="s2">"acme"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"notes"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"outstanding"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://my-account.quadernoapp.com/api/expenses/5076a6b92f412e0e2e00016d"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"custom_metadata"</span><span class="p">:{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p><code>GET</code>ting from <code>/expenses.json</code> will return all the user&#39;s expenses.</p>

<p>You can filter the results in a few ways:</p>

<ul>
<li>By <code>contact_name</code> or <code>po_number</code> by passing the <code>q</code> parameter in the url like <code>?q=KEYWORD</code>.</li>
<li>By date range, passing the <code>date</code> parameter in the url like <code>?date=DATE1,DATE2</code>. Date range allows these formats: <code>2019-01-01,2019-12-31</code> or <code>2019/01/01,2019/12/31</code>.</li>
<li>By state, passing the <code>state</code> parameter like <code>?state=STATE</code>.</li>
<li>By specific vendor, passing the vendor ID in the <code>contact</code> parameter, like <code>?contact=3231</code>.</li>
</ul>
<h3 id='retrieve-get-a-single-expense'>Retrieve: Get a single expense</h3>
<blockquote>
<p><code>GET /expenses/EXPENSE_ID.json</code></p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-X</span> GET <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/expenses/EXPENSE_ID.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">expense</span> <span class="o">=</span> <span class="no">Quaderno</span><span class="o">::</span><span class="no">Expense</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="no">EXPENSE_ID</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Expense</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$expense</span> <span class="o">=</span> <span class="nx">QuadernoExpense</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="s1">'EXPENSE_ID'</span><span class="p">);</span> <span class="c1">// Returns a QuadernoExpense</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"5076a6b92f412e0e2e00006c"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"issue_date"</span><span class="p">:</span><span class="s2">"2012-10-11"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="s2">"1325376000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"contact"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"5059bdbf2f412e0901000024"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"full_name"</span><span class="p">:</span><span class="s2">"ACME"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"street_line_1"</span><span class="p">:</span><span class="s2">"Verizon Center"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"street_line_2"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"city"</span><span class="p">:</span><span class="s2">"Washington DC"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"region"</span><span class="p">:</span><span class="s2">"Washington DC"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"po_number"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"48151623423"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"Rockets"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="s2">"50.0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"unit_price_cents"</span><span class="p">:</span><span class="s2">"12500"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"discount_rate"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax_1_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax_1_rate"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax_2_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax_2_rate"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"625000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"gross_amount_cents"</span><span class="p">:</span><span class="s2">"625000"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"625000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"taxes"</span><span class="p">:[],</span><span class="w">
  </span><span class="nl">"total_cents"</span><span class="p">:</span><span class="s2">"625000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payments"</span><span class="p">:[],</span><span class="w">
  </span><span class="nl">"tag_list"</span><span class="p">:[</span><span class="s2">"rockets"</span><span class="p">,</span><span class="w"> </span><span class="s2">"acme"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"notes"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"outstanding"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://my-account.quadernoapp.com/api/expenses/5076a6b92f412e0e2e00006c"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><code>GET</code>ting from <code>/expenses/EXPENSE_ID.json</code> will return that specific expense.</p>
<h3 id='update-an-expense'>Update an expense</h3>
<blockquote>
<p><code>PUT /expenses/EXPENSE_ID.json</code></p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
     <span class="nt">-X</span> PUT <span class="se">\</span>
     <span class="nt">-d</span> <span class="s1">'{ "payment_details":"Money in da bank" }'</span>  <span class="se">\</span>
     <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/expenses/EXPENSE_ID.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="ss">payment_details: </span><span class="s1">'Money in da bank'</span>
<span class="p">}</span>
<span class="no">Quaderno</span><span class="o">::</span><span class="no">Expense</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="no">EXPENSE_ID</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Expense</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$expense</span><span class="o">-&gt;</span><span class="na">payment_details</span> <span class="o">=</span> <span class="s1">'Money in da bank'</span><span class="p">;</span>
<span class="nv">$expense</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
</code></pre></div>
<p><code>PUT</code>ting to <code>/expenses/EXPENSE_ID.json</code> will update the expense with the passed parameters.</p>

<p>This will return <code>200 OK</code> along with the current JSON representation of the expense if successful.</p>
<h3 id='save-an-invoice-as-an-expense'>Save an invoice as an expense</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"permalink"</span><span class="p">:</span><span class="s2">"c2d480801d0e577c6c3177ce0795c4bdaa480e22"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><code>GET</code>ting <code>/expenses/save.json</code> will save another account invoice as an expense using the permalink passed as a parameter.</p>

<p>This will return <code>201 Created</code>, with the current JSON representation of the expense if the creation was a success, along the location of the new expense in the <code>url</code> field.</p>

<p>If the user does not have access to create new expenses, you&#39;ll see <code>401 Unauthorized</code> or a <code>422</code> if the permalink is invalid or the invoice is not suitable to be saved.</p>
<h3 id='delete-an-expense'>Delete an expense</h3>
<blockquote>
<p><code>DELETE /expenses/EXPENSE_ID.json</code></p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-X</span> DELETE <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/expenses/EXPENSE_ID.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Expense</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="no">EXPENSE_ID</span><span class="p">)</span> <span class="c1">#=&gt; Boolean</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$expense</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">();</span>
</code></pre></div>
<p><code>DELETE</code>ing to <code>/expense/EXPENSE_ID.json</code> will delete the specified contact and returns <code>204 No Content</code> if successful.</p>

<h2 id='estimates'>Estimates</h2>
<p>An estimate is an offer that you give a client in order to get a specific job. With time, estimates are usually turned into issued invoices.</p>
<h3 id='create-an-estimate'>Create an estimate</h3>
<blockquote>
<p><code>POST /estimates.json</code></p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># body.json</span>
<span class="o">{</span>
  <span class="s2">"number"</span>:<span class="s2">"0000006"</span>,
  <span class="s2">"contact_id"</span>:<span class="s2">"50603e722f412e0435000024"</span>,
  <span class="s2">"contact_name"</span>:<span class="s2">"Wild E. Coyote"</span>,
  <span class="s2">"po_number"</span>:<span class="s2">""</span>,
  <span class="s2">"currency"</span>:<span class="s2">"EUR"</span>,
  <span class="s2">"items_attributes"</span>:[
    <span class="o">{</span>
        <span class="s2">"description"</span>:<span class="s2">"ACME Catapult"</span>,
        <span class="s2">"quantity"</span>:<span class="s2">"1.0"</span>,
        <span class="s2">"unit_price"</span>:<span class="s2">"0.0"</span>,
        <span class="s2">"discount_rate"</span>:<span class="s2">"0.0"</span>,
        <span class="s2">"tax_1_name"</span>:<span class="s2">""</span>,
        <span class="s2">"tax_1_rate"</span>:<span class="s2">""</span>,
        <span class="s2">"tax_2_name"</span>:<span class="s2">""</span>,
        <span class="s2">"tax_2_rate"</span>:<span class="s2">""</span>,
        <span class="s2">"reference"</span>:<span class="s2">"item_code_X"</span>
      <span class="o">}</span>
  <span class="o">]</span>,
  <span class="s2">"tag_list"</span>:<span class="s2">"tnt"</span>,
  <span class="s2">"payment_details"</span>:<span class="s2">""</span>,
  <span class="s2">"notes"</span>:<span class="s2">""</span>,
  <span class="s2">"custom_metadata"</span>:<span class="o">{</span>
    <span class="s2">"a_custom_key"</span>:<span class="s2">"a custom value"</span>
  <span class="o">}</span>
<span class="o">}</span>

curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
     <span class="nt">-X</span> POST <span class="se">\</span>
     <span class="nt">--data-binary</span> @- body.json <span class="se">\</span>
     <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/estimates.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$estimate</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">QuadernoEstimate</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
                                 <span class="s1">'po_number'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
                                 <span class="s1">'currency'</span> <span class="o">=&gt;</span> <span class="s1">'USD'</span><span class="p">,</span>
                                 <span class="s1">'tag_list'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'playboy'</span><span class="p">,</span> <span class="s1">'businessman'</span><span class="p">),</span>
                                 <span class="s1">'custom_metadata'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'a_custom_key'</span> <span class="o">=&gt;</span> <span class="s1">'a custom value'</span><span class="p">)));</span>
<span class="nv">$item</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">QuadernoDocumentItem</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
                               <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'ACME Catapult'</span><span class="p">,</span>
                               <span class="s1">'unit_price'</span> <span class="o">=&gt;</span> <span class="mf">0.0</span><span class="p">,</span>
                               <span class="s1">'reference'</span> <span class="o">=&gt;</span> <span class="s1">'ITEM_ID'</span><span class="p">,</span>
                               <span class="s1">'quantity'</span> <span class="o">=&gt;</span> <span class="mf">1.0</span><span class="p">));</span>
<span class="nv">$contact</span> <span class="o">=</span> <span class="nx">QuadernoContact</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="s1">'5059bdbf2f412e0901000024'</span><span class="p">);</span>

<span class="nv">$estimate</span><span class="o">-&gt;</span><span class="na">addItem</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span>
<span class="nv">$estimate</span><span class="o">-&gt;</span><span class="na">addContact</span><span class="p">(</span><span class="nv">$contact</span><span class="p">);</span>

<span class="nv">$estimate</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span> <span class="c1">// Returns true (success) or false (error)</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">contact</span> <span class="o">=</span> <span class="no">Quaderno</span><span class="o">::</span><span class="no">Contact</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="s1">'50603e722f412e0435000024'</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Contact</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">contact_id: </span><span class="n">contact</span><span class="p">.</span><span class="nf">id</span><span class="p">,</span>
  <span class="ss">number: </span><span class="s1">'0000006'</span><span class="p">,</span>
  <span class="ss">po_number: </span><span class="s1">''</span><span class="p">,</span>
  <span class="ss">currency: </span><span class="s1">'EUR'</span><span class="p">,</span>
  <span class="ss">tag_list: </span><span class="s1">'tnt'</span><span class="p">,</span>
  <span class="ss">payment_details: </span><span class="s1">''</span><span class="p">,</span>
  <span class="ss">notes: </span><span class="s1">''</span><span class="p">,</span>
  <span class="ss">items_attributes: </span><span class="p">[</span>
    <span class="p">{</span>
      <span class="ss">description: </span><span class="s1">'Whiskey'</span><span class="p">,</span>
      <span class="ss">quantity: </span><span class="s1">'1.0'</span><span class="p">,</span>
      <span class="ss">unit_price: </span><span class="s1">'20.0'</span><span class="p">,</span>
      <span class="ss">discount_rate: </span><span class="s1">'0.0'</span>
    <span class="p">}</span>

  <span class="p">],</span>
  <span class="ss">custom_metadata: </span><span class="p">{</span>
    <span class="ss">a_custom_key: </span><span class="s1">'a custom value'</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="n">estimate</span> <span class="o">=</span> <span class="no">Quaderno</span><span class="o">::</span><span class="no">Estimate</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">params</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Estimate</span>
</code></pre></div>
<p><code>POST</code>ing to <code>/estimates.json</code> will create a new estimate from the parameters passed.</p>

<p>This will return <code>201 Created</code> and the current JSON representation of the estimate if the creation was a success, along with the location of the new estimate in the <code>url</code> field.</p>
<h4 id='attributes'>Attributes</h4>

<table><thead>
<tr>
<th>Attribute</th>
<th>Mandatory</th>
<th>Type/Description</th>
</tr>
</thead><tbody>
<tr>
<td>number</td>
<td>no</td>
<td>String(20 chars) Available for invoices, credit_notes, receipts and estimates. Automatic numbering is used by default. Validates uniqueness</td>
</tr>
<tr>
<td>issue_date</td>
<td>no</td>
<td>String(255 chars) Available for all except for <code>recurring</code>. Defaults to the current date. Format YYYY-MM-DD</td>
</tr>
<tr>
<td>po_number</td>
<td>no</td>
<td>String(255 chars)</td>
</tr>
<tr>
<td>due_date</td>
<td>no</td>
<td>String(255 chars) Available for invoices, expenses and credit notes. Format <code>YYYY-MM-DD</code></td>
</tr>
<tr>
<td>currency</td>
<td>no</td>
<td>String(3 chars) Defaults to the account currency. En formato ISO 4217</td>
</tr>
<tr>
<td>tag_list</td>
<td>no</td>
<td>String(255 chars). Multiple tags should be separated by commas</td>
</tr>
<tr>
<td>payment_details</td>
<td>no</td>
<td>Text</td>
</tr>
<tr>
<td>notes</td>
<td>no</td>
<td>Text</td>
</tr>
<tr>
<td>contact_id</td>
<td>(Mandatory if <code>contact</code> is not present)</td>
<td>ID</td>
</tr>
<tr>
<td>contact</td>
<td>(Mandatory if <code>contact_id</code> is not present)</td>
<td>Hash with a contact data for creation</td>
</tr>
<tr>
<td>country</td>
<td>no</td>
<td>String(2 chars) <code>ISO 3166-1 alpha-2</code>. Available for updates</td>
</tr>
<tr>
<td>street_line_1</td>
<td>no</td>
<td>String(255 chars). Available for updates</td>
</tr>
<tr>
<td>street_line_2</td>
<td>no</td>
<td>String(255 chars)</td>
</tr>
<tr>
<td>city</td>
<td>no</td>
<td>String(255 chars). Available for updates</td>
</tr>
<tr>
<td>region</td>
<td>no</td>
<td>String(255 chars). Available for updates</td>
</tr>
<tr>
<td>postal_code</td>
<td>no</td>
<td>String(255 chars). Available for updates</td>
</tr>
<tr>
<td>items_attributes</td>
<td><strong>yes</strong></td>
<td>Array of document items (check available attributes for document items below). No more than 200 items are allowed in a request. To add more use subsequent update requests</td>
</tr>
<tr>
<td>custom_metadata</td>
<td>no</td>
<td>Key-value data. You can have up to 20 keys, with key names up to 40 characters long and values up to 500 characters long.</td>
</tr>
</tbody></table>

<aside class="notice">
If you pass a `contact` JSON object instead of a `contact_id`, and the email or first and last name combination does not match any of your existing estimates, a new one will be created, otherwise a new estimate will be created for the existing estimate.<br /><br />

<p>Please note that you can pass <strong>either</strong> estimate_id or estimate, but if you pass both then results may not be what you expect.</p>

<p>Allowed contact fields are the same as when creating a contact via the dedicated <a href="#estimates">Contacts API</a>.</p>
</aside>

<h4 id='document-item-attributes'>Document Item Attributes</h4>

<table><thead>
<tr>
<th>Attribute</th>
<th>Mandatory</th>
<th>Type/Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>no</td>
<td>ID. Available only for updates</td>
</tr>
<tr>
<td>description</td>
<td><strong>yes</strong></td>
<td>String(255 chars)</td>
</tr>
<tr>
<td>quantity</td>
<td>no</td>
<td>Decimal. Defaults to 1.0</td>
</tr>
<tr>
<td>unit_price</td>
<td><strong>yes</strong></td>
<td>Decimal</td>
</tr>
<tr>
<td>total_amount</td>
<td>Mandatory if <code>unit_price</code> is not present</td>
<td>Decimal. Cents version available as <code>total_amount_cents</code></td>
</tr>
<tr>
<td>discount_rate</td>
<td>no</td>
<td>Decimal</td>
</tr>
<tr>
<td>tax_1_name</td>
<td>Mandatory if <code>tax_1_rate</code> is present</td>
<td>String(255 chars)</td>
</tr>
<tr>
<td>tax_1_rate</td>
<td>Mandatory if <code>tax_1_name</code> is present</td>
<td>Decimal between -100.00 and 100.00 (not included)</td>
</tr>
<tr>
<td>tax_1_country</td>
<td>no</td>
<td>String(2 chars). Defaults to the contact&#39;s country</td>
</tr>
<tr>
<td>tax_1_region</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for Canadian or United States taxes.</td>
</tr>
<tr>
<td>tax_1_county</td>
<td>no</td>
<td>String(2 chars). Recommendable to set for Canadian or United States taxes.</td>
</tr>
<tr>
<td>tax_1_transaction_type</td>
<td>no</td>
<td>String. Accepts <code>eservice</code>, <code>ebook</code> or <code>standard</code>. Defaults to your account &quot;default tax type&quot;.</td>
</tr>
<tr>
<td>tax_2_name</td>
<td>Mandatory if <code>tax_2_rate</code> is present</td>
<td>String(255 chars)</td>
</tr>
<tr>
<td>tax_2_rate</td>
<td>Mandatory if <code>tax_2_name</code> is present</td>
<td>Decimal between -100.00 and 100.00 (not included)</td>
</tr>
<tr>
<td>tax_2_country</td>
<td>no</td>
<td>String(2 chars). Defaults to the contact&#39;s country</td>
</tr>
<tr>
<td>tax_2_region</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for Canadian or United States taxes.</td>
</tr>
<tr>
<td>tax_2_county</td>
<td>no</td>
<td>String(2 chars). Recommendable to set for Canadian or United States taxes.</td>
</tr>
<tr>
<td>tax_2_transaction_type</td>
<td>no</td>
<td>String. Accepts <code>eservice</code>, <code>ebook</code> or <code>standard</code>. Defaults to your account &quot;default tax type&quot;.</td>
</tr>
<tr>
<td>reference</td>
<td>no</td>
<td>String(255 chars) Code (<code>code</code>) of an existing item. <strong>If present none of the mandatory attributes are mandatory (as you are referencing an item that already exists)</strong></td>
</tr>
<tr>
<td>_destroy</td>
<td>no</td>
<td>Set it to 1 if you want to remove the document item selected by ID. Available only for updates</td>
</tr>
</tbody></table>

<h4 id='estimate-states'>Estimate States</h4>

<p>Possible estimate states are:</p>

<ul>
<li><code>outstanding</code></li>
<li><code>accepted</code></li>
<li><code>declined</code></li>
<li><code>invoiced</code></li>
<li><code>late</code></li>
</ul>

<h4 id='create-an-attachment-during-estimate-creation'>Create an attachment during estimate creation</h4><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"attachment"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="s2">"aBaSe64EnCoDeDFiLe"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"filename"</span><span class="p">:</span><span class="s2">"the_filename.png"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Optionally, you can pass an attachment hash along with the rest of the parameters.</p>

<p>Fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>data</code></td>
<td>Contains a Base64 encoded string which represents the file.</td>
</tr>
<tr>
<td><code>filename</code></td>
<td>The attachment file name.</td>
</tr>
</tbody></table>

<p>Valid file extensions are <code>pdf</code>, <code>txt</code>, <code>jpeg</code>, <code>jpg</code>, <code>png</code>, <code>xml</code>, <code>xls</code>, <code>doc</code>, <code>rtf</code> and <code>html</code>. Any other format will stop estimate creation and return a <code>422 Unprocessable Entity</code> error.</p>
<h3 id='retrieve-get-and-filter-all-estimates'>Retrieve: Get and filter all estimates</h3>
<blockquote>
<p><code>GET /estimates.json</code></p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-X</span> GET <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/estimates.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Estimate</span><span class="p">.</span><span class="nf">all</span><span class="p">()</span> <span class="c1">#=&gt; Array</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$estimates</span> <span class="o">=</span> <span class="nx">QuadernoEstimate</span><span class="o">::</span><span class="na">find</span><span class="p">();</span> <span class="c1">// Returns an array of QuadernoEstimate</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"50603e722f412e0435000024"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"number"</span><span class="p">:</span><span class="s2">"0000003"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"issue_date"</span><span class="p">:</span><span class="s2">"2012-09-24"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="s2">"1325376000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"contact"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"5059bdbf2f412e0901000024"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"full_name"</span><span class="p">:</span><span class="s2">"Wild E. Coyote"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"street_line_1"</span><span class="p">:</span><span class="s2">"Desert of New Mexico"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"street_line_2"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"city"</span><span class="p">:</span><span class="s2">"New Mexico"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"region"</span><span class="p">:</span><span class="s2">"New Mexico"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"po_number"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"4815162342"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"ACME TNT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quantity"</span><span class="p">:</span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"unit_price_cents"</span><span class="p">:</span><span class="s2">"10000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"discount_rate"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_1_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_1_rate"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_2_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_2_rate"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"10000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"gross_amount_cents"</span><span class="p">:</span><span class="s2">"10000"</span><span class="w">
       </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"10000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"taxes"</span><span class="p">:[],</span><span class="w">
    </span><span class="nl">"total_cents"</span><span class="p">:</span><span class="s2">"10000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"notes"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"outstanding"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tag_list"</span><span class="p">:[],</span><span class="w">
    </span><span class="nl">"permalink"</span><span class="p">:</span><span class="s2">"https://my-account.quadernoapp.com/estimate/7hef1rs7p3rm4l1nk"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://my-account.quadernoapp.com/api/estimates/50603e722f412e0435000024.json"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"custom_metadata"</span><span class="p">:{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"50603e722f412e0435000144"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"number"</span><span class="p">:</span><span class="s2">"0000005"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"issue_date"</span><span class="p">:</span><span class="s2">"2012-09-24"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="s2">"1325376020"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"contact"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"5059bdbf2f412e0901000044"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"full_name"</span><span class="p">:</span><span class="s2">"Cookie Monster"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"street_line_1"</span><span class="p">:</span><span class="s2">"Sesame Street"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"street_line_2"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"city"</span><span class="p">:</span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"region"</span><span class="p">:</span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"po_number"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"48151623421"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"Cookies"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quantity"</span><span class="p">:</span><span class="s2">"5.0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"unit_price_cents"</span><span class="p">:</span><span class="s2">"195"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"discount_rate"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_1_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_1_rate"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_2_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_2_rate"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"975"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"gross_amount_cents"</span><span class="p">:</span><span class="s2">"975"</span><span class="w">
       </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"975"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"taxes"</span><span class="p">:[],</span><span class="w">
    </span><span class="nl">"total_cents"</span><span class="p">:</span><span class="s2">"975"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"notes"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"outstanding"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tag_list"</span><span class="p">:[],</span><span class="w">
    </span><span class="nl">"permalink"</span><span class="p">:</span><span class="s2">"https://my-account.quadernoapp.com/estimate/7hes3c0ndp3rm4l1nk"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://my-account.quadernoapp.com/api/estimates/50603e722f412e0435000144.json"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"custom_metadata"</span><span class="p">:{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p><code>GET</code>ting from <code>/estimates.json</code> will return all the user&#39;s estimates.</p>

<p>You can filter the results in a few ways:</p>

<ul>
<li>By <code>number</code>, <code>contact_name</code> or <code>po_number</code> by passing the <code>q</code> parameter in the url like <code>?q=KEYWORD</code>.</li>
<li>By date range, passing the <code>date</code> parameter in the url like <code>?date=DATE1,DATE2</code>. Date range allows these formats: <code>2019-01-01,2019-12-31</code> or <code>2019/01/01,2019/12/31</code>.</li>
<li>By state, passing the <code>state</code> parameter like <code>?state=STATE</code>.</li>
<li>By contact, passing the contact ID in the <code>contact</code> parameter, like <code>?contact=3231</code>.</li>
</ul>
<h3 id='retrieve-get-a-single-estimate'>Retrieve: Get a single estimate</h3>
<blockquote>
<p><code>GET /estimates/ESTIMATE_ID.json</code></p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-X</span> GET <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/estimates/ESTIMATE_ID.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Estimate</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="no">ESTIMATE_ID</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Estimate</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$estimate</span> <span class="o">=</span> <span class="nx">QuadernoEstimate</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="s1">'ESTIMATE_ID'</span><span class="p">);</span> <span class="c1">// Returns a QuadernoEstimate</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"50603e722f412e0435000024"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"number"</span><span class="p">:</span><span class="s2">"0000003"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"issue_date"</span><span class="p">:</span><span class="s2">"2012-09-24"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="s2">"1325376000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"contact"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"5059bdbf2f412e0901000024"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"full_name"</span><span class="p">:</span><span class="s2">"Wild E. Coyote"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"street_line_1"</span><span class="p">:</span><span class="s2">"Desert of New Mexico"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"street_line_2"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"city"</span><span class="p">:</span><span class="s2">"New Mexico"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"region"</span><span class="p">:</span><span class="s2">"New Mexico"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"po_number"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"4815162342"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"ACME TNT"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"unit_price_cents"</span><span class="p">:</span><span class="s2">"10000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"discount_rate"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax_1_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax_1_rate"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax_2_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax_2_rate"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"10000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"gross_amount_cents"</span><span class="p">:</span><span class="s2">"10000"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"10000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"taxes"</span><span class="p">:[],</span><span class="w">
  </span><span class="nl">"total"</span><span class="p">:</span><span class="s2">"10000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"notes"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"outstanding"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag_list"</span><span class="p">:[],</span><span class="w">
  </span><span class="nl">"permalink"</span><span class="p">:</span><span class="s2">"https://my-account.quadernoapp.com/estimate/7hef1rs7p3rm4l1nk"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://my-account.quadernoapp.com/api/estimates/50603e722f412e0435000024.json"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"custom_metadata"</span><span class="p">:{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><code>GET</code>ting from <code>/estimates/ESTIMATE_ID.json</code> will return that specific estimate.</p>
<h3 id='update-an-estimate'>Update an estimate</h3>
<blockquote>
<p><code>PUT /estimates/ESTIMATE_ID.json</code></p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># body.json</span>
<span class="o">{</span>
  <span class="s2">"tag_list"</span>:<span class="s2">"Wacky, racer"</span>
  <span class="s2">"contact_id"</span>:<span class="s2">"505c3b402f412e0248000044"</span>,
  <span class="s2">"contact_name"</span>:<span class="s2">"Dick Dastardly"</span>,
<span class="o">}</span>

curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
     <span class="nt">-X</span> PUT <span class="se">\</span>
     <span class="nt">--data-binary</span> @body.json <span class="se">\</span>
     <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/estimates/ESTIMATE_ID.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="ss">contact_id: </span><span class="s1">'505c3b402f412e0248000044'</span><span class="p">,</span>
    <span class="ss">contact_name: </span><span class="s1">'Dick Dastardly'</span>
<span class="p">}</span>
<span class="no">Quaderno</span><span class="o">::</span><span class="no">Estimate</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="no">ESTIMATE_ID</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Estimate</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$estimate</span><span class="o">-&gt;</span><span class="na">contact_id</span> <span class="o">=</span> <span class="s1">'505c3b402f412e0248000044'</span><span class="p">;</span>
<span class="nv">$estimate</span><span class="o">-&gt;</span><span class="na">contact_name</span> <span class="o">=</span> <span class="s1">'Dick Dastardly'</span><span class="p">;</span>
<span class="nv">$estimate</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
</code></pre></div>
<p><code>PUT</code>ting to <code>/estimates/ESTIMATE_ID.json</code> will update the estimate with the passed parameters.</p>

<p>This will return <code>200 OK</code> along with the current JSON representation of the estimate if successful.</p>
<h3 id='delete-an-estimate'>Delete an estimate</h3>
<blockquote>
<p><code>DELETE /estimates/ESTIMATE_ID.json</code></p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-X</span> DELETE <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/estimates/ESTIMATE_ID.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Estimate</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="no">ESTIMATE_ID</span><span class="p">)</span> <span class="c1">#=&gt; Boolean</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$estimate</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">();</span>
</code></pre></div>
<p><code>DELETE</code>ing to <code>/estimate/ESTIMATE_ID.json</code> will delete the specified estimate and returns <code>204 No Content</code> if successful.</p>
<h3 id='deliver-an-estimate'>Deliver an estimate</h3><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY:
     <span class="nt">-X</span> GET
     <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/estimates/ESTIMATE_ID/deliver.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">estimate</span> <span class="o">=</span> <span class="no">Quaderno</span><span class="o">::</span><span class="no">Estimate</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="no">ESTIMATE_ID</span><span class="p">)</span>
<span class="n">estimate</span><span class="p">.</span><span class="nf">deliver</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$estimate</span><span class="o">-&gt;</span><span class="na">deliver</span><span class="p">();</span> <span class="c1">// Return true (success) or false (error)</span>
</code></pre></div>
<p><code>GET</code>ting <code>/estimates/ESTIMATE_ID/deliver.json</code> will send the estimate to the assigned contact email. This will return <code>200 OK</code> if successful, along with a JSON representation of the estimate.</p>

<p>If the destination contact does not have an email address you will receive a <code>422 Unprocessable Entity</code> error.</p>

<h2 id='recurring'>Recurring</h2>
<p>A recurring is a special document that periodically renews itself and generates a recurring invoice or expense.</p>
<h3 id='create-a-recurring'>Create a recurring</h3>
<blockquote>
<p><code>POST /recurring.json</code></p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># body.json</span>
<span class="o">{</span> <span class="s2">"recurring_document"</span>:<span class="s2">"expense"</span>,
  <span class="s2">"frequency"</span>:<span class="s2">"monthly"</span>,
  <span class="s2">"start_date"</span>:<span class="s2">"2015-08-01"</span>,
  <span class="s2">"contact_id"</span>:<span class="s2">"5059bdbf2f412e0901000024"</span>,
  <span class="s2">"delivery"</span>:<span class="s2">"send"</span>,
  <span class="s2">"contact_name"</span>:<span class="s2">"STARK"</span>,
  <span class="s2">"po_number"</span>:<span class="s2">""</span>,
  <span class="s2">"currency"</span>:<span class="s2">"USD"</span>,
  <span class="s2">"tag_list"</span>:<span class="s2">"playboy, businessman"</span>,
  <span class="s2">"items_attributes"</span>:[
    <span class="o">{</span>
      <span class="s2">"description"</span>:<span class="s2">"Whiskey"</span>,
      <span class="s2">"quantity"</span>:<span class="s2">"1.0"</span>,
      <span class="s2">"unit_price"</span>:<span class="s2">"20.0"</span>,
      <span class="s2">"discount_rate"</span>:<span class="s2">"0.0"</span>,
      <span class="s2">"reference"</span>:<span class="s2">"item_code_X"</span>
    <span class="o">}</span>
  <span class="o">]</span>,
  <span class="s2">"custom_metadata"</span>:<span class="o">{</span>
    <span class="s2">"a_custom_key"</span>:<span class="s2">"a custom value"</span>
  <span class="o">}</span>
<span class="o">}</span>

curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
     <span class="nt">-X</span> POST <span class="se">\</span>
     <span class="nt">--data-binary</span> @body.json <span class="se">\</span>
     <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/recurring.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$recurring</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">QuadernoRecurring</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
                                 <span class="s1">'po_number'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
                                 <span class="s1">'frequency'</span> <span class="o">=&gt;</span> <span class="s1">'monthly'</span><span class="p">,</span>
                                 <span class="s1">'start_date'</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">DateTime</span><span class="p">(</span><span class="s1">'2015-08-01'</span><span class="p">),</span>
                                 <span class="s1">'currency'</span> <span class="o">=&gt;</span> <span class="s1">'USD'</span><span class="p">,</span>
                                 <span class="s1">'tag_list'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'playboy'</span><span class="p">,</span> <span class="s1">'businessman'</span><span class="p">),</span>
                                 <span class="s1">'custom_metadata'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'a_custom_key'</span> <span class="o">=&gt;</span> <span class="s1">'a custom value'</span><span class="p">)));</span>
<span class="nv">$item</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">QuadernoDocumentItem</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
                               <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'Pizza bagels'</span><span class="p">,</span>
                               <span class="s1">'unit_price'</span> <span class="o">=&gt;</span> <span class="mf">9.99</span><span class="p">,</span>
                               <span class="s1">'quantity'</span> <span class="o">=&gt;</span> <span class="mi">20</span><span class="p">));</span>
<span class="nv">$contact</span> <span class="o">=</span> <span class="nx">QuadernoContact</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="s1">'5059bdbf2f412e0901000024'</span><span class="p">);</span>

<span class="nv">$recurring</span><span class="o">-&gt;</span><span class="na">custom_metadata</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'a_custom_key'</span> <span class="o">=&gt;</span> <span class="s1">'a custom value'</span><span class="p">);</span>
<span class="nv">$recurring</span><span class="o">-&gt;</span><span class="na">addItem</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span>
<span class="nv">$recurring</span><span class="o">-&gt;</span><span class="na">addContact</span><span class="p">(</span><span class="nv">$contact</span><span class="p">);</span>

<span class="nv">$recurring</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span> <span class="c1">// Returns true (success) or false (error)</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">contact</span> <span class="o">=</span> <span class="no">Quaderno</span><span class="o">::</span><span class="no">Contact</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="s1">'50603e722f412e0435000024'</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Contact</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">contact_id: </span><span class="n">contact</span><span class="p">.</span><span class="nf">id</span><span class="p">,</span>
  <span class="ss">po_number: </span><span class="s1">''</span><span class="p">,</span>
  <span class="ss">currency: </span><span class="s1">'USD'</span><span class="p">,</span>
  <span class="ss">tag_list: </span><span class="p">[</span><span class="s1">'playboy'</span><span class="p">,</span> <span class="s1">'businessman'</span><span class="p">],</span>
  <span class="ss">frequency: </span><span class="s1">'monthly'</span><span class="p">,</span>
  <span class="ss">start_date: </span><span class="no">Date</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s1">'2015-08-01'</span><span class="p">),</span>
  <span class="ss">items_attributes: </span><span class="p">[</span>
    <span class="p">{</span>
      <span class="ss">description: </span><span class="s1">'Whiskey'</span><span class="p">,</span>
      <span class="ss">quantity: </span><span class="s1">'1.0'</span><span class="p">,</span>
      <span class="ss">unit_price: </span><span class="s1">'20.0'</span><span class="p">,</span>
      <span class="ss">discount_rate: </span><span class="s1">'0.0'</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="ss">custom_metadata: </span><span class="p">{</span>
    <span class="ss">a_custom_key: </span><span class="s1">'a custom value'</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="n">recurring</span> <span class="o">=</span> <span class="no">Quaderno</span><span class="o">::</span><span class="no">Recurring</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">params</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Recurring</span>
</code></pre></div>
<p><code>POST</code>ing to <code>/recurring.json</code> will create a new recurring from the parameters passed.</p>

<p>This will return <code>201 Created</code> and the current JSON representation of the recurring if the creation was a success, along with the location of the new recurring in the <code>url</code> field.</p>
<h4 id='attributes'>Attributes</h4>

<table><thead>
<tr>
<th>Attribute</th>
<th>Mandatory</th>
<th>Type/Description</th>
</tr>
</thead><tbody>
<tr>
<td>number</td>
<td>no</td>
<td>String(255 chars) Available for recurrings, credit_notes, receipts and estimates. Automatic numbering is used by default. Validates uniqueness</td>
</tr>
<tr>
<td>issue_date</td>
<td>no</td>
<td>String(255 chars) Available for all except for <code>recurring</code>. Defaults to the current date. Format YYYY-MM-DD</td>
</tr>
<tr>
<td>po_number</td>
<td>no</td>
<td>String(255 chars)</td>
</tr>
<tr>
<td>due_date</td>
<td>no</td>
<td>String(255 chars) Available for recurrings, expenses and credit notes. Format <code>YYYY-MM-DD</code></td>
</tr>
<tr>
<td>currency</td>
<td>no</td>
<td>String(3 chars) Defaults to the account currency. En formato ISO 4217</td>
</tr>
<tr>
<td>tag_list</td>
<td>no</td>
<td>String(255 chars). Multiple tags should be separated by commas</td>
</tr>
<tr>
<td>payment_details</td>
<td>no</td>
<td>Text</td>
</tr>
<tr>
<td>notes</td>
<td>no</td>
<td>Text</td>
</tr>
<tr>
<td>contact_id</td>
<td>(Mandatory if <code>contact</code> is not present)</td>
<td>ID</td>
</tr>
<tr>
<td>contact</td>
<td>(Mandatory if <code>contact_id</code> is not present)</td>
<td>Hash with a contact data for creation</td>
</tr>
<tr>
<td>street_line_1</td>
<td>no</td>
<td>String(255 chars). Available for updates</td>
</tr>
<tr>
<td>street_line_2</td>
<td>no</td>
<td>String(255 chars)</td>
</tr>
<tr>
<td>city</td>
<td>no</td>
<td>String(255 chars). Available for updates</td>
</tr>
<tr>
<td>region</td>
<td>no</td>
<td>String(255 chars). Available for updates</td>
</tr>
<tr>
<td>postal_code</td>
<td>no</td>
<td>String(255 chars). Available for updates</td>
</tr>
<tr>
<td>items_attributes</td>
<td><strong>yes</strong></td>
<td>Array of document items (check available attributes for document items below). No more than 200 items are allowed in a request. To add more use subsequent update requests. Maximum items per document are limited up to 1000 items.</td>
</tr>
<tr>
<td>payment_method</td>
<td>no</td>
<td>Create a paid document in a single request. One of the following: <code>credit_card</code>, <code>cash</code>, <code>wire_transfer</code>, <code>direct_debit</code>, <code>check</code>, <code>promissory_note</code>, <code>iou</code>, <code>paypal</code> or <code>other</code></td>
</tr>
<tr>
<td>recurring_document</td>
<td>no</td>
<td><code>invoice</code> or <code>expense</code>. Defaults to <code>invoice</code></td>
</tr>
<tr>
<td>start_date</td>
<td><strong>yes</strong></td>
<td>Format <code>YYYY-MM-DD</code>.</td>
</tr>
<tr>
<td>end_date</td>
<td>no</td>
<td>Format <code>YYYY-MM-DD</code>.</td>
</tr>
<tr>
<td>frequency</td>
<td>no</td>
<td>One of these values: <code>daily</code>, <code>weekly</code>, <code>biweekly</code>, <code>monthly</code>, <code>bimonthly</code>, <code>quarterly</code>, <code>semiyearly</code>, <code>yearly</code>, <code>biyearly</code>. Defaults to <code>monthly</code>.</td>
</tr>
<tr>
<td>delivery</td>
<td>no</td>
<td>One of these values: <code>send</code>, <code>create</code>, <code>nothing</code>. Defaults to <code>send</code>.</td>
</tr>
<tr>
<td>due_days</td>
<td>no</td>
<td>Positvive integer</td>
</tr>
<tr>
<td>custom_metadata</td>
<td>no</td>
<td>Key-value data. You can have up to 20 keys, with key names up to 40 characters long and values up to 500 characters long.</td>
</tr>
</tbody></table>

<aside class="notice">
If you pass a `contact` JSON object instead of a `contact_id`, and the email or first and last name combination does not match any of your existing contacts, a new one will be created, otherwise a new recurring will be created for the existing contact. Only a `contact` object OR a `contact_id` property should be passed in the same call.<br /><br />

<p>Please note that you can pass <strong>either</strong> contact_id or contact, but if you pass both then results may not be what you expect.</p>

<p>Allowed contact fields are the same as when creating a contact via the dedicated <a href="#contacts">Contacts API</a>.</p>
</aside>

<h4 id='document-item-attributes'>Document Item Attributes</h4>

<table><thead>
<tr>
<th>Attribute</th>
<th>Mandatory</th>
<th>Type/Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>no</td>
<td>ID. Available only for updates</td>
</tr>
<tr>
<td>description</td>
<td><strong>yes</strong></td>
<td>String(255 chars)</td>
</tr>
<tr>
<td>quantity</td>
<td>no</td>
<td>Decimal. Defaults to 1.0</td>
</tr>
<tr>
<td>unit_price</td>
<td><strong>yes</strong></td>
<td>Decimal</td>
</tr>
<tr>
<td>total_amount</td>
<td>Mandatory if <code>unit_price</code> is not present</td>
<td>Decimal</td>
</tr>
<tr>
<td>discount_rate</td>
<td>no</td>
<td>Decimal</td>
</tr>
<tr>
<td>tax_1_name</td>
<td>Mandatory if <code>tax_1_rate</code> is present</td>
<td>String(255 chars)</td>
</tr>
<tr>
<td>tax_1_rate</td>
<td>Mandatory if <code>tax_1_name</code> is present</td>
<td>Decimal between -100.00 and 100.00 (not included)</td>
</tr>
<tr>
<td>tax_1_country</td>
<td>no</td>
<td>String(2 chars). Defaults to the contact&#39;s country</td>
</tr>
<tr>
<td>tax_1_region</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for Canadian or United States taxes.</td>
</tr>
<tr>
<td>tax_1_county</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_1_city</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_1_county_code</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_1_city_code</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_1_transaction_type</td>
<td>no</td>
<td>String. Accepts <code>eservice</code>, <code>ebook</code> or <code>standard</code>. Defaults to your account &quot;default tax type&quot;.</td>
</tr>
<tr>
<td>tax_2_name</td>
<td>Mandatory if <code>tax_2_rate</code> is present</td>
<td>String(255 chars)</td>
</tr>
<tr>
<td>tax_2_rate</td>
<td>Mandatory if <code>tax_2_name</code> is present</td>
<td>Decimal between -100.00 and 100.00 (not included)</td>
</tr>
<tr>
<td>tax_2_country</td>
<td>no</td>
<td>String(2 chars). Defaults to the contact&#39;s country</td>
</tr>
<tr>
<td>tax_2_region</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for Canadian or United States taxes.</td>
</tr>
<tr>
<td>tax_2_county</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_2_city</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_2_county_code</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_2_city_code</td>
<td>no</td>
<td>String(255 chars). Recommendable to set for US sales taxes.</td>
</tr>
<tr>
<td>tax_2_transaction_type</td>
<td>no</td>
<td>String. Accepts <code>eservice</code>, <code>ebook</code> or <code>standard</code>. Defaults to your account &quot;default tax type&quot;.</td>
</tr>
<tr>
<td>reference</td>
<td>no</td>
<td>String(255 chars) Code (<code>code</code>) of an existing item. <strong>If present none of the mandatory attributes are mandatory (as you are referencing an item that already exists)</strong></td>
</tr>
<tr>
<td>_destroy</td>
<td>no</td>
<td>Set it to 1 if you want to remove the document item selected by ID. Available only for updates</td>
</tr>
</tbody></table>

<h4 id='recurring-states'>Recurring States</h4>

<p>Possible recurring states are:</p>

<ul>
<li><code>active</code></li>
<li><code>archived</code></li>
</ul>

<h4 id='create-an-attachment-during-recurring-creation'>Create an attachment during recurring creation</h4><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"attachment"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="s2">"aBaSe64EnCoDeDFiLe"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"filename"</span><span class="p">:</span><span class="s2">"the_filename.png"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Optionally, you can pass an attachment hash along with the rest of the parameters.</p>

<p>Fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>data</code></td>
<td>Contains a Base64 encoded string which represents the file.</td>
</tr>
<tr>
<td><code>filename</code></td>
<td>The attachment file name.</td>
</tr>
</tbody></table>

<p>Valid file extensions are <code>pdf</code>, <code>txt</code>, <code>jpeg</code>, <code>jpg</code>, <code>png</code>, <code>xml</code>, <code>xls</code>, <code>doc</code>, <code>rtf</code> and <code>html</code>. Any other format will stop recurring creation and return a <code>422 Unprocessable Entity</code> error.</p>
<h3 id='retrieve-get-and-filter-all-recurrings'>Retrieve: Get and filter all recurrings</h3>
<blockquote>
<p><code>GET /recurring.json</code></p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-X</span> GET <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/recurring.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Recurring</span><span class="p">.</span><span class="nf">all</span><span class="p">()</span> <span class="c1">#=&gt; Array</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$recurrings</span> <span class="o">=</span> <span class="nx">QuadernoRecurring</span><span class="o">::</span><span class="na">find</span><span class="p">();</span> <span class="c1">// Returns an array of QuadernoRecurring</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">642069232</span><span class="p">,</span><span class="w">
    </span><span class="nl">"recurring_document"</span><span class="p">:</span><span class="s2">"expense"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"start_date"</span><span class="p">:</span><span class="s2">"2015-02-21"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"end_date"</span><span class="p">:</span><span class="s2">"2015-06-21"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"frequency"</span><span class="p">:</span><span class="s2">"monthly"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"recurring_period"</span><span class="p">:</span><span class="s2">"months"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"recurring_frequency"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"contact"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">176938</span><span class="p">,</span><span class="w">
      </span><span class="nl">"full_name"</span><span class="p">:</span><span class="s2">"Chuck Testa"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"po_number"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"due_days"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">1589108</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"Something corporate"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quantity"</span><span class="p">:</span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"unit_price_cents"</span><span class="p">:</span><span class="s2">"2300"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"discount_rate"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_1_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_1_rate"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_2_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_2_rate"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reference"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"2300"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"gross_amount_cents"</span><span class="p">:</span><span class="s2">"2300"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"2300"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"taxes"</span><span class="p">:[],</span><span class="w">
    </span><span class="nl">"total_cents"</span><span class="p">:</span><span class="s2">"2300"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"notes"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"archived"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tag_list"</span><span class="p">:[],</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://ACCOUNT_NAME.quadernoapp.com/api/recurring/642069232.json"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"custom_metadata"</span><span class="p">:{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">6420739232</span><span class="p">,</span><span class="w">
    </span><span class="nl">"recurring_document"</span><span class="p">:</span><span class="s2">"recurring"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"start_date"</span><span class="p">:</span><span class="s2">"2015-01-02"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"end_date"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"frequency"</span><span class="p">:</span><span class="s2">"weekly"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"recurring_period"</span><span class="p">:</span><span class="s2">"weeks"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"recurring_frequency"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"contact"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">176939</span><span class="p">,</span><span class="w">
      </span><span class="nl">"full_name"</span><span class="p">:</span><span class="s2">"Veronica Black"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"po_number"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"due_days"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">1589114</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"Friday stuff"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quantity"</span><span class="p">:</span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"unit_price_cents"</span><span class="p">:</span><span class="s2">"3400"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"discount_rate"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_1_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_1_rate"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_2_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tax_2_rate"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reference"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"3400"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"gross_amount_cents"</span><span class="p">:</span><span class="s2">"3400"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"3400"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"taxes"</span><span class="p">:[],</span><span class="w">
    </span><span class="nl">"total_cents"</span><span class="p">:</span><span class="s2">"3400"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"notes"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"active"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tag_list"</span><span class="p">:[],</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://ACCOUNT_NAME.quadernoapp.com/api/recurring/6420739232.json"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"custom_metadata"</span><span class="p">:{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p><code>GET</code>ting from <code>/recurring.json</code> will return all the user&#39;s recurrings.</p>

<p>You can filter the results in a few ways:</p>

<ul>
<li>By <code>number</code>, <code>contact_name</code> or <code>po_number</code> by passing the <code>q</code> parameter in the url like <code>?q=KEYWORD</code>.</li>
<li>By date range, passing the <code>date</code> parameter in the url like <code>?date=DATE1,DATE2</code>. Date range allows these formats: <code>2019-01-01,2019-12-31</code> or <code>2019/01/01,2019/12/31</code>.</li>
<li>By state, passing the <code>state</code> parameter like <code>?state=STATE</code>.</li>
<li>By contact, passing the contact ID in the <code>contact</code> parameter, like <code>?contact=3231</code>.</li>
</ul>
<h3 id='retrieve-get-a-single-recurring'>Retrieve: Get a single recurring</h3>
<blockquote>
<p><code>GET /recurring/RECURRING_ID.json</code></p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-X</span> GET <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/recurring/RECURRING_ID.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Recurring</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="no">RECURRING_ID</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Recurring</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$recurring</span> <span class="o">=</span> <span class="nx">QuadernoRecurring</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="s1">'RECURRING_ID'</span><span class="p">);</span> <span class="c1">// Returns a QuadernoRecurring</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">6420739232</span><span class="p">,</span><span class="w">
  </span><span class="nl">"recurring_document"</span><span class="p">:</span><span class="s2">"expense"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"start_date"</span><span class="p">:</span><span class="s2">"2015-01-02"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"end_date"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"frequency"</span><span class="p">:</span><span class="s2">"weekly"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"recurring_period"</span><span class="p">:</span><span class="s2">"weeks"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"recurring_frequency"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"contact"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">176939</span><span class="p">,</span><span class="w">
    </span><span class="nl">"full_name"</span><span class="p">:</span><span class="s2">"Veronica Black"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"po_number"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"due_days"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">1589114</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"Friday stuff"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"unit_price_cents"</span><span class="p">:</span><span class="s2">"3400"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"discount_rate"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax_1_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax_1_rate"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax_2_name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax_2_rate"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reference"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"3400"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"gross_amount_cents"</span><span class="p">:</span><span class="s2">"3400"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"subtotal_cents"</span><span class="p">:</span><span class="s2">"3400"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"discount_cents"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"taxes"</span><span class="p">:[],</span><span class="w">
  </span><span class="nl">"total_cents"</span><span class="p">:</span><span class="s2">"3400"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"notes"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"active"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag_list"</span><span class="p">:[],</span><span class="w">
  </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://ACCOUNT_NAME.quadernoapp.com/api/recurring/6420739232.json"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"custom_metadata"</span><span class="p">:{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><code>GET</code>ting from <code>/recurring/RECURRING_ID.json</code> will return that specific recurring.</p>

<p>If you have connected Quaderno and Stripe, you can also <code>GET /stripe/charges/STRIPE_CHARGE_ID.json</code> to get the Quaderno recurring for a Stripe charge.</p>
<h3 id='update-a-recurring'>Update a recurring</h3>
<blockquote>
<p><code>PUT /recurring/RECURRING_ID.json</code></p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
     <span class="nt">-X</span> PUT <span class="se">\</span>
     <span class="nt">-d</span> <span class="s1">'{"notes":"You better pay this time, Tony."}'</span> <span class="se">\</span>
     <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/recurring/RECURRING_ID.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="ss">notes: </span><span class="s1">'You better pay this time, Tony.'</span>
<span class="p">}</span>
<span class="no">Quaderno</span><span class="o">::</span><span class="no">Recurring</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="no">RECURRING_ID</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Recurring</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$recurring</span><span class="o">-&gt;</span><span class="na">notes</span> <span class="o">=</span> <span class="s1">'You better pay this time, Tony.'</span><span class="p">;</span>
<span class="nv">$recurring</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
</code></pre></div>
<p><code>PUT</code>ting to <code>/recurring/RECURRING_ID.json</code> will update the recurring with the passed parameters.</p>

<p>This will return <code>200 OK</code> along with the current JSON representation of the recurring if successful.</p>
<h3 id='delete-a-recurring'>Delete a recurring</h3>
<blockquote>
<p><code>DELETE /recurring/RECURRING_ID.json</code></p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-X</span> DELETE <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/recurring/RECURRING_ID.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Recurring</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="no">RECURRING_ID</span><span class="p">)</span> <span class="c1">#=&gt; Boolean</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$recurring</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">();</span>
</code></pre></div>
<p><code>DELETE</code>ing to <code>/recurring/RECURRING_ID.json</code> will delete the specified recurring and returns <code>204 No Content</code> if successful.</p>

<h2 id='payments'>Payments</h2>
<p>Payments in Quaderno-lingo represent the recording of a successful payment.</p>

<p>Like <a href="#items">items</a>, payments are a sub-object and can be attached to multiple types of other records:</p>

<ul>
<li>Invoices and sales receipts</li>
<li>Expenses</li>
</ul>

<aside class="notice">
Note that unlike items, payments cannot exist in Quaderno separately to an instance of one of these classes, and the same payment cannot be referenced by more than one instance.
</aside>
<h3 id='create-a-payment'>Create a payment</h3>
<blockquote>
<p><code>POST /invoices/INVOICE_ID/payments.json</code> or <code>POST /expenses/EXPENSE_ID/payments.json</code></p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># body.json</span>
<span class="o">{</span>
  <span class="s2">"amount"</span>:<span class="s2">"56.60"</span>,
  <span class="s2">"payment_method"</span>:<span class="s2">"credit_card"</span>,
  <span class="s2">"payment_processor"</span>:<span class="s2">"stripe"</span>,
  <span class="s2">"payment_processor_id"</span>:<span class="s2">"ch_19yUdh2eZvKYlo2CkFVBOZG7"</span>
<span class="o">}</span>

<span class="c"># curl command</span>
curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
     <span class="nt">-X</span> POST <span class="se">\</span>
     <span class="nt">--data-binary</span> @body.json <span class="se">\</span>
     <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/invoices/INVOICE_ID/payments.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$payment</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">QuadernoPayment</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
                                <span class="s1">'date'</span> <span class="o">=&gt;</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'2012-10-10'</span><span class="p">),</span>
                                <span class="s1">'payment_method'</span> <span class="o">=&gt;</span> <span class="s1">'credit_card'</span><span class="p">,</span>
                                <span class="s1">'amount'</span> <span class="o">=&gt;</span> <span class="s1">'56.60'</span><span class="p">,</span>
                                <span class="s1">'payment_processor'</span> <span class="o">=&gt;</span> <span class="s1">'stripe'</span><span class="p">,</span>
                                <span class="s1">'payment_processor_id'</span> <span class="o">=&gt;</span> <span class="s1">'ch_19yUdh2eZvKYlo2CkFVBOZG7'</span><span class="p">));</span>

<span class="nv">$invoice</span><span class="o">-&gt;</span><span class="na">addPayment</span><span class="p">(</span><span class="nv">$payment</span><span class="p">);</span>               <span class="c1">// Return true (success) or false (error)</span>
<span class="nv">$invoice</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>                             <span class="c1">// Returns true (success) or false (error)</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">invoice</span> <span class="o">=</span> <span class="no">Quaderno</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">)</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="ss">payment_method: </span><span class="s1">'credit_card'</span><span class="p">,</span>
    <span class="ss">amount: </span><span class="s1">'56.60'</span><span class="p">,</span>
    <span class="ss">payment_processor: </span><span class="s1">'stripe'</span><span class="p">,</span>
    <span class="ss">payment_processor_id: </span><span class="s1">'ch_19yUdh2eZvKYlo2CkFVBOZG7'</span>
<span class="p">}</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">add_payment</span><span class="p">(</span><span class="n">params</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Payment</span>
</code></pre></div>
<p><code>POST</code>ing to <code>invoices/INVOICE_ID/payments.json</code> or <code>expenses/EXPENSE_ID/payments.json</code> will create a new payment from the parameters passed. Note that payments can only be created as an attachment to an invoice or expense.</p>

<p>This will return <code>201 Created</code> and the current JSON representation of the payment if the creation was a success, along with the location of the new item in the <code>Location</code> header.</p>
<h4 id='attributes'>Attributes</h4>

<table><thead>
<tr>
<th>Attribute</th>
<th>Mandatory</th>
<th>Type/Description</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td><strong>yes</strong></td>
<td>Decimal</td>
</tr>
<tr>
<td>date</td>
<td>no</td>
<td>String(255 chars) Format <code>YYYY-MM-DD</code></td>
</tr>
<tr>
<td>payment_method</td>
<td><strong>yes</strong></td>
<td>One of the following: <code>credit_card</code>, <code>cash</code>, <code>wire_transfer</code>, <code>direct_debit</code>, <code>check</code>, <code>promissory_note</code>, <code>iou</code>, <code>paypal</code> or <code>other</code></td>
</tr>
<tr>
<td>payment_processor</td>
<td>no</td>
<td>Payment processor that you used to process the payment.</td>
</tr>
<tr>
<td>payment_processor_id</td>
<td>no</td>
<td>The <code>id</code> that the payment processor assigned to the payment.</td>
</tr>
</tbody></table>

<h3 id='retrieve-get-all-payments-on-an-invoice-or-expense'>Retrieve: Get all payments on an invoice or expense</h3><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-X</span> GET <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/expenses/EXPENSE_ID/payments.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$expense</span> <span class="o">=</span> <span class="nx">QuadernoExpense</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="s1">'EXPENSE_ID'</span><span class="p">);</span> <span class="c1">// Returns a QuadernoExpense</span>
<span class="nv">$payments</span> <span class="o">=</span> <span class="nv">$expense</span><span class="o">-&gt;</span><span class="na">getPayments</span><span class="p">();</span> <span class="c1">// Returns an array of QuadernoPayment</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">expense</span> <span class="o">=</span> <span class="no">Quaderno</span><span class="o">::</span><span class="no">Expense</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="no">EXPENSE_ID</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Expense</span>
<span class="n">payments</span> <span class="o">=</span> <span class="n">expense</span><span class="p">.</span><span class="nf">payments</span> <span class="c1">#=&gt; an array of Quaderno::Payment</span>
</code></pre></div>
<p><code>GET</code>ting from <code>/invoices/INVOICE_ID/payments.json</code> or <code>/expenses/EXPENSE_ID/payments.json</code> will return all the payments on the invoice or expense in question.</p>
<h3 id='retrieve-get-a-single-payment-on-an-invoice-or-expense'>Retrieve: Get a single payment on an invoice or expense</h3><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-X</span> GET <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/expenses/EXPENSE_ID/payments/PAYMENT_ID.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$expense</span> <span class="o">=</span> <span class="nx">QuadernoExpense</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="s1">'EXPENSE_ID'</span><span class="p">);</span> <span class="c1">// Returns a QuadernoExpense</span>
<span class="nv">$payments</span> <span class="o">=</span> <span class="nv">$expense</span><span class="o">-&gt;</span><span class="na">getPayments</span><span class="p">();</span> <span class="c1">// Returns an array of QuadernoPayment to iterate through</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">expense</span> <span class="o">=</span> <span class="no">Quaderno</span><span class="o">::</span><span class="no">Expense</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="no">EXPENSE_ID</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Expense</span>
<span class="n">payments</span> <span class="o">=</span> <span class="n">expense</span><span class="p">.</span><span class="nf">payments</span> <span class="c1">#=&gt; an array of Quaderno::Payment to iterate through</span>
</code></pre></div>
<p><code>GET</code>ting from <code>/invoices/INVOICE_ID/payments/PAYMENT_ID.json</code> or <code>/expenses/EXPENSE_ID/payments/PAYMENT_ID.json</code> will return that payments on the invoice or expense in question, if it exists.</p>
<h3 id='delete-a-payment'>Delete a payment</h3>

<blockquote>
<p><code>DELETE /invoices/INVOICE_ID/payments/PAYMENT_ID.json</code> or <code>DELETE /expenses/EXPENSE_ID/payments/PAYMENT_ID.json</code></p>
</blockquote>

<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-u</span> YOUR_API_KEY:x <span class="se">\</span>
     <span class="nt">-X</span> DELETE <span class="s1">'https://ACCOUNT_NAME.quadernoapp.com/api/expenses/EXPENSE_ID/payments/PAYMENT_ID.json'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">invoice</span> <span class="o">=</span> <span class="no">Quaderno</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">)</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">remove_payment</span><span class="p">(</span><span class="n">payment_id</span><span class="p">)</span> <span class="c1">#=&gt; Boolean</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$expense</span><span class="o">-&gt;</span><span class="na">removePayment</span><span class="p">(</span><span class="nv">$payments</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span> <span class="c1">// Return true (success) or false (error)</span>
</code></pre></div>

<p><code>DELETE</code>ing to <code>/invoices/INVOICE_ID/payments/PAYMENT_ID.json</code> or <code>/expenses/EXPENSE_ID/payments/PAYMENT_ID.json</code> will delete the specified payment and returns <code>204 No Content</code> if successful.</p>
<h1 id='checkout'>CHECKOUT</h1>
<h2 id='sessions'>Sessions</h2>

<p>A Checkout Session represents your customer&#39;s session as they pay for one-time purchases or subscriptions through Checkout.</p>

<h3 id='the-session-object'>The session object</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>integer</td>
<td>Unique identifier for the object.</td>
</tr>
<tr>
<td><code>billing_details_collection</code></td>
<td>string</td>
<td>The value for whether Checkout collected the customers billing details. Values are <code>auto</code> and <code>required</code> (default to <code>required</code>).</td>
</tr>
<tr>
<td><code>cancel_url</code></td>
<td>string</td>
<td>The URL the customer will be directed to if they decide to cancel payment and return to your website.</td>
</tr>
<tr>
<td><code>coupon_collection</code></td>
<td>boolean</td>
<td>The value for whether Checkout collected coupons.</td>
</tr>
<tr>
<td><code>custom</code></td>
<td>object</td>
<td>Set of key-value pairs that you want to forward to the payment processor. This can be useful for setting up additional options in the payment processor. If you want to send specific data to one processor, you can create a subhash with the name of that particular processor. E.g.: <code>stripe: { metadata: { user_id: 999 } }, paypal: { no_shipping: 0 }</code></td>
</tr>
<tr>
<td><code>customer</code></td>
<td>object</td>
<td>The customer&#39;s billing information. Check the attributes <a href="#customer-object">here</a></td>
</tr>
<tr>
<td><code>items</code></td>
<td>array</td>
<td>The list of products purchased by the customer. Check the item object <a href="#item-object">here</a></td>
</tr>
<tr>
<td><code>locale</code></td>
<td>string</td>
<td>The 2-letter ISO code of the language the Checkout is displayed in. Values are <code>auto</code>, <code>ca</code>, <code>de</code>, <code>en</code>, <code>es</code>, <code>fi</code>, <code>fr</code>, <code>hu</code>, <code>it</code>, <code>nb</code>, <code>nl</code>, and <code>sv</code>.</td>
</tr>
<tr>
<td><code>metadata</code></td>
<td>object</td>
<td>Set of key-value pairs that you can attach to the session. This can be useful for storing additional information about the purchase.</td>
</tr>
<tr>
<td><code>payment_methods</code></td>
<td>array</td>
<td>Values are <code>card</code> and <code>paypal</code>.</td>
</tr>
<tr>
<td><code>permalink</code></td>
<td>string</td>
<td>The URL of this Checkout Session.</td>
</tr>
<tr>
<td><code>success_url</code></td>
<td>string</td>
<td>The URL the customer will be directed to after the payment is successful.</td>
</tr>
<tr>
<td><code>updatable_quantity</code></td>
<td>boolean</td>
<td>The value for whether customers can update items&#39; quantities.</td>
</tr>
<tr>
<td><code>processor</code></td>
<td>string</td>
<td>Values are <code>stripe</code> and <code>paypal</code>.</td>
</tr>
<tr>
<td><code>processor_id</code></td>
<td>string</td>
<td></td>
</tr>
<tr>
<td><code>status</code></td>
<td>string</td>
<td><code>pending</code> sessions are unpaid and awaiting payment. A session is marked as failed when the payment failed or was declined. Note that this status many not show inmediately and instead show as <code>pending</code> until verified. completed sessions requires no further action and cannot be edited. A session is marked as abandoned after being cancelled by the customer or 30 minutes without activitiy. Values are <code>pending</code>, <code>processing</code>, <code>failed</code>, <code>completed</code>, and <code>abandoned</code>.</td>
</tr>
</tbody></table>

<h3 id='the-customer-object'>The customer object</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>billing_city</code></td>
<td>string</td>
<td>City/District/Suburb/Town/Village.</td>
</tr>
<tr>
<td><code>billing_country</code></td>
<td>string</td>
<td>2-letter country code.</td>
</tr>
<tr>
<td><code>billing_postal_code</code></td>
<td>string</td>
<td>ZIP or postal code.</td>
</tr>
<tr>
<td><code>billing_street_line_1</code></td>
<td>string</td>
<td>Address line 1 (Street address/PO Box).</td>
</tr>
<tr>
<td><code>billing_street_line_2</code></td>
<td>string</td>
<td>Address line 2 (Apartment/Suite/Unit/Building).</td>
</tr>
<tr>
<td><code>company</code></td>
<td>string</td>
<td>Customer company.</td>
</tr>
<tr>
<td><code>contact</code></td>
<td>integer</td>
<td>ID of an existing Quaderno <code>Contact</code>. Their billing data will be used in the session.</td>
</tr>
<tr>
<td><code>email</code></td>
<td>string (email)</td>
<td>Customer email.</td>
</tr>
<tr>
<td><code>first_name</code></td>
<td>string</td>
<td>Customer first name.</td>
</tr>
<tr>
<td><code>last_name</code></td>
<td>string</td>
<td>Customer last name.</td>
</tr>
<tr>
<td><code>tax_id</code></td>
<td>string</td>
<td>Customer Tax ID. Quaderno can validate EU VAT numbers, ABN, and NZBN.</td>
</tr>
</tbody></table>

<h3 id='the-item-object'>The item object</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>amount</code></td>
<td>number(decimal)</td>
<td>Unit price of the item being purchased.</td>
</tr>
<tr>
<td><code>currency</code></td>
<td>string</td>
<td>ISO 4217 currency code.</td>
</tr>
<tr>
<td><code>description</code></td>
<td>string</td>
<td>The description of the item being purchased.</td>
</tr>
<tr>
<td><code>name</code></td>
<td>string</td>
<td>The name of the item being purchased.</td>
</tr>
<tr>
<td><code>product</code></td>
<td>string</td>
<td>The SKU of the Quaderno Product.</td>
</tr>
<tr>
<td><code>quantity</code></td>
<td>integer</td>
<td>Quantity of the item being purchased.</td>
</tr>
</tbody></table>

<h3 id='create-a-session'>Create a session</h3>

<p>Sessions are created via links, but you can also create them via API if you need to create sessions on the fly.</p>

<blockquote>
<p><code>POST /checkout/sessions.json</code></p>
</blockquote>

<p>This request will return <code>201 Created</code> and the current JSON representation of the session if the creation was a success.</p>

<div class="highlight"><pre class="highlight plaintext"><code>curl -u YOUR_API_KEY:x \
     -H 'Content-Type: application/json' \
     -X POST \
     -d '{"billing_details_collection":"auto","cancel_url":"string","coupon_collection":true,"cus...}' \
     'https://ACCOUNT_NAME.quadernoapp.com/api/checkout/sessions.json'
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="c1">// Coming soon</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">CheckoutSession</span><span class="p">.</span><span class="nf">create</span><span class="p">({</span>
   <span class="ss">items: </span><span class="p">[</span>
      <span class="p">{</span> <span class="ss">product: </span><span class="s1">'prod_61ffa845b4a0b8'</span> <span class="p">}</span>
   <span class="p">],</span>
   <span class="ss">customer: </span><span class="p">{</span>
      <span class="ss">first_name: </span><span class="s1">'John'</span><span class="p">,</span>
      <span class="ss">last_name: </span><span class="s1">'Doe'</span><span class="p">,</span>
      <span class="ss">email: </span><span class="s1">'john@doe.com'</span>
   <span class="p">},</span>
   <span class="ss">success_url: </span><span class="s1">'https://mydomain.com/thank-you'</span><span class="p">.</span>
   <span class="nf">cancel_url</span><span class="p">:</span> <span class="s1">'https://mydomain.com/error'</span>
<span class="p">})</span>
</code></pre></div>

<p><strong>Session attributes:</strong></p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>billing_details_collection</code></td>
<td>string</td>
<td>The value for whether Checkout collected the customers billing details. Values are <code>auto</code> and <code>required</code> (default to <code>required</code>).</td>
</tr>
<tr>
<td><code>cancel_url</code></td>
<td>string / <strong>required</strong></td>
<td>The URL the customer will be directed to if they decide to cancel payment and return to your website.</td>
</tr>
<tr>
<td><code>coupon_collection</code></td>
<td>boolean</td>
<td>The value for whether Checkout collected coupons.</td>
</tr>
<tr>
<td><code>custom</code></td>
<td>object</td>
<td>Set of key-value pairs that you want to forward to the payment processor. This can be useful for setting up additional options in the payment processor. If you want to send specific data to one processor, you can create a subhash with the name of that particular processor. E.g.: stripe: { metadata: { user_id: 999 } }, paypal: { no_shipping: 0 }</td>
</tr>
<tr>
<td><code>customer</code></td>
<td>object</td>
<td>The customer&#39;s billing information. Check the attributes <a href="#customer-attributes">here</a>.</td>
</tr>
<tr>
<td><code>items</code></td>
<td>array / <strong>required</strong></td>
<td>The list of products purchased by the customer. Check the attributes <a href="#items-attributes">here</a>.</td>
</tr>
<tr>
<td><code>locale</code></td>
<td>string</td>
<td>The 2-letter ISO code of the language the Checkout is displayed in. Values are <code>auto</code>, <code>ca</code>, <code>de</code>, <code>en</code>, <code>es</code>, <code>fi</code>, <code>fr</code>, <code>hu</code>, <code>nl</code>, <code>sv</code>, and <code>no</code>.</td>
</tr>
<tr>
<td><code>metadata</code></td>
<td>object</td>
<td>Set of key-value pairs that you can attach to the session. This can be useful for storing additional information about the purchase.</td>
</tr>
<tr>
<td><code>payment_methods</code></td>
<td>array</td>
<td>Values are card and paypal.</td>
</tr>
<tr>
<td><code>success_url</code></td>
<td>string / <strong>required</strong></td>
<td>The URL the customer will be directed to after the payment is successful.</td>
</tr>
</tbody></table>

<p><strong>Customer attributes:</strong></p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>billing_city</code></td>
<td>string</td>
<td>City/District/Suburb/Town/Village. Use this parameter to prefill customer data if you already have her city on file.</td>
</tr>
<tr>
<td><code>billing_country</code></td>
<td>string</td>
<td>2-letter country code. Use this parameter to prefill customer data if you already have her country on file.</td>
</tr>
<tr>
<td><code>billing_postal_code</code></td>
<td>string</td>
<td>ZIP or postal code. Use this parameter to prefill customer data if you already have her postal code on file.</td>
</tr>
<tr>
<td><code>billing_street_line_1</code></td>
<td>string</td>
<td>Address line 1 (Street address/PO Box). Use this parameter to prefill customer data if you already have her street address on file.</td>
</tr>
<tr>
<td><code>billing_street_line_2</code></td>
<td>string</td>
<td>Address line 2 (Apartment/Suite/Unit/Building). Use this parameter to prefill customer data if you already have her street address on file.</td>
</tr>
<tr>
<td><code>contact</code></td>
<td>integer</td>
<td>The ID of the Quaderno Contact. A new contact will be created unless an existing contact was provided in when the Checkout was created.</td>
</tr>
<tr>
<td><code>company</code></td>
<td>string</td>
<td>Customer company. Use this parameter to prefill customer data if you already have her company name on file.</td>
</tr>
<tr>
<td><code>email</code></td>
<td>string (email)</td>
<td>Customer email. Use this parameter to prefill customer data if you already have an email on file.</td>
</tr>
<tr>
<td><code>first_name</code></td>
<td>string</td>
<td>Customer first name. Use this parameter to prefill customer data if you already have her first name on file.</td>
</tr>
<tr>
<td><code>last_name</code></td>
<td>string</td>
<td>Customer last name. Use this parameter to prefill customer data if you already have her last name on file</td>
</tr>
<tr>
<td><code>tax_id</code></td>
<td>string</td>
<td>Customer Tax ID. Use this parameter to prefill customer data if you already have a tax id on file.</td>
</tr>
</tbody></table>

<p><strong>Items attributes:</strong></p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>amount</code></td>
<td>number(decimal)</td>
<td>Unit price of the item being purchased. Default value the product&#39;s price is used if amount is not set.</td>
</tr>
<tr>
<td><code>currency</code></td>
<td>string</td>
<td>ISO 4217 currency code. Must be a supported currency by the payment processor. Default value the product&#39;s currency is used if currency is not set.</td>
</tr>
<tr>
<td><code>description</code></td>
<td>string</td>
<td>The description of the item being purchased. Default value the product&#39;s description is used if description is not set.</td>
</tr>
<tr>
<td><code>name</code></td>
<td>string</td>
<td>The name of the item being purchased. Default value the product&#39;s name is used if name is not set.</td>
</tr>
<tr>
<td><code>product</code></td>
<td>string / <strong>required</strong></td>
<td>The SKU of the Quaderno Product.</td>
</tr>
<tr>
<td><code>quantity</code></td>
<td>integer</td>
<td>Quantity of the item being purchased. Minimum value is 1.</td>
</tr>
</tbody></table>

<h3 id='retrieve-a-session'>Retrieve a session</h3>

<p>Retrieves the details of an existing session. You need only supply the unique session identifier that was returned upon session creation.</p>

<blockquote>
<p><code>GET /checkout/sessions/SESSION_ID.json</code></p>
</blockquote>

<div class="highlight"><pre class="highlight plaintext"><code>curl -u YOUR_API_KEY:x \
     -X GET 'https://ACCOUNT_NAME.quadernoapp.com/api/checkout/sessions/SESSION_ID.json'
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">CheckoutSession</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="no">SESSION_ID</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="c1">// Coming soon!</span>

</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"billing_details_collection"</span><span class="p">:</span><span class="s2">"required"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"cancel_url"</span><span class="p">:</span><span class="s2">"http://go.back.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"coupon_collection"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"locale"</span><span class="p">:</span><span class="s2">"auto"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"payment_methods"</span><span class="p">:[</span><span class="s2">"card"</span><span class="p">,</span><span class="w"> </span><span class="s2">"paypal"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"success_url"</span><span class="p">:</span><span class="s2">"http://success.com?prod=1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"custom"</span><span class="p">:{},</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="nl">"product"</span><span class="p">:</span><span class="s2">"prod_61ffa845b4a0b8"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"amount"</span><span class="p">:</span><span class="mf">999.0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"A test item"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"This a test item."</span><span class="p">,</span><span class="w">
            </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="mi">1</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"customer"</span><span class="p">:{</span><span class="w">
         </span><span class="nl">"billing_city"</span><span class="p">:</span><span class="s2">"John"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"billing_country"</span><span class="p">:</span><span class="s2">"GB"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"billing_postal_code"</span><span class="p">:</span><span class="s2">"asd"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"billing_street_line_1"</span><span class="p">:</span><span class="s2">"asd"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"billing_street_line_2"</span><span class="p">:</span><span class="s2">"asd"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"company"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
         </span><span class="nl">"email"</span><span class="p">:</span><span class="s2">"john@doe.com"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"first_name"</span><span class="p">:</span><span class="s2">"John"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"last_name"</span><span class="p">:</span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"tax_id"</span><span class="p">:</span><span class="kc">null</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="err">metadata:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="nl">"permalink"</span><span class="p">:</span><span class="s2">"https://demo.quadernoapp.com/checkout/session/8ccf3fdc42b85800188b113b81d3e4212ef094b3"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='update-a-session'>Update a session</h3>
<p>Updates the specified session by setting the values of the parameters passed. Any parameters not provided will be left unchanged. Only pending sessions can be updated.</p>

<p>This request accepts mostly the same arguments as the session creation call.</p>

<blockquote>
<p><code>PUT /checkout/sessions/SESSION_ID.json</code></p>
</blockquote>

<p>This will return <code>200 OK</code> and a JSON representation of the contact if successful.</p>
<div class="highlight"><pre class="highlight plaintext"><code>curl \
 -X PUT https://ACCOUNT_NAME.quadernoapp.com/api/checkout/sessions/SESSION_ID \
 -H "Content-Type: application/json" \
 -d '{"id":42,"billing_details_collection":"auto","cancel_url":"htttp://cancel.url.com","coupon_collection":true,"loc...}'
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">CheckoutSession</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span>
   <span class="no">SESSION_ID</span><span class="p">,</span>
   <span class="p">{</span>
      <span class="ss">success_url: </span><span class="s1">'https://mydomain.com/another-page'</span>
   <span class="p">}</span>
<span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="c1">// Coming soon!</span>

</code></pre></div>

<p><strong>Session attributes:</strong></p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>integer</td>
<td>Unique identifier for the object.</td>
</tr>
<tr>
<td><code>billing_details_collection</code></td>
<td>string</td>
<td>The value for whether Checkout collected the customers billing details. Values are <code>auto</code> and <code>required</code> (default to <code>required</code>).</td>
</tr>
<tr>
<td><code>cancel_url</code></td>
<td>string / <strong>required</strong></td>
<td>The URL the customer will be directed to if they decide to cancel payment and return to your website.</td>
</tr>
<tr>
<td><code>coupon_collection</code></td>
<td>boolean</td>
<td>The value for whether Checkout collected coupons.</td>
</tr>
<tr>
<td><code>custom</code></td>
<td>object</td>
<td>Set of key-value pairs that you want to forward to the payment processor. This can be useful for setting up additional options in the payment processor. If you want to send specific data to one processor, you can create a subhash with the name of that particular processor. E.g.: stripe: { metadata: { user_id: 999 } }, paypal: { no_shipping: 0 }</td>
</tr>
<tr>
<td><code>customer</code></td>
<td>object</td>
<td>The customer&#39;s billing information. Check the attributes <a href="#customer-attributes">here</a>.</td>
</tr>
<tr>
<td><code>items</code></td>
<td>array / <strong>required</strong></td>
<td>The list of products purchased by the customer. Check the attributes <a href="#items-attributes">here</a>.</td>
</tr>
<tr>
<td><code>locale</code></td>
<td>string</td>
<td>The 2-letter ISO code of the language the Checkout is displayed in. Values are <code>auto</code>, <code>ca</code>, <code>de</code>, <code>en</code>, <code>es</code>, <code>fi</code>, <code>fr</code>, <code>hu</code>, <code>nl</code>, <code>sv</code>, and <code>no</code>.</td>
</tr>
<tr>
<td><code>metadata</code></td>
<td>object</td>
<td>Set of key-value pairs that you can attach to the session. This can be useful for storing additional information about the purchase.</td>
</tr>
<tr>
<td><code>payment_methods</code></td>
<td>array</td>
<td>Values are card and paypal.</td>
</tr>
<tr>
<td><code>success_url</code></td>
<td>string / <strong>required</strong></td>
<td>The URL the customer will be directed to after the payment is successful.</td>
</tr>
</tbody></table>

<p><strong>Customer attributes:</strong></p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>billing_city</code></td>
<td>string</td>
<td>City/District/Suburb/Town/Village. Use this parameter to prefill customer data if you already have her city on file.</td>
</tr>
<tr>
<td><code>billing_country</code></td>
<td>string</td>
<td>2-letter country code. Use this parameter to prefill customer data if you already have her country on file.</td>
</tr>
<tr>
<td><code>billing_postal_code</code></td>
<td>string</td>
<td>ZIP or postal code. Use this parameter to prefill customer data if you already have her postal code on file.</td>
</tr>
<tr>
<td><code>billing_street_line_1</code></td>
<td>string</td>
<td>Address line 1 (Street address/PO Box). Use this parameter to prefill customer data if you already have her street address on file.</td>
</tr>
<tr>
<td><code>billing_street_line_2</code></td>
<td>string</td>
<td>Address line 2 (Apartment/Suite/Unit/Building). Use this parameter to prefill customer data if you already have her street address on file.</td>
</tr>
<tr>
<td><code>contact</code></td>
<td>integer</td>
<td>The ID of the Quaderno Contact. A new contact will be created unless an existing contact was provided in when the Checkout was created.</td>
</tr>
<tr>
<td><code>company</code></td>
<td>string</td>
<td>Customer company. Use this parameter to prefill customer data if you already have her company name on file.</td>
</tr>
<tr>
<td><code>email</code></td>
<td>string (email)</td>
<td>Customer email. Use this parameter to prefill customer data if you already have an email on file.</td>
</tr>
<tr>
<td><code>first_name</code></td>
<td>string</td>
<td>Customer first name. Use this parameter to prefill customer data if you already have her first name on file.</td>
</tr>
<tr>
<td><code>last_name</code></td>
<td>string</td>
<td>Customer last name. Use this parameter to prefill customer data if you already have her last name on file</td>
</tr>
<tr>
<td><code>tax_id</code></td>
<td>string</td>
<td>Customer Tax ID. Use this parameter to prefill customer data if you already have a tax id on file.</td>
</tr>
</tbody></table>

<p><strong>Items attributes:</strong></p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>amount</code></td>
<td>number(decimal)</td>
<td>Unit price of the item being purchased. Default value the product&#39;s price is used if amount is not set.</td>
</tr>
<tr>
<td><code>currency</code></td>
<td>string</td>
<td>ISO 4217 currency code. Must be a supported currency by the payment processor. Default value the product&#39;s currency is used if currency is not set.</td>
</tr>
<tr>
<td><code>description</code></td>
<td>string</td>
<td>The description of the item being purchased. Default value the product&#39;s description is used if description is not set.</td>
</tr>
<tr>
<td><code>name</code></td>
<td>string</td>
<td>The name of the item being purchased. Default value the product&#39;s name is used if name is not set.</td>
</tr>
<tr>
<td><code>product</code></td>
<td>string / <strong>required</strong></td>
<td>The SKU of the Quaderno Product.</td>
</tr>
</tbody></table>

<h3 id='delete-a-session'>Delete a session</h3>

<p>Permanently deletes a session. It cannot be undone. Only <code>pending</code> sessions can be deleted.</p>

<blockquote>
<p><code>DELETE /checkout/sessions/SESSION_ID.json</code></p>
</blockquote>

<p>Will delete the specified contact and returns <code>204 No Content</code> if successful.</p>

<div class="highlight"><pre class="highlight plaintext"><code>$ curl \
 -X DELETE https://quadernoapp.com/api/checkout/sessions/{id} \
 -H "Content-Type: application/json"
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">CheckoutSession</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="no">SESSION_ID</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="c1">// Coming soon!</span>
</code></pre></div><h3 id='list-all-sessions'>List all sessions</h3>
<p>You can list all sessions, or list the sessions for a specific status. The sessions are returned sorted by creation date, with the most recently created sessions appearing first.</p>

<blockquote>
<p><code>GET /checkout/sessions.json</code></p>
</blockquote>

<p>Returns an array of sessions. Each entry in the array is a separate session object. If no more sessions are available, the resulting array will be empty.</p>
<div class="highlight"><pre class="highlight plaintext"><code>curl -u YOUR_API_KEY:x \
     -X GET 'https://ACCOUNT_NAME.quadernoapp.com/api/checkout/sessions.json'
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">CheckoutSession</span><span class="p">.</span><span class="nf">all</span><span class="p">()</span> <span class="c1">#=&gt; Array</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="c1">// Coming soon!</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"billing_details_collection"</span><span class="p">:</span><span class="s2">"required"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"cancel_url"</span><span class="p">:</span><span class="s2">"http://go.back.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"coupon_collection"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"locale"</span><span class="p">:</span><span class="s2">"auto"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"payment_methods"</span><span class="p">:[</span><span class="s2">"card"</span><span class="p">,</span><span class="w"> </span><span class="s2">"paypal"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"success_url"</span><span class="p">:</span><span class="s2">"http://success.com?prod=1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"custom"</span><span class="p">:{},</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="nl">"product"</span><span class="p">:</span><span class="s2">"prod_61ffa845b4a0b8"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"amount"</span><span class="p">:</span><span class="mf">999.0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"A test item"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"This a test item."</span><span class="p">,</span><span class="w">
            </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="mi">1</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"customer"</span><span class="p">:{</span><span class="w">
         </span><span class="nl">"billing_city"</span><span class="p">:</span><span class="s2">"John"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"billing_country"</span><span class="p">:</span><span class="s2">"GB"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"billing_postal_code"</span><span class="p">:</span><span class="s2">"asd"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"billing_street_line_1"</span><span class="p">:</span><span class="s2">"asd"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"billing_street_line_2"</span><span class="p">:</span><span class="s2">"asd"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"company"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
         </span><span class="nl">"email"</span><span class="p">:</span><span class="s2">"john@doe.com"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"first_name"</span><span class="p">:</span><span class="s2">"John"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"last_name"</span><span class="p">:</span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"tax_id"</span><span class="p">:</span><span class="kc">null</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="err">metadata:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="nl">"permalink"</span><span class="p">:</span><span class="s2">"https://demo.quadernoapp.com/checkout/session/8ccf3fdc42b85800188b113b81d3e4212ef094b3"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="s2">"failed"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"billing_details_collection"</span><span class="p">:</span><span class="s2">"auto"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"cancel_url"</span><span class="p">:</span><span class="s2">"http://go.back.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"coupon_collection"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"locale"</span><span class="p">:</span><span class="s2">"es"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"payment_methods"</span><span class="p">:[</span><span class="s2">"paypal"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"success_url"</span><span class="p">:</span><span class="s2">"http://success.com?prod=2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"custom"</span><span class="p">:{},</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="nl">"product"</span><span class="p">:</span><span class="s2">"awesome"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"amount"</span><span class="p">:</span><span class="mf">999.0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Awesome"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="mi">1</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"customer"</span><span class="p">:{</span><span class="w">
         </span><span class="nl">"billing_city"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
         </span><span class="nl">"billing_country"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
         </span><span class="nl">"billing_postal_code"</span><span class="p">:</span><span class="s2">"asd"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"billing_street_line_1"</span><span class="p">:</span><span class="s2">"asdas"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"billing_street_line_2"</span><span class="p">:</span><span class="s2">"asd"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"company"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
         </span><span class="nl">"email"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
         </span><span class="nl">"first_name"</span><span class="p">:</span><span class="s2">"James"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"last_name"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
         </span><span class="nl">"tax_id"</span><span class="p">:</span><span class="kc">null</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="err">metadata:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="nl">"permalink"</span><span class="p">:</span><span class="s2">"https://demo.quadernoapp.com/checkout/session/5c24890be57274275358e7d25ea5200384fc7293"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="s2">"abandoned"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"billing_details_collection"</span><span class="p">:</span><span class="s2">"required"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"success_url"</span><span class="p">:</span><span class="s2">"http://success.com?prod=1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"coupon_collection"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"locale"</span><span class="p">:</span><span class="s2">"auto"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"payment_methods"</span><span class="p">:[</span><span class="s2">"card"</span><span class="p">,</span><span class="w"> </span><span class="s2">"paypal"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"success_url"</span><span class="p">:</span><span class="s2">"http://success.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"custom"</span><span class="p">:{},</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="nl">"product"</span><span class="p">:</span><span class="s2">"prod_61ffa845b4a0b8"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"amount"</span><span class="p">:</span><span class="mf">999.0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Something"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="mi">1</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"customer"</span><span class="p">:{</span><span class="w">
         </span><span class="nl">"billing_city"</span><span class="p">:</span><span class="s2">"York"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"billing_country"</span><span class="p">:</span><span class="s2">"GB"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"billing_postal_code"</span><span class="p">:</span><span class="s2">"Y01 6FA"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"billing_street_line_1"</span><span class="p">:</span><span class="s2">"Fake Street 1"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"billing_street_line_2"</span><span class="p">:</span><span class="s2">"Apt. 1"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"company"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
         </span><span class="nl">"email"</span><span class="p">:</span><span class="s2">"giles@gorales.co.uk"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"first_name"</span><span class="p">:</span><span class="s2">"Giles"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"last_name"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
         </span><span class="nl">"tax_id"</span><span class="p">:</span><span class="kc">null</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="err">metadata:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="nl">"permalink"</span><span class="p">:</span><span class="s2">"https://demo.quadernoapp.com/checkout/session/0092e2afbc457a2e3acf1a2c75928743d06c1fe5"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<h1 id='webhooks'>WEBHOOKS</h1>
<h2 id='webhooks-endpoints'>Webhooks endpoints</h2>

<p>You can configure webhook endpoints via the API to be notified about events that happen in your Quaderno account or connected accounts.</p>

<p>Most users configure webhooks from the <a href="https://recrea.quadernoapp.com/developers/webhooks">dashboard</a>, which provides a user interface for registering and testing your webhook endpoints.</p>

<h3 id='create-a-webhook'>Create a webhook</h3>

<blockquote>
<p>POST /webhooks.json</p>
</blockquote>

<div class="highlight"><pre class="highlight plaintext"><code># body.json
{
    "url": "http://anotherapp.com/notifications",
    "events_types": [
        "invoice.created",
        "estimate.updated",
        "invoice.deleted",
        "contact.created"
    ]
}

curl -u YOUR_API_KEY:x \
     -H 'Content-Type: application/json' \
     -X POST \
     --data-binary @body.json \
     'https://ACCOUNT_NAME.quadernoapp.com/api/webhooks.json'
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="ss">url: </span><span class="s2">"http://anotherapp.com/notifications"</span><span class="p">,</span>
    <span class="ss">events_types: </span><span class="p">[</span>
        <span class="s1">'invoice.created'</span><span class="p">,</span>
        <span class="s1">'estimate.updated'</span><span class="p">,</span>
        <span class="s1">'invoice.deleted'</span><span class="p">,</span>
        <span class="s1">'contact.created'</span>
    <span class="p">]</span>
<span class="p">}</span>
<span class="no">Quaderno</span><span class="o">::</span><span class="no">Webhook</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">params</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Webhook</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$webhook</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">QuadernoWebhook</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
                                 <span class="s1">'url'</span> <span class="o">=&gt;</span> <span class="s1">'http://myapp.com/notifications'</span><span class="p">,</span>
                                 <span class="s1">'events_types'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'contact.created'</span><span class="p">));</span>

<span class="nv">$webhook</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span> <span class="c1">// Returns true (success) or false (error)</span>
</code></pre></div>

<p><code>POST</code>ing to <code>/webhooks.json</code> will create a new webhook from the passed parameters.</p>

<p>Mandatory fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>url</code></td>
<td>Indicates the destination URL of the webhook request.</td>
</tr>
<tr>
<td><code>events_types</code></td>
<td>An array of strings indicating which events you wish to subscribe to.</td>
</tr>
</tbody></table>

<p>Webhook URLs should be set up to accept <code>HEAD</code> and <code>POST</code> requests. When you provide the URL where you want Quaderno to <code>POST</code> the data for events, we&#39;ll do a quick check that the URL exists by using a <code>HEAD</code> request (not <code>POST</code>).</p>

<p>If the URL doesn&#39;t exist or returns something other than a <code>200</code> HTTP response to the <code>HEAD</code> request, Quaderno won&#39;t be able to verify that the URL exists and is valid.</p>

<p>This will return <code>201 Created</code> with the current JSON representation of the webhook if the creation was a success.</p>

<h3 id='retrieve-get-all-webhooks'>Retrieve: Get all webhooks</h3>

<blockquote>
<p>GET /webhooks.json</p>
</blockquote>

<div class="highlight"><pre class="highlight plaintext"><code>curl -u YOUR_API_KEY:x \
     -X GET 'https://ACCOUNT_NAME.quadernoapp.com/api/ewbhooks.json'
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Webhook</span><span class="p">.</span><span class="nf">all</span><span class="p">()</span> <span class="c1">#=&gt; Array</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$webhooks</span> <span class="o">=</span> <span class="nx">QuadernoWebhook</span><span class="o">::</span><span class="na">find</span><span class="p">();</span> <span class="c1">// Returns an array of QuadernoWebhook</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"https://myawesomeapp.com/notifications"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auth_key"</span><span class="p">:</span><span class="s2">"zXQgArTtQxAMaYppMrDoUQ"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"events"</span><span class="p">:[</span><span class="s2">"created"</span><span class="p">,</span><span class="s2">"updated"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"last_sent_at"</span><span class="p">:</span><span class="s2">"2013-05-18T11:11:11Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_error"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"events_sent"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="s2">"2013-05-17T14:08:05Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="s2">"2013-05-17T14:08:05Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"http://anotherapp.com/notifications"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auth_key"</span><span class="p">:</span><span class="s2">"HXQgAgblQxAMaNppMrXoSW"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"events:_types"</span><span class="p">:[</span><span class="s2">"invoice.created"</span><span class="p">,</span><span class="s2">"contact.deleted"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"last_sent_at"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_error"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"events_sent"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="s2">"2013-07-13T14:12:01Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="s2">"2013-07-17T14:09:59Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>

<p><code>GET</code>ting to <code>/webhooks.json</code> will return all your webhooks.</p>

<h3 id='retrieve-get-a-single-webhook'>Retrieve: Get a single webhook</h3>

<blockquote>
<p>GET /webhooks/WEBHOOK_ID.json</p>
</blockquote>

<div class="highlight"><pre class="highlight plaintext"><code>curl -u YOUR_API_KEY:x \
     -X GET 'https://ACCOUNT_NAME.quadernoapp.com/api/webhooks/WEBHOOK_ID.json'
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Webhook</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="no">WEBHOOK_ID</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Webhook</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$webhooks</span> <span class="o">=</span> <span class="nx">QuadernoWebhook</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="nx">WEBHOOK_ID</span><span class="p">);</span> <span class="c1">// Returns a QuadernoWebhook</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"http://anotherapp.com/notifications"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auth_key"</span><span class="p">:</span><span class="s2">"HXQgAgblQxAMaNppMrXoSW"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"events:_types"</span><span class="p">:[</span><span class="s2">"invoice.created"</span><span class="p">,</span><span class="s2">"contact.deleted"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"last_sent_at"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_error"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"events_sent"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="s2">"2013-07-13T14:12:01Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="s2">"2013-07-17T14:09:59Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>

<p><code>GET</code>ting to <code>/webhooks/WEBHOOK_ID.json</code> will return a specific webhook.</p>

<h3 id='update-a-webhook'>Update a webhook</h3>

<blockquote>
<p>PUT /webhooks/WEBHOOK_ID.json</p>
</blockquote>

<div class="highlight"><pre class="highlight plaintext"><code>curl -u YOUR_API_KEY:x \
     -H 'Content-Type: application/json' \
     -X PUT \
     -d '{ "events_types": ["contact.updated","estimate.deleted"] }' \
     'https://ACCOUNT_NAME.quadernoapp.com/api/webhooks/WEBHOOK_ID.json'
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="ss">events_types: </span><span class="p">[</span> <span class="s1">'contact.updated'</span><span class="p">,</span> <span class="s1">'estimate.deleted'</span> <span class="p">]</span>
<span class="p">}</span>
<span class="no">Quaderno</span><span class="o">::</span><span class="no">Webhook</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="no">WEBHOOK_ID</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span> <span class="c1">#=&gt; Quaderno::Webhook</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$webhook</span><span class="o">-&gt;</span><span class="na">url</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
<span class="nv">$webhook</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span> <span class="c1">// Returns false - url is a required field</span>
<span class="k">foreach</span><span class="p">(</span><span class="nv">$webhook</span><span class="o">-&gt;</span><span class="na">errors</span> <span class="k">as</span> <span class="nv">$field</span> <span class="o">=&gt;</span> <span class="nv">$errors</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">print</span> <span class="s2">"</span><span class="si">{</span><span class="nv">$field</span><span class="si">}</span><span class="s2">: "</span><span class="p">;</span>
  <span class="k">foreach</span> <span class="p">(</span><span class="nv">$errors</span> <span class="k">as</span> <span class="nv">$e</span><span class="p">)</span> <span class="k">print</span> <span class="nv">$e</span><span class="p">;</span>
<span class="p">}</span>

<span class="nv">$webhook</span><span class="o">-&gt;</span><span class="na">url</span> <span class="o">=</span> <span class="s1">'http://anotherapp.com/quaderno/notifications'</span><span class="p">;</span>
<span class="nv">$webhook</span><span class="o">-&gt;</span><span class="na">events_types</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'contact.created'</span><span class="p">,</span> <span class="s1">'contact.updated'</span><span class="p">,</span> <span class="s1">'contact.deleted'</span><span class="p">);</span>
<span class="nv">$webhook</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
</code></pre></div>

<p><code>PUT</code>ting to <code>/webhooks/WEBHOOK_ID.json</code> will update a webhook with the passed parameters.</p>

<p>This will return <code>201 Created</code> with the current JSON representation of the webhook if the update was a success.</p>

<h3 id='delete-a-webhook'>Delete a webhook</h3>

<blockquote>
<p><code>DELETE /webhooks/WEBHOOK_ID.json</code></p>
</blockquote>

<div class="highlight"><pre class="highlight plaintext"><code>curl -u YOUR_API_KEY:x \
     -X DELETE 'https://ACCOUNT_NAME.quadernoapp.com/api/webhooks/WEBHOOK_ID.json'
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Quaderno</span><span class="o">::</span><span class="no">Webhook</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="no">WEBHOOK_ID</span><span class="p">)</span> <span class="c1">#=&gt; Boolean</span>
</code></pre></div>

<p><code>DELETE</code>ing to <code>/webhooks/WEBHOOK_ID.json</code> will delete the specified webhook and return <code>204 No Content</code> if the update was successful.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="cURL">cURL</a>
                <a href="#" data-language-name="ruby">ruby</a>
                <a href="#" data-language-name="php">php</a>
          </div>
      </div>
    </div>
  </body>
</html>
